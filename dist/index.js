#!/usr/bin/env node
var Zr=Object.defineProperty;var rs=Object.getOwnPropertyDescriptor;var os=Object.getOwnPropertyNames;var ns=Object.prototype.hasOwnProperty;var nn=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+r+'" is not supported')});var is=(r,e)=>()=>(r&&(e=r(r=0)),e);var Ge=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),ss=(r,e)=>{for(var t in e)Zr(r,t,{get:e[t],enumerable:!0})},as=(r,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of os(e))!ns.call(r,n)&&n!==t&&Zr(r,n,{get:()=>e[n],enumerable:!(o=rs(e,n))||o.enumerable});return r};var ls=r=>as(Zr({},"__esModule",{value:!0}),r);var fn={};ss(fn,{ThemeContext:()=>no,ThemeProvider:()=>Mt,baseTheme:()=>xt,darkTheme:()=>cn,getTheme:()=>Ct,highContrastTheme:()=>un,salesforceTheme:()=>dn,useTheme:()=>I});import*as qt from"react";var xt,cn,un,dn,Ct,no,Mt,I,J=is(()=>{"use strict";xt={colors:{primary:"#36A9E1",secondary:"#2E844A",success:"#2E844A",warning:"#FE9339",error:"#EA001E",info:"#0176D3",text:"#181818",textInverse:"#FFFFFF",textMuted:"#706E6B",background:"#FFFFFF",backgroundHover:"#F3F3F3",border:"#DDDBDA",highlight:"#F3F2F2"},spacing:{xs:1,sm:2,md:4,lg:8,xl:16},borderRadius:{sm:2,md:4,lg:8},box:{borderStyle:"round",padding:1,margin:1},text:{bold:(r=!0)=>({bold:r}),italic:(r=!0)=>({italic:r}),underline:(r=!0)=>({underline:r}),dim:(r=!0)=>({dimColor:r}),color:r=>({color:r}),bgColor:r=>({backgroundColor:r})}},cn={...xt,colors:{...xt.colors,text:"#F3F3F3",textInverse:"#181818",textMuted:"#B0ADAB",background:"#1B1B1B",backgroundHover:"#2D2D2D",border:"#444444",highlight:"#333333"}},un={...xt,colors:{primary:"#0067B8",secondary:"#0A7C36",success:"#0A7C36",warning:"#D83B01",error:"#A91B0A",info:"#0050B3",text:"#000000",textInverse:"#FFFFFF",textMuted:"#4D4D4D",background:"#FFFFFF",backgroundHover:"#E5E5E5",border:"#000000",highlight:"#F0F0F0"}},dn={...xt,colors:{primary:"#0176D3",secondary:"#2E844A",success:"#2E844A",warning:"#FE9339",error:"#EA001E",info:"#0176D3",text:"#181818",textInverse:"#FFFFFF",textMuted:"#706E6B",background:"#F3F3F3",backgroundHover:"#E5E5E5",border:"#C9C9C9",highlight:"#E5E5E5"}},Ct=(r="base")=>{switch(r.toLowerCase()){case"dark":return cn;case"highcontrast":case"high-contrast":case"highContrast":return un;case"salesforce":case"lightning":return dn;case"base":default:return xt}},no=qt.createContext(xt),Mt=({theme:r=xt,children:e})=>qt.createElement(no.Provider,{value:r},e),I=()=>qt.useContext(no)||xt});var Si=Ge(_o=>{"use strict";var vi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");_o.encode=function(r){if(0<=r&&r<vi.length)return vi[r];throw new TypeError("Must be between 0 and 63: "+r)};_o.decode=function(r){var e=65,t=90,o=97,n=122,i=48,l=57,u=43,a=47,s=26,c=52;return e<=r&&r<=t?r-e:o<=r&&r<=n?r-o+s:i<=r&&r<=l?r-i+c:r==u?62:r==a?63:-1}});var jo=Ge(Fo=>{"use strict";var Ci=Si(),No=5,Bi=1<<No,wi=Bi-1,Ei=Bi;function Ml(r){return r<0?(-r<<1)+1:(r<<1)+0}function Ol(r){var e=(r&1)===1,t=r>>1;return e?-t:t}Fo.encode=function(e){var t="",o,n=Ml(e);do o=n&wi,n>>>=No,n>0&&(o|=Ei),t+=Ci.encode(o);while(n>0);return t};Fo.decode=function(e,t,o){var n=e.length,i=0,l=0,u,a;do{if(t>=n)throw new Error("Expected more digits in base 64 VLQ value.");if(a=Ci.decode(e.charCodeAt(t++)),a===-1)throw new Error("Invalid base64 digit: "+e.charAt(t-1));u=!!(a&Ei),a&=wi,i=i+(a<<l),l+=No}while(u);o.value=Ol(i),o.rest=t}});var er=Ge(Fe=>{"use strict";function Dl(r,e,t){if(e in r)return r[e];if(arguments.length===3)return t;throw new Error('"'+e+'" is a required argument.')}Fe.getArg=Dl;var Ri=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Il=/^data:.+\,.+$/;function Cr(r){var e=r.match(Ri);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}Fe.urlParse=Cr;function Xt(r){var e="";return r.scheme&&(e+=r.scheme+":"),e+="//",r.auth&&(e+=r.auth+"@"),r.host&&(e+=r.host),r.port&&(e+=":"+r.port),r.path&&(e+=r.path),e}Fe.urlGenerate=Xt;function $o(r){var e=r,t=Cr(r);if(t){if(!t.path)return r;e=t.path}for(var o=Fe.isAbsolute(e),n=e.split(/\/+/),i,l=0,u=n.length-1;u>=0;u--)i=n[u],i==="."?n.splice(u,1):i===".."?l++:l>0&&(i===""?(n.splice(u+1,l),l=0):(n.splice(u,2),l--));return e=n.join("/"),e===""&&(e=o?"/":"."),t?(t.path=e,Xt(t)):e}Fe.normalize=$o;function Pi(r,e){r===""&&(r="."),e===""&&(e=".");var t=Cr(e),o=Cr(r);if(o&&(r=o.path||"/"),t&&!t.scheme)return o&&(t.scheme=o.scheme),Xt(t);if(t||e.match(Il))return e;if(o&&!o.host&&!o.path)return o.host=e,Xt(o);var n=e.charAt(0)==="/"?e:$o(r.replace(/\/+$/,"")+"/"+e);return o?(o.path=n,Xt(o)):n}Fe.join=Pi;Fe.isAbsolute=function(r){return r.charAt(0)==="/"||Ri.test(r)};function Ll(r,e){r===""&&(r="."),r=r.replace(/\/$/,"");for(var t=0;e.indexOf(r+"/")!==0;){var o=r.lastIndexOf("/");if(o<0||(r=r.slice(0,o),r.match(/^([^\/]+:\/)?\/*$/)))return e;++t}return Array(t+1).join("../")+e.substr(r.length+1)}Fe.relative=Ll;var ki=function(){var r=Object.create(null);return!("__proto__"in r)}();function Ai(r){return r}function _l(r){return Mi(r)?"$"+r:r}Fe.toSetString=ki?Ai:_l;function Nl(r){return Mi(r)?r.slice(1):r}Fe.fromSetString=ki?Ai:Nl;function Mi(r){if(!r)return!1;var e=r.length;if(e<9||r.charCodeAt(e-1)!==95||r.charCodeAt(e-2)!==95||r.charCodeAt(e-3)!==111||r.charCodeAt(e-4)!==116||r.charCodeAt(e-5)!==111||r.charCodeAt(e-6)!==114||r.charCodeAt(e-7)!==112||r.charCodeAt(e-8)!==95||r.charCodeAt(e-9)!==95)return!1;for(var t=e-10;t>=0;t--)if(r.charCodeAt(t)!==36)return!1;return!0}function Fl(r,e,t){var o=Zt(r.source,e.source);return o!==0||(o=r.originalLine-e.originalLine,o!==0)||(o=r.originalColumn-e.originalColumn,o!==0||t)||(o=r.generatedColumn-e.generatedColumn,o!==0)||(o=r.generatedLine-e.generatedLine,o!==0)?o:Zt(r.name,e.name)}Fe.compareByOriginalPositions=Fl;function jl(r,e,t){var o=r.generatedLine-e.generatedLine;return o!==0||(o=r.generatedColumn-e.generatedColumn,o!==0||t)||(o=Zt(r.source,e.source),o!==0)||(o=r.originalLine-e.originalLine,o!==0)||(o=r.originalColumn-e.originalColumn,o!==0)?o:Zt(r.name,e.name)}Fe.compareByGeneratedPositionsDeflated=jl;function Zt(r,e){return r===e?0:r===null?1:e===null?-1:r>e?1:-1}function $l(r,e){var t=r.generatedLine-e.generatedLine;return t!==0||(t=r.generatedColumn-e.generatedColumn,t!==0)||(t=Zt(r.source,e.source),t!==0)||(t=r.originalLine-e.originalLine,t!==0)||(t=r.originalColumn-e.originalColumn,t!==0)?t:Zt(r.name,e.name)}Fe.compareByGeneratedPositionsInflated=$l;function Hl(r){return JSON.parse(r.replace(/^\)]}'[^\n]*\n/,""))}Fe.parseSourceMapInput=Hl;function Ul(r,e,t){if(e=e||"",r&&(r[r.length-1]!=="/"&&e[0]!=="/"&&(r+="/"),e=r+e),t){var o=Cr(t);if(!o)throw new Error("sourceMapURL could not be parsed");if(o.path){var n=o.path.lastIndexOf("/");n>=0&&(o.path=o.path.substring(0,n+1))}e=Pi(Xt(o),e)}return $o(e)}Fe.computeSourceURL=Ul});var qo=Ge(Oi=>{"use strict";var Ho=er(),Uo=Object.prototype.hasOwnProperty,jt=typeof Map<"u";function St(){this._array=[],this._set=jt?new Map:Object.create(null)}St.fromArray=function(e,t){for(var o=new St,n=0,i=e.length;n<i;n++)o.add(e[n],t);return o};St.prototype.size=function(){return jt?this._set.size:Object.getOwnPropertyNames(this._set).length};St.prototype.add=function(e,t){var o=jt?e:Ho.toSetString(e),n=jt?this.has(e):Uo.call(this._set,o),i=this._array.length;(!n||t)&&this._array.push(e),n||(jt?this._set.set(e,i):this._set[o]=i)};St.prototype.has=function(e){if(jt)return this._set.has(e);var t=Ho.toSetString(e);return Uo.call(this._set,t)};St.prototype.indexOf=function(e){if(jt){var t=this._set.get(e);if(t>=0)return t}else{var o=Ho.toSetString(e);if(Uo.call(this._set,o))return this._set[o]}throw new Error('"'+e+'" is not in the set.')};St.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};St.prototype.toArray=function(){return this._array.slice()};Oi.ArraySet=St});var Li=Ge(Ii=>{"use strict";var Di=er();function ql(r,e){var t=r.generatedLine,o=e.generatedLine,n=r.generatedColumn,i=e.generatedColumn;return o>t||o==t&&i>=n||Di.compareByGeneratedPositionsInflated(r,e)<=0}function Wr(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}Wr.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)};Wr.prototype.add=function(e){ql(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};Wr.prototype.toArray=function(){return this._sorted||(this._array.sort(Di.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};Ii.MappingList=Wr});var Vo=Ge(_i=>{"use strict";var Br=jo(),Se=er(),Kr=qo().ArraySet,Vl=Li().MappingList;function Ze(r){r||(r={}),this._file=Se.getArg(r,"file",null),this._sourceRoot=Se.getArg(r,"sourceRoot",null),this._skipValidation=Se.getArg(r,"skipValidation",!1),this._sources=new Kr,this._names=new Kr,this._mappings=new Vl,this._sourcesContents=null}Ze.prototype._version=3;Ze.fromSourceMap=function(e){var t=e.sourceRoot,o=new Ze({file:e.file,sourceRoot:t});return e.eachMapping(function(n){var i={generated:{line:n.generatedLine,column:n.generatedColumn}};n.source!=null&&(i.source=n.source,t!=null&&(i.source=Se.relative(t,i.source)),i.original={line:n.originalLine,column:n.originalColumn},n.name!=null&&(i.name=n.name)),o.addMapping(i)}),e.sources.forEach(function(n){var i=n;t!==null&&(i=Se.relative(t,n)),o._sources.has(i)||o._sources.add(i);var l=e.sourceContentFor(n);l!=null&&o.setSourceContent(n,l)}),o};Ze.prototype.addMapping=function(e){var t=Se.getArg(e,"generated"),o=Se.getArg(e,"original",null),n=Se.getArg(e,"source",null),i=Se.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,o,n,i),n!=null&&(n=String(n),this._sources.has(n)||this._sources.add(n)),i!=null&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:o!=null&&o.line,originalColumn:o!=null&&o.column,source:n,name:i})};Ze.prototype.setSourceContent=function(e,t){var o=e;this._sourceRoot!=null&&(o=Se.relative(this._sourceRoot,o)),t!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Se.toSetString(o)]=t):this._sourcesContents&&(delete this._sourcesContents[Se.toSetString(o)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};Ze.prototype.applySourceMap=function(e,t,o){var n=t;if(t==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);n=e.file}var i=this._sourceRoot;i!=null&&(n=Se.relative(i,n));var l=new Kr,u=new Kr;this._mappings.unsortedForEach(function(a){if(a.source===n&&a.originalLine!=null){var s=e.originalPositionFor({line:a.originalLine,column:a.originalColumn});s.source!=null&&(a.source=s.source,o!=null&&(a.source=Se.join(o,a.source)),i!=null&&(a.source=Se.relative(i,a.source)),a.originalLine=s.line,a.originalColumn=s.column,s.name!=null&&(a.name=s.name))}var c=a.source;c!=null&&!l.has(c)&&l.add(c);var g=a.name;g!=null&&!u.has(g)&&u.add(g)},this),this._sources=l,this._names=u,e.sources.forEach(function(a){var s=e.sourceContentFor(a);s!=null&&(o!=null&&(a=Se.join(o,a)),i!=null&&(a=Se.relative(i,a)),this.setSourceContent(a,s))},this)};Ze.prototype._validateMapping=function(e,t,o,n){if(t&&typeof t.line!="number"&&typeof t.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!o&&!n)){if(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&o)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:o,original:t,name:n}))}};Ze.prototype._serializeMappings=function(){for(var e=0,t=1,o=0,n=0,i=0,l=0,u="",a,s,c,g,f=this._mappings.toArray(),p=0,m=f.length;p<m;p++){if(s=f[p],a="",s.generatedLine!==t)for(e=0;s.generatedLine!==t;)a+=";",t++;else if(p>0){if(!Se.compareByGeneratedPositionsInflated(s,f[p-1]))continue;a+=","}a+=Br.encode(s.generatedColumn-e),e=s.generatedColumn,s.source!=null&&(g=this._sources.indexOf(s.source),a+=Br.encode(g-l),l=g,a+=Br.encode(s.originalLine-1-n),n=s.originalLine-1,a+=Br.encode(s.originalColumn-o),o=s.originalColumn,s.name!=null&&(c=this._names.indexOf(s.name),a+=Br.encode(c-i),i=c)),u+=a}return u};Ze.prototype._generateSourcesContent=function(e,t){return e.map(function(o){if(!this._sourcesContents)return null;t!=null&&(o=Se.relative(t,o));var n=Se.toSetString(o);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)};Ze.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};Ze.prototype.toString=function(){return JSON.stringify(this.toJSON())};_i.SourceMapGenerator=Ze});var Ni=Ge($t=>{"use strict";$t.GREATEST_LOWER_BOUND=1;$t.LEAST_UPPER_BOUND=2;function Go(r,e,t,o,n,i){var l=Math.floor((e-r)/2)+r,u=n(t,o[l],!0);return u===0?l:u>0?e-l>1?Go(l,e,t,o,n,i):i==$t.LEAST_UPPER_BOUND?e<o.length?e:-1:l:l-r>1?Go(r,l,t,o,n,i):i==$t.LEAST_UPPER_BOUND?l:r<0?-1:r}$t.search=function(e,t,o,n){if(t.length===0)return-1;var i=Go(-1,t.length,e,t,o,n||$t.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;i-1>=0&&o(t[i],t[i-1],!0)===0;)--i;return i}});var ji=Ge(Fi=>{"use strict";function zo(r,e,t){var o=r[e];r[e]=r[t],r[t]=o}function Gl(r,e){return Math.round(r+Math.random()*(e-r))}function Wo(r,e,t,o){if(t<o){var n=Gl(t,o),i=t-1;zo(r,n,o);for(var l=r[o],u=t;u<o;u++)e(r[u],l)<=0&&(i+=1,zo(r,i,u));zo(r,i+1,u);var a=i+1;Wo(r,e,t,a-1),Wo(r,e,a+1,o)}}Fi.quickSort=function(r,e){Wo(r,e,0,r.length-1)}});var Hi=Ge(Yr=>{"use strict";var w=er(),Ko=Ni(),tr=qo().ArraySet,zl=jo(),wr=ji().quickSort;function le(r,e){var t=r;return typeof r=="string"&&(t=w.parseSourceMapInput(r)),t.sections!=null?new ot(t,e):new Oe(t,e)}le.fromSourceMap=function(r,e){return Oe.fromSourceMap(r,e)};le.prototype._version=3;le.prototype.__generatedMappings=null;Object.defineProperty(le.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});le.prototype.__originalMappings=null;Object.defineProperty(le.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});le.prototype._charIsMappingSeparator=function(e,t){var o=e.charAt(t);return o===";"||o===","};le.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")};le.GENERATED_ORDER=1;le.ORIGINAL_ORDER=2;le.GREATEST_LOWER_BOUND=1;le.LEAST_UPPER_BOUND=2;le.prototype.eachMapping=function(e,t,o){var n=t||null,i=o||le.GENERATED_ORDER,l;switch(i){case le.GENERATED_ORDER:l=this._generatedMappings;break;case le.ORIGINAL_ORDER:l=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var u=this.sourceRoot;l.map(function(a){var s=a.source===null?null:this._sources.at(a.source);return s=w.computeSourceURL(u,s,this._sourceMapURL),{source:s,generatedLine:a.generatedLine,generatedColumn:a.generatedColumn,originalLine:a.originalLine,originalColumn:a.originalColumn,name:a.name===null?null:this._names.at(a.name)}},this).forEach(e,n)};le.prototype.allGeneratedPositionsFor=function(e){var t=w.getArg(e,"line"),o={source:w.getArg(e,"source"),originalLine:t,originalColumn:w.getArg(e,"column",0)};if(o.source=this._findSourceIndex(o.source),o.source<0)return[];var n=[],i=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",w.compareByOriginalPositions,Ko.LEAST_UPPER_BOUND);if(i>=0){var l=this._originalMappings[i];if(e.column===void 0)for(var u=l.originalLine;l&&l.originalLine===u;)n.push({line:w.getArg(l,"generatedLine",null),column:w.getArg(l,"generatedColumn",null),lastColumn:w.getArg(l,"lastGeneratedColumn",null)}),l=this._originalMappings[++i];else for(var a=l.originalColumn;l&&l.originalLine===t&&l.originalColumn==a;)n.push({line:w.getArg(l,"generatedLine",null),column:w.getArg(l,"generatedColumn",null),lastColumn:w.getArg(l,"lastGeneratedColumn",null)}),l=this._originalMappings[++i]}return n};Yr.SourceMapConsumer=le;function Oe(r,e){var t=r;typeof r=="string"&&(t=w.parseSourceMapInput(r));var o=w.getArg(t,"version"),n=w.getArg(t,"sources"),i=w.getArg(t,"names",[]),l=w.getArg(t,"sourceRoot",null),u=w.getArg(t,"sourcesContent",null),a=w.getArg(t,"mappings"),s=w.getArg(t,"file",null);if(o!=this._version)throw new Error("Unsupported version: "+o);l&&(l=w.normalize(l)),n=n.map(String).map(w.normalize).map(function(c){return l&&w.isAbsolute(l)&&w.isAbsolute(c)?w.relative(l,c):c}),this._names=tr.fromArray(i.map(String),!0),this._sources=tr.fromArray(n,!0),this._absoluteSources=this._sources.toArray().map(function(c){return w.computeSourceURL(l,c,e)}),this.sourceRoot=l,this.sourcesContent=u,this._mappings=a,this._sourceMapURL=e,this.file=s}Oe.prototype=Object.create(le.prototype);Oe.prototype.consumer=le;Oe.prototype._findSourceIndex=function(r){var e=r;if(this.sourceRoot!=null&&(e=w.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var t;for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==r)return t;return-1};Oe.fromSourceMap=function(e,t){var o=Object.create(Oe.prototype),n=o._names=tr.fromArray(e._names.toArray(),!0),i=o._sources=tr.fromArray(e._sources.toArray(),!0);o.sourceRoot=e._sourceRoot,o.sourcesContent=e._generateSourcesContent(o._sources.toArray(),o.sourceRoot),o.file=e._file,o._sourceMapURL=t,o._absoluteSources=o._sources.toArray().map(function(p){return w.computeSourceURL(o.sourceRoot,p,t)});for(var l=e._mappings.toArray().slice(),u=o.__generatedMappings=[],a=o.__originalMappings=[],s=0,c=l.length;s<c;s++){var g=l[s],f=new $i;f.generatedLine=g.generatedLine,f.generatedColumn=g.generatedColumn,g.source&&(f.source=i.indexOf(g.source),f.originalLine=g.originalLine,f.originalColumn=g.originalColumn,g.name&&(f.name=n.indexOf(g.name)),a.push(f)),u.push(f)}return wr(o.__originalMappings,w.compareByOriginalPositions),o};Oe.prototype._version=3;Object.defineProperty(Oe.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function $i(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}Oe.prototype._parseMappings=function(e,t){for(var o=1,n=0,i=0,l=0,u=0,a=0,s=e.length,c=0,g={},f={},p=[],m=[],h,y,C,P,O;c<s;)if(e.charAt(c)===";")o++,c++,n=0;else if(e.charAt(c)===",")c++;else{for(h=new $i,h.generatedLine=o,P=c;P<s&&!this._charIsMappingSeparator(e,P);P++);if(y=e.slice(c,P),C=g[y],C)c+=y.length;else{for(C=[];c<P;)zl.decode(e,c,f),O=f.value,c=f.rest,C.push(O);if(C.length===2)throw new Error("Found a source, but no line and column");if(C.length===3)throw new Error("Found a source and line, but no column");g[y]=C}h.generatedColumn=n+C[0],n=h.generatedColumn,C.length>1&&(h.source=u+C[1],u+=C[1],h.originalLine=i+C[2],i=h.originalLine,h.originalLine+=1,h.originalColumn=l+C[3],l=h.originalColumn,C.length>4&&(h.name=a+C[4],a+=C[4])),m.push(h),typeof h.originalLine=="number"&&p.push(h)}wr(m,w.compareByGeneratedPositionsDeflated),this.__generatedMappings=m,wr(p,w.compareByOriginalPositions),this.__originalMappings=p};Oe.prototype._findMapping=function(e,t,o,n,i,l){if(e[o]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[o]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return Ko.search(e,t,i,l)};Oe.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var o=this._generatedMappings[e+1];if(t.generatedLine===o.generatedLine){t.lastGeneratedColumn=o.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}};Oe.prototype.originalPositionFor=function(e){var t={generatedLine:w.getArg(e,"line"),generatedColumn:w.getArg(e,"column")},o=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",w.compareByGeneratedPositionsDeflated,w.getArg(e,"bias",le.GREATEST_LOWER_BOUND));if(o>=0){var n=this._generatedMappings[o];if(n.generatedLine===t.generatedLine){var i=w.getArg(n,"source",null);i!==null&&(i=this._sources.at(i),i=w.computeSourceURL(this.sourceRoot,i,this._sourceMapURL));var l=w.getArg(n,"name",null);return l!==null&&(l=this._names.at(l)),{source:i,line:w.getArg(n,"originalLine",null),column:w.getArg(n,"originalColumn",null),name:l}}}return{source:null,line:null,column:null,name:null}};Oe.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};Oe.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;var o=this._findSourceIndex(e);if(o>=0)return this.sourcesContent[o];var n=e;this.sourceRoot!=null&&(n=w.relative(this.sourceRoot,n));var i;if(this.sourceRoot!=null&&(i=w.urlParse(this.sourceRoot))){var l=n.replace(/^file:\/\//,"");if(i.scheme=="file"&&this._sources.has(l))return this.sourcesContent[this._sources.indexOf(l)];if((!i.path||i.path=="/")&&this._sources.has("/"+n))return this.sourcesContent[this._sources.indexOf("/"+n)]}if(t)return null;throw new Error('"'+n+'" is not in the SourceMap.')};Oe.prototype.generatedPositionFor=function(e){var t=w.getArg(e,"source");if(t=this._findSourceIndex(t),t<0)return{line:null,column:null,lastColumn:null};var o={source:t,originalLine:w.getArg(e,"line"),originalColumn:w.getArg(e,"column")},n=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",w.compareByOriginalPositions,w.getArg(e,"bias",le.GREATEST_LOWER_BOUND));if(n>=0){var i=this._originalMappings[n];if(i.source===o.source)return{line:w.getArg(i,"generatedLine",null),column:w.getArg(i,"generatedColumn",null),lastColumn:w.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};Yr.BasicSourceMapConsumer=Oe;function ot(r,e){var t=r;typeof r=="string"&&(t=w.parseSourceMapInput(r));var o=w.getArg(t,"version"),n=w.getArg(t,"sections");if(o!=this._version)throw new Error("Unsupported version: "+o);this._sources=new tr,this._names=new tr;var i={line:-1,column:0};this._sections=n.map(function(l){if(l.url)throw new Error("Support for url field in sections not implemented.");var u=w.getArg(l,"offset"),a=w.getArg(u,"line"),s=w.getArg(u,"column");if(a<i.line||a===i.line&&s<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=u,{generatedOffset:{generatedLine:a+1,generatedColumn:s+1},consumer:new le(w.getArg(l,"map"),e)}})}ot.prototype=Object.create(le.prototype);ot.prototype.constructor=le;ot.prototype._version=3;Object.defineProperty(ot.prototype,"sources",{get:function(){for(var r=[],e=0;e<this._sections.length;e++)for(var t=0;t<this._sections[e].consumer.sources.length;t++)r.push(this._sections[e].consumer.sources[t]);return r}});ot.prototype.originalPositionFor=function(e){var t={generatedLine:w.getArg(e,"line"),generatedColumn:w.getArg(e,"column")},o=Ko.search(t,this._sections,function(i,l){var u=i.generatedLine-l.generatedOffset.generatedLine;return u||i.generatedColumn-l.generatedOffset.generatedColumn}),n=this._sections[o];return n?n.consumer.originalPositionFor({line:t.generatedLine-(n.generatedOffset.generatedLine-1),column:t.generatedColumn-(n.generatedOffset.generatedLine===t.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};ot.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};ot.prototype.sourceContentFor=function(e,t){for(var o=0;o<this._sections.length;o++){var n=this._sections[o],i=n.consumer.sourceContentFor(e,!0);if(i)return i}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')};ot.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var o=this._sections[t];if(o.consumer._findSourceIndex(w.getArg(e,"source"))!==-1){var n=o.consumer.generatedPositionFor(e);if(n){var i={line:n.line+(o.generatedOffset.generatedLine-1),column:n.column+(o.generatedOffset.generatedLine===n.line?o.generatedOffset.generatedColumn-1:0)};return i}}}return{line:null,column:null}};ot.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var o=0;o<this._sections.length;o++)for(var n=this._sections[o],i=n.consumer._generatedMappings,l=0;l<i.length;l++){var u=i[l],a=n.consumer._sources.at(u.source);a=w.computeSourceURL(n.consumer.sourceRoot,a,this._sourceMapURL),this._sources.add(a),a=this._sources.indexOf(a);var s=null;u.name&&(s=n.consumer._names.at(u.name),this._names.add(s),s=this._names.indexOf(s));var c={source:a,generatedLine:u.generatedLine+(n.generatedOffset.generatedLine-1),generatedColumn:u.generatedColumn+(n.generatedOffset.generatedLine===u.generatedLine?n.generatedOffset.generatedColumn-1:0),originalLine:u.originalLine,originalColumn:u.originalColumn,name:s};this.__generatedMappings.push(c),typeof c.originalLine=="number"&&this.__originalMappings.push(c)}wr(this.__generatedMappings,w.compareByGeneratedPositionsDeflated),wr(this.__originalMappings,w.compareByOriginalPositions)};Yr.IndexedSourceMapConsumer=ot});var qi=Ge(Ui=>{"use strict";var Wl=Vo().SourceMapGenerator,Qr=er(),Kl=/(\r?\n)/,Yl=10,rr="$$$isSourceNode$$$";function We(r,e,t,o,n){this.children=[],this.sourceContents={},this.line=r??null,this.column=e??null,this.source=t??null,this.name=n??null,this[rr]=!0,o!=null&&this.add(o)}We.fromStringWithSourceMap=function(e,t,o){var n=new We,i=e.split(Kl),l=0,u=function(){var f=m(),p=m()||"";return f+p;function m(){return l<i.length?i[l++]:void 0}},a=1,s=0,c=null;return t.eachMapping(function(f){if(c!==null)if(a<f.generatedLine)g(c,u()),a++,s=0;else{var p=i[l]||"",m=p.substr(0,f.generatedColumn-s);i[l]=p.substr(f.generatedColumn-s),s=f.generatedColumn,g(c,m),c=f;return}for(;a<f.generatedLine;)n.add(u()),a++;if(s<f.generatedColumn){var p=i[l]||"";n.add(p.substr(0,f.generatedColumn)),i[l]=p.substr(f.generatedColumn),s=f.generatedColumn}c=f},this),l<i.length&&(c&&g(c,u()),n.add(i.splice(l).join(""))),t.sources.forEach(function(f){var p=t.sourceContentFor(f);p!=null&&(o!=null&&(f=Qr.join(o,f)),n.setSourceContent(f,p))}),n;function g(f,p){if(f===null||f.source===void 0)n.add(p);else{var m=o?Qr.join(o,f.source):f.source;n.add(new We(f.originalLine,f.originalColumn,m,p,f.name))}}};We.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(t){this.add(t)},this);else if(e[rr]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};We.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else if(e[rr]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};We.prototype.walk=function(e){for(var t,o=0,n=this.children.length;o<n;o++)t=this.children[o],t[rr]?t.walk(e):t!==""&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})};We.prototype.join=function(e){var t,o,n=this.children.length;if(n>0){for(t=[],o=0;o<n-1;o++)t.push(this.children[o]),t.push(e);t.push(this.children[o]),this.children=t}return this};We.prototype.replaceRight=function(e,t){var o=this.children[this.children.length-1];return o[rr]?o.replaceRight(e,t):typeof o=="string"?this.children[this.children.length-1]=o.replace(e,t):this.children.push("".replace(e,t)),this};We.prototype.setSourceContent=function(e,t){this.sourceContents[Qr.toSetString(e)]=t};We.prototype.walkSourceContents=function(e){for(var t=0,o=this.children.length;t<o;t++)this.children[t][rr]&&this.children[t].walkSourceContents(e);for(var n=Object.keys(this.sourceContents),t=0,o=n.length;t<o;t++)e(Qr.fromSetString(n[t]),this.sourceContents[n[t]])};We.prototype.toString=function(){var e="";return this.walk(function(t){e+=t}),e};We.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},o=new Wl(e),n=!1,i=null,l=null,u=null,a=null;return this.walk(function(s,c){t.code+=s,c.source!==null&&c.line!==null&&c.column!==null?((i!==c.source||l!==c.line||u!==c.column||a!==c.name)&&o.addMapping({source:c.source,original:{line:c.line,column:c.column},generated:{line:t.line,column:t.column},name:c.name}),i=c.source,l=c.line,u=c.column,a=c.name,n=!0):n&&(o.addMapping({generated:{line:t.line,column:t.column}}),i=null,n=!1);for(var g=0,f=s.length;g<f;g++)s.charCodeAt(g)===Yl?(t.line++,t.column=0,g+1===f?(i=null,n=!1):n&&o.addMapping({source:c.source,original:{line:c.line,column:c.column},generated:{line:t.line,column:t.column},name:c.name})):t.column++}),this.walkSourceContents(function(s,c){o.setSourceContent(s,c)}),{code:t.code,map:o}};Ui.SourceNode=We});var Vi=Ge(Jr=>{"use strict";Jr.SourceMapGenerator=Vo().SourceMapGenerator;Jr.SourceMapConsumer=Hi().SourceMapConsumer;Jr.SourceNode=qi().SourceNode});var zi=Ge((ub,Gi)=>{"use strict";var Ql=Object.prototype.toString,Yo=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function Jl(r){return Ql.call(r).slice(8,-1)==="ArrayBuffer"}function Xl(r,e,t){e>>>=0;var o=r.byteLength-e;if(o<0)throw new RangeError("'offset' is out of bounds");if(t===void 0)t=o;else if(t>>>=0,t>o)throw new RangeError("'length' is out of bounds");return Yo?Buffer.from(r.slice(e,e+t)):new Buffer(new Uint8Array(r.slice(e,e+t)))}function Zl(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return Yo?Buffer.from(r,e):new Buffer(r,e)}function ec(r,e,t){if(typeof r=="number")throw new TypeError('"value" argument must not be a number');return Jl(r)?Xl(r,e,t):typeof r=="string"?Zl(r,e):Yo?Buffer.from(r):new Buffer(r)}Gi.exports=ec});var es=Ge((Ut,Zo)=>{"use strict";var tc=Vi().SourceMapConsumer,Qo=nn("path"),mt;try{mt=nn("fs"),(!mt.existsSync||!mt.readFileSync)&&(mt=null)}catch{}var rc=zi();function Wi(r,e){return r.require(e)}var Ki=!1,Yi=!1,Jo=!1,Er="auto",Ht={},Rr={},oc=/^data:application\/json[^,]+base64,/,kt=[],At=[];function en(){return Er==="browser"?!0:Er==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}function nc(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}function ic(){return typeof process=="object"&&process!==null?process.version:""}function sc(){if(typeof process=="object"&&process!==null)return process.stderr}function ac(r){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(r)}function Xr(r){return function(e){for(var t=0;t<r.length;t++){var o=r[t](e);if(o)return o}return null}}var tn=Xr(kt);kt.push(function(r){if(r=r.trim(),/^file:/.test(r)&&(r=r.replace(/file:\/\/\/(\w:)?/,function(o,n){return n?"":"/"})),r in Ht)return Ht[r];var e="";try{if(mt)mt.existsSync(r)&&(e=mt.readFileSync(r,"utf8"));else{var t=new XMLHttpRequest;t.open("GET",r,!1),t.send(null),t.readyState===4&&t.status===200&&(e=t.responseText)}}catch{}return Ht[r]=e});function Xo(r,e){if(!r)return e;var t=Qo.dirname(r),o=/^\w+:\/\/[^\/]*/.exec(t),n=o?o[0]:"",i=t.slice(n.length);return n&&/^\/\w\:/.test(i)?(n+="/",n+Qo.resolve(t.slice(n.length),e).replace(/\\/g,"/")):n+Qo.resolve(t.slice(n.length),e)}function lc(r){var e;if(en())try{var t=new XMLHttpRequest;t.open("GET",r,!1),t.send(null),e=t.readyState===4?t.responseText:null;var o=t.getResponseHeader("SourceMap")||t.getResponseHeader("X-SourceMap");if(o)return o}catch{}e=tn(r);for(var n=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,i,l;l=n.exec(e);)i=l;return i?i[1]:null}var rn=Xr(At);At.push(function(r){var e=lc(r);if(!e)return null;var t;if(oc.test(e)){var o=e.slice(e.indexOf(",")+1);t=rc(o,"base64").toString(),e=r}else e=Xo(r,e),t=tn(e);return t?{url:e,map:t}:null});function on(r){var e=Rr[r.source];if(!e){var t=rn(r.source);t?(e=Rr[r.source]={url:t.url,map:new tc(t.map)},e.map.sourcesContent&&e.map.sources.forEach(function(n,i){var l=e.map.sourcesContent[i];if(l){var u=Xo(e.url,n);Ht[u]=l}})):e=Rr[r.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var o=e.map.originalPositionFor(r);if(o.source!==null)return o.source=Xo(e.url,o.source),o}return r}function Ji(r){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(r);if(e){var t=on({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+t.source+":"+t.line+":"+(t.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(r),e?"eval at "+e[1]+" ("+Ji(e[2])+")":r}function cc(){var r,e="";if(this.isNative())e="native";else{r=this.getScriptNameOrSourceURL(),!r&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),r?e+=r:e+="<anonymous>";var t=this.getLineNumber();if(t!=null){e+=":"+t;var o=this.getColumnNumber();o&&(e+=":"+o)}}var n="",i=this.getFunctionName(),l=!0,u=this.isConstructor(),a=!(this.isToplevel()||u);if(a){var s=this.getTypeName();s==="[object Object]"&&(s="null");var c=this.getMethodName();i?(s&&i.indexOf(s)!=0&&(n+=s+"."),n+=i,c&&i.indexOf("."+c)!=i.length-c.length-1&&(n+=" [as "+c+"]")):n+=s+"."+(c||"<anonymous>")}else u?n+="new "+(i||"<anonymous>"):i?n+=i:(n+=e,l=!1);return l&&(n+=" ("+e+")"),n}function Qi(r){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(function(t){e[t]=/^(?:is|get)/.test(t)?function(){return r[t].call(r)}:r[t]}),e.toString=cc,e}function Xi(r,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),r.isNative())return e.curPosition=null,r;var t=r.getFileName()||r.getScriptNameOrSourceURL();if(t){var o=r.getLineNumber(),n=r.getColumnNumber()-1,i=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,l=i.test(ic())?0:62;o===1&&n>l&&!en()&&!r.isEval()&&(n-=l);var u=on({source:t,line:o,column:n});e.curPosition=u,r=Qi(r);var a=r.getFunctionName;return r.getFunctionName=function(){return e.nextPosition==null?a():e.nextPosition.name||a()},r.getFileName=function(){return u.source},r.getLineNumber=function(){return u.line},r.getColumnNumber=function(){return u.column+1},r.getScriptNameOrSourceURL=function(){return u.source},r}var s=r.isEval()&&r.getEvalOrigin();return s&&(s=Ji(s),r=Qi(r),r.getEvalOrigin=function(){return s}),r}function uc(r,e){Jo&&(Ht={},Rr={});for(var t=r.name||"Error",o=r.message||"",n=t+": "+o,i={nextPosition:null,curPosition:null},l=[],u=e.length-1;u>=0;u--)l.push(`
    at `+Xi(e[u],i)),i.nextPosition=i.curPosition;return i.curPosition=i.nextPosition=null,n+l.reverse().join("")}function Zi(r){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(r.stack);if(e){var t=e[1],o=+e[2],n=+e[3],i=Ht[t];if(!i&&mt&&mt.existsSync(t))try{i=mt.readFileSync(t,"utf8")}catch{i=""}if(i){var l=i.split(/(?:\r\n|\r|\n)/)[o-1];if(l)return t+":"+o+`
`+l+`
`+new Array(n).join(" ")+"^"}}return null}function dc(r){var e=Zi(r),t=sc();t&&t._handle&&t._handle.setBlocking&&t._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(r.stack),ac(1)}function fc(){var r=process.emit;process.emit=function(e){if(e==="uncaughtException"){var t=arguments[1]&&arguments[1].stack,o=this.listeners(e).length>0;if(t&&!o)return dc(arguments[1])}return r.apply(this,arguments)}}var pc=kt.slice(0),gc=At.slice(0);Ut.wrapCallSite=Xi;Ut.getErrorSource=Zi;Ut.mapSourcePosition=on;Ut.retrieveSourceMap=rn;Ut.install=function(r){if(r=r||{},r.environment&&(Er=r.environment,["node","browser","auto"].indexOf(Er)===-1))throw new Error("environment "+Er+" was unknown. Available options are {auto, browser, node}");if(r.retrieveFile&&(r.overrideRetrieveFile&&(kt.length=0),kt.unshift(r.retrieveFile)),r.retrieveSourceMap&&(r.overrideRetrieveSourceMap&&(At.length=0),At.unshift(r.retrieveSourceMap)),r.hookRequire&&!en()){var e=Wi(Zo,"module"),t=e.prototype._compile;t.__sourceMapSupport||(e.prototype._compile=function(i,l){return Ht[l]=i,Rr[l]=void 0,t.call(this,i,l)},e.prototype._compile.__sourceMapSupport=!0)}if(Jo||(Jo="emptyCacheBetweenOperations"in r?r.emptyCacheBetweenOperations:!1),Ki||(Ki=!0,Error.prepareStackTrace=uc),!Yi){var o="handleUncaughtExceptions"in r?r.handleUncaughtExceptions:!0;try{var n=Wi(Zo,"worker_threads");n.isMainThread===!1&&(o=!1)}catch{}o&&nc()&&(Yi=!0,fc())}};Ut.resetRetrieveHandlers=function(){kt.length=0,At.length=0,kt=pc.slice(0),At=gc.slice(0),rn=Xr(At),tn=Xr(kt)}});import{run as mc}from"@oclif/core";import{execa as Ec}from"execa";import kc from"chalk";import or from"chalk";import Ke from"fs";import sn from"path";import cs from"os";var Pr=(i=>(i.DEBUG="DEBUG",i.INFO="INFO",i.WARN="WARN",i.ERROR="ERROR",i.FATAL="FATAL",i))(Pr||{}),us={logLevel:"INFO",consoleOutput:!0,fileOutput:!0,logFilePath:sn.join(cs.homedir(),".sf-tui","logs","sf-tui.log"),maxLogFileSize:5*1024*1024,maxLogFiles:5},eo=class r{constructor(){this.config=us;this.ensureLogDirectory()}static getInstance(){return r.instance||(r.instance=new r),r.instance}configure(e){this.config={...this.config,...e},this.ensureLogDirectory()}ensureLogDirectory(){if(this.config.fileOutput){let e=sn.dirname(this.config.logFilePath);try{Ke.existsSync(e)||Ke.mkdirSync(e,{recursive:!0})}catch(t){console.error(`Failed to create log directory: ${t}`),this.config.fileOutput=!1}}}checkLogRotation(){if(this.config.fileOutput)try{Ke.existsSync(this.config.logFilePath)&&Ke.statSync(this.config.logFilePath).size>=this.config.maxLogFileSize&&this.rotateLogFiles()}catch(e){console.error(`Failed to check log rotation: ${e}`)}}rotateLogFiles(){try{let e=`${this.config.logFilePath}.${this.config.maxLogFiles-1}`;Ke.existsSync(e)&&Ke.unlinkSync(e);for(let t=this.config.maxLogFiles-2;t>=0;t--){let o=t===0?this.config.logFilePath:`${this.config.logFilePath}.${t}`,n=`${this.config.logFilePath}.${t+1}`;Ke.existsSync(o)&&Ke.renameSync(o,n)}Ke.writeFileSync(this.config.logFilePath,"")}catch(e){console.error(`Failed to rotate log files: ${e}`)}}formatLogEntry(e){let t=`[${e.timestamp}] [${e.level}] ${e.message}`;return e.details&&(t+=`
Details: ${JSON.stringify(e.details,null,2)}`),e.stackTrace&&(t+=`
Stack Trace: ${e.stackTrace}`),t}writeToConsole(e){if(!this.config.consoleOutput)return;let t;switch(e.level){case"DEBUG":t=or.blue;break;case"INFO":t=or.white;break;case"WARN":t=or.yellow;break;case"ERROR":case"FATAL":t=or.red;break;default:t=or.white}console.log(t(this.formatLogEntry(e)))}writeToFile(e){if(this.config.fileOutput){this.checkLogRotation();try{let t=this.formatLogEntry(e)+`
`;Ke.appendFileSync(this.config.logFilePath,t)}catch(t){console.error(`Failed to write to log file: ${t}`)}}}createLogEntry(e,t,o,n){let i=new Date().toISOString(),l=n?.stack;return{timestamp:i,level:e,message:t,details:o,stackTrace:l}}log(e,t,o,n){let i=Object.values(Pr).indexOf(e),l=Object.values(Pr).indexOf(this.config.logLevel);if(i>=l){let u=this.createLogEntry(e,t,o,n);this.writeToConsole(u),this.writeToFile(u)}}debug(e,t){this.log("DEBUG",e,t)}info(e,t){this.log("INFO",e,t)}warn(e,t,o){this.log("WARN",e,t,o)}error(e,t,o){this.log("ERROR",e,t,o)}fatal(e,t,o){this.log("FATAL",e,t,o)}logError(e,t,o){let n=t||e.message;this.error(n,o,e)}getLogFilePath(){return this.config.logFilePath}clearLogs(){if(this.config.fileOutput&&Ke.existsSync(this.config.logFilePath))try{Ke.writeFileSync(this.config.logFilePath,"")}catch(e){console.error(`Failed to clear log file: ${e}`)}}},ge=eo.getInstance();var an=(r,e,t="\u2026")=>r.length<=e?r:r.slice(0,e-t.length)+t;var kr=(r,e)=>{let t={...r};return to(r)&&to(e)&&Object.keys(e).forEach(o=>{to(e[o])?o in r?t[o]=kr(r[o],e[o]):Object.assign(t,{[o]:e[o]}):Object.assign(t,{[o]:e[o]})}),t},to=r=>r!==null&&typeof r=="object"&&!Array.isArray(r);var nr=(a=>(a.UI="UI",a.NETWORK="NETWORK",a.FILESYSTEM="FILESYSTEM",a.COMMAND="COMMAND",a.AUTH="AUTH",a.PLUGIN="PLUGIN",a.VALIDATION="VALIDATION",a.UNKNOWN="UNKNOWN",a))(nr||{}),ro=class r{constructor(){this.errors=new Map;this.subscribers=[];this.generateErrorId=()=>`error-${Date.now()}-${Math.floor(Math.random()*1e4)}`}static getInstance(){return r.instance||(r.instance=new r),r.instance}subscribe(e){return this.subscribers.push(e),()=>{this.subscribers=this.subscribers.filter(t=>t!==e)}}notifySubscribers(e){for(let t of this.subscribers)try{t(e)}catch(o){ge.error("Error in error subscriber",{subscriberError:o})}}severityToLogLevel(e){switch(e){case"LOW":return"INFO";case"MEDIUM":return"WARN";case"HIGH":case"CRITICAL":return"ERROR";default:return"ERROR"}}reportError(e,t){let o,n="MEDIUM",i="UNKNOWN",l,u,a;t instanceof Error?o=t:t&&(o=t.error,n=t.severity||n,i=t.category||i,l=t.context,u=t.details,a=t.userAction);let s={id:this.generateErrorId(),timestamp:new Date,message:e,error:o,severity:n,category:i,context:l,details:u,userAction:a,handled:!1};this.errors.set(s.id,s);let c=this.severityToLogLevel(n),g=l?`[${l}] ${e}`:e,f={...u,errorId:s.id,category:i,severity:n};return ge.log(c,g,f,o),this.notifySubscribers(s),s}markAsHandled(e){let t=this.errors.get(e);t&&(t.handled=!0,this.errors.set(e,t))}getAllErrors(){return Array.from(this.errors.values())}getError(e){return this.errors.get(e)}clearErrors(){this.errors.clear()}submitFeedback(e){ge.info(`User feedback received for error ${e.errorId}`,{feedback:e})}reportCommandError(e,t,o){return this.reportError(e,{error:t,severity:"MEDIUM",category:"COMMAND",details:o,userAction:"Try running the command again or check the command arguments."})}reportNetworkError(e,t,o){return this.reportError(e,{error:t,severity:"MEDIUM",category:"NETWORK",details:o,userAction:"Check your internet connection and try again."})}reportAuthError(e,t,o){return this.reportError(e,{error:t,severity:"HIGH",category:"AUTH",details:o,userAction:"Try logging in again using sf org login web."})}reportValidationError(e,t,o){return this.reportError(e,{error:t,severity:"LOW",category:"VALIDATION",details:o,userAction:"Check your input values and try again."})}},me=ro.getInstance();function ln(){process.on("uncaughtException",r=>{me.reportError("Uncaught exception",{error:r,severity:"CRITICAL",category:"UNKNOWN",userAction:"Please report this issue to the developers."}),ge.fatal("Uncaught exception",{error:r}),process.exit(1)}),process.on("unhandledRejection",(r,e)=>{let t=r instanceof Error?r:new Error(String(r));me.reportError("Unhandled promise rejection",{error:t,severity:"HIGH",category:"UNKNOWN",userAction:"Please report this issue to the developers."}),ge.error("Unhandled promise rejection",{error:t})})}import De from"fs";import ht from"path";import ds from"os";import fs from"crypto";var ps={ttl:5*60*1e3,maxSize:10*1024*1024,enabled:!0,cacheDir:ht.join(ds.homedir(),".sf-tui","cache")},ir=class{constructor(e={}){this.memoryCache=new Map;this.stats={hits:0,misses:0,size:0,entries:0};this.options={...ps,...e},this.ensureCacheDirectory()}generateKey(e,t){let o=JSON.stringify({command:e,args:t});return fs.createHash("md5").update(o).digest("hex")}get(e){if(!this.options.enabled)return null;let t=this.memoryCache.get(e);if(t&&this.isValid(t))return this.stats.hits++,t.value;try{let o=ht.join(this.options.cacheDir,`${e}.json`);if(De.existsSync(o)){let n=De.readFileSync(o,"utf8"),i=JSON.parse(n);if(this.isValid(i))return this.memoryCache.set(e,i),this.stats.hits++,i.value;De.unlinkSync(o)}}catch(o){ge.error("Cache read error:",o)}return this.stats.misses++,null}set(e,t){if(this.options.enabled)try{let o=JSON.stringify(t),n=Buffer.byteLength(o);if(n>this.options.maxSize*.1){ge.debug(`Cache item too large: ${n} bytes`);return}let i={key:e,value:t,timestamp:Date.now(),size:n};this.memoryCache.set(e,i);let l=ht.join(this.options.cacheDir,`${e}.json`);De.writeFileSync(l,JSON.stringify(i),"utf8"),this.stats.size+=n,this.stats.entries++,this.maybePruneCache()}catch(o){ge.error("Cache write error:",o)}}has(e){if(!this.options.enabled)return!1;if(this.memoryCache.has(e)){let o=this.memoryCache.get(e);return this.isValid(o)}let t=ht.join(this.options.cacheDir,`${e}.json`);return De.existsSync(t)}delete(e){if(this.options.enabled){if(this.memoryCache.has(e)){let t=this.memoryCache.get(e);this.stats.size-=t.size,this.stats.entries--,this.memoryCache.delete(e)}try{let t=ht.join(this.options.cacheDir,`${e}.json`);De.existsSync(t)&&De.unlinkSync(t)}catch(t){ge.error("Cache delete error:",t)}}}clear(){if(this.options.enabled){this.memoryCache.clear();try{let e=De.readdirSync(this.options.cacheDir);for(let t of e)t.endsWith(".json")&&De.unlinkSync(ht.join(this.options.cacheDir,t));this.stats={hits:0,misses:0,size:0,entries:0}}catch(e){ge.error("Cache clear error:",e)}}}invalidate(e){if(this.options.enabled){for(let[t,o]of this.memoryCache.entries())t.startsWith(e)&&(this.stats.size-=o.size,this.stats.entries--,this.memoryCache.delete(t));try{let t=De.readdirSync(this.options.cacheDir);for(let o of t)o.startsWith(e)&&o.endsWith(".json")&&De.unlinkSync(ht.join(this.options.cacheDir,o))}catch(t){ge.error("Cache invalidation error:",t)}}}getStats(){return{...this.stats}}isValid(e){return Date.now()-e.timestamp<this.options.ttl}ensureCacheDirectory(){try{De.existsSync(this.options.cacheDir)||De.mkdirSync(this.options.cacheDir,{recursive:!0})}catch(e){ge.error("Failed to create cache directory:",e)}}maybePruneCache(){if(!(this.stats.size<=this.options.maxSize))try{let e=De.readdirSync(this.options.cacheDir).filter(o=>o.endsWith(".json")).map(o=>{let n=ht.join(this.options.cacheDir,o),i=De.statSync(n);return{path:n,size:i.size,mtime:i.mtime.getTime()}}).sort((o,n)=>o.mtime-n.mtime),t=0;for(let o of e){De.unlinkSync(o.path),t+=o.size;let n=ht.basename(o.path,".json");if(this.memoryCache.has(n)&&this.memoryCache.delete(n),this.stats.size-t<=this.options.maxSize*.8)break}this.stats.size-=t}catch(e){ge.error("Cache pruning error:",e)}}},oo=new ir;import Gt from"fs";import Ar from"path";import gs from"os";import{fileURLToPath as ms}from"url";var hs=ms(import.meta.url),Gc=Ar.dirname(hs),Vt={theme:"salesforce",editor:process.env.EDITOR||"code",defaultOrg:void 0,apiVersion:"58.0",plugins:[],telemetry:!0,keyboardShortcuts:{},cache:{enabled:!0,ttl:5*60*1e3,maxSize:10*1024*1024,commandCache:{enabled:!0,exclude:["org:create","org:delete","auth","deploy","retrieve","push","pull","data:import","data:export","apex:execute"]}},experimental:{features:[]}},sr=Ar.join(gs.homedir(),".sftui"),ar=Ar.join(sr,"config.json"),io=()=>{Gt.existsSync(sr)||Gt.mkdirSync(sr,{recursive:!0})},so=()=>{try{if(io(),Gt.existsSync(ar)){let r=Gt.readFileSync(ar,"utf8");return kr({...Vt},JSON.parse(r))}return Mr(Vt),{...Vt}}catch(r){return console.error("Error loading configuration:",r),{...Vt}}},Mr=r=>{try{io();let e=so(),t=kr(e,r);Gt.writeFileSync(ar,JSON.stringify(t,null,2),"utf8")}catch(e){console.error("Error saving configuration:",e)}},ao=r=>{let e=so();return r?e[r]:e},xs=(r,e)=>{let o={...so(),[r]:e};Mr(o)},ys=()=>{Mr(Vt)},bs=()=>{let r=ao("cache");return{enabled:r.enabled,ttl:r.ttl,maxSize:r.maxSize,cacheDir:Ar.join(sr,"cache")}},Ts=r=>{let e=r||ao("theme");return(J(),ls(fn)).getTheme(e)},st={get:ao,set:xs,reset:ys,getTheme:Ts,getCacheOptions:bs,get path(){return ar},get dir(){return sr}};io();Gt.existsSync(ar)||Mr(Vt);function vs(){let r=st.getCacheOptions();Object.assign(oo,new ir(r)),ge.debug("Cache initialized with options:",r)}vs();import{execa as Xc}from"execa";import hc from"react";import{render as xc}from"ink";import{useState as El}from"react";import{Box as yi,useApp as Rl}from"ink";J();import{createContext as Ss,useContext as Cs,useState as Bs}from"react";import{jsx as ws}from"react/jsx-runtime";var pn={themeName:"base",theme:Ct("base"),selectedOrg:void 0,devhubOrg:void 0,showStatusBar:!0,showHelp:!1},gn=Ss({state:pn,setTheme:()=>{},setSelectedOrg:()=>{},setDevhubOrg:()=>{},toggleStatusBar:()=>{},toggleHelp:()=>{}}),mn=({children:r})=>{let[e,t]=Bs(pn),a={state:e,setTheme:s=>{t(c=>({...c,themeName:s,theme:Ct(s)}))},setSelectedOrg:s=>{t(c=>({...c,selectedOrg:s}))},setDevhubOrg:s=>{t(c=>({...c,devhubOrg:s}))},toggleStatusBar:()=>{t(s=>({...s,showStatusBar:!s.showStatusBar}))},toggleHelp:()=>{t(s=>({...s,showHelp:!s.showHelp}))}};return ws(gn.Provider,{value:a,children:r})},Or=()=>{let r=Cs(gn);if(!r)throw new Error("useAppContext must be used within an AppProvider");return r};J();import{createContext as Es,useContext as Rs,useState as hn,useEffect as Ps}from"react";import{useInput as ks}from"ink";import{jsx as As}from"react/jsx-runtime";var xn={help:{key:"?",description:"Show help",action:"help",global:!0},quit:{key:"q",ctrl:!0,description:"Quit application",action:"quit",global:!0},back:{key:"escape",description:"Go back",action:"back",global:!0},toggleStatusBar:{key:"s",ctrl:!0,description:"Toggle status bar",action:"toggleStatusBar",global:!0},toggleTheme:{key:"t",ctrl:!0,description:"Cycle themes",action:"toggleTheme",global:!0}},yn=Es({shortcuts:xn,activeShortcuts:[],registerShortcut:()=>{},unregisterShortcut:()=>{},setContextShortcuts:()=>{},executeAction:()=>{}}),bn=({children:r,actionHandlers:e})=>{let t=st.get("keyboardShortcuts")||{},o={...xn};Object.entries(t).forEach(([p,m])=>{o[p]&&(o[p]={...o[p],...m,action:o[p].action,description:o[p].description})});let[n,i]=hn(o),[l,u]=hn([]),a=[...Object.values(n).filter(p=>p.global),...l];Ps(()=>{let p=st.get("keyboardShortcuts")||{},m={...n};Object.entries(p).forEach(([h,y])=>{m[h]&&(m[h]={...m[h],...y,action:m[h].action,description:m[h].description})}),i(m)},[]);let s=(p,m)=>{i(h=>({...h,[p]:m}))},c=p=>{i(m=>{let h={...m};return delete h[p],h})},g=p=>{u(p)},f=p=>{let m=e[p];m&&m()};return ks((p,m)=>{for(let h of a){let y=h.key===p||h.key===m.name||h.key==="escape"&&m.escape,C=(h.ctrl===void 0||h.ctrl===m.ctrl)&&(h.alt===void 0||h.alt===m.alt)&&(h.shift===void 0||h.shift===m.shift);if(y&&C){f(h.action);return}}}),As(yn.Provider,{value:{shortcuts:n,activeShortcuts:a,registerShortcut:s,unregisterShortcut:c,setContextShortcuts:g,executeAction:f},children:r})},Dr=()=>{let r=Rs(yn);if(!r)throw new Error("useKeyboardShortcuts must be used within a KeyboardProvider");return r};J();import{createContext as Is,useContext as Ls,useState as Lr}from"react";import{Box as Ae,Text as Y}from"ink";import{useInput as _s}from"ink";J();import Ms from"react";import{Box as Tn,Text as at,useFocus as Os,useInput as Ds}from"ink";import{jsx as Bt,jsxs as Ir}from"react/jsx-runtime";var vn={single:["\u250C","\u2510","\u2514","\u2518","\u2500","\u2502","\u251C","\u2524"],double:["\u2554","\u2557","\u255A","\u255D","\u2550","\u2551","\u2560","\u2563"],round:["\u256D","\u256E","\u2570","\u256F","\u2500","\u2502","\u251C","\u2524"],"single-double":["\u2553","\u2556","\u2559","\u255C","\u2500","\u2551","\u255F","\u2562"],"double-single":["\u2552","\u2555","\u2558","\u255B","\u2550","\u2502","\u255E","\u2561"],classic:["+","+","+","+","-","|","+","+"],none:[" "," "," "," "," "," "," "," "]},lt=({title:r,titleAlign:e="left",borderStyle:t="single",borderColor:o,padding:n=1,margin:i=0,width:l,height:u,flexDirection:a="column",flexGrow:s,flexShrink:c,flexBasis:g,alignItems:f="stretch",justifyContent:p="flex-start",children:m,focusable:h=!1,onFocus:y,onBlur:C,onClick:P,style:O={}})=>{let v=I(),{isFocused:k}=Os({isActive:h,autoFocus:!1});Ds((pe,be)=>{h&&k&&(pe===" "||be.return)&&P&&P()},{isActive:h});let[M,j,te,T,R,K,q,G]=vn[t]||vn.single,ae=o||(k?v.colors.primary:v.colors.border),d=(()=>{if(typeof l=="number")return l-2;if(typeof l=="string")return l;let nt=Ms.Children.toArray(m).map(it=>typeof it=="string"?it:typeof it=="number"?String(it):"").join("").split(`
`).reduce((it,ts)=>Math.max(it,ts.length),0);return Math.max(30,nt+n*2)})(),x=()=>{if(!r)return null;let pe=` ${r} `,be=pe.length,nt=2,it=typeof d=="number"?d:30;return e==="center"?nt=Math.max(2,Math.floor((it-be)/2)):e==="right"&&(nt=Math.max(2,it-be-2)),Ir(at,{children:[R.repeat(nt),Bt(at,{bold:!0,color:k?v.colors.primary:v.colors.text,children:pe}),R.repeat(Math.max(0,it-nt-be))]})},S=typeof n=="number"?{left:n,right:n,top:n,bottom:n}:{left:0,right:0,top:0,bottom:0,...n},B=typeof i=="number"?{marginLeft:i,marginRight:i,marginTop:i,marginBottom:i}:{marginLeft:0,marginRight:0,marginTop:0,marginBottom:0,...i},re={borderStyle:"solid",borderColor:ae,borderLeft:k?`1 ${v.colors.primary}`:`1 ${v.colors.border}`,borderRight:k?`1 ${v.colors.primary}`:`1 ${v.colors.border}`,borderTop:k?`1 ${v.colors.primary}`:`1 ${v.colors.border}`,borderBottom:k?`1 ${v.colors.primary}`:`1 ${v.colors.border}`,...O};return Ir(Tn,{flexDirection:"column",width:l,height:u,flexGrow:s,flexShrink:c,flexBasis:g,...B,children:[Ir(at,{children:[Bt(at,{color:ae,children:M}),r?x():Bt(at,{color:ae,children:R.repeat(typeof d=="number"?d:30)}),Bt(at,{color:ae,children:j})]}),Bt(Tn,{flexDirection:a,alignItems:f,justifyContent:p,paddingLeft:S.left,paddingRight:S.right,paddingTop:S.top,paddingBottom:S.bottom,children:m}),Ir(at,{children:[Bt(at,{color:ae,children:te}),Bt(at,{color:ae,children:R.repeat(typeof d=="number"?d:30)}),Bt(at,{color:ae,children:T})]})]})};import{Fragment as Fs,jsx as L,jsxs as ct}from"react/jsx-runtime";var Sn=Is({showHelp:!1,toggleHelp:()=>{},currentTopic:null,setCurrentTopic:()=>{},topics:[],registerTopic:()=>{},unregisterTopic:()=>{},contextualHelp:[],setContextualHelp:()=>{}}),Ns=[{id:"navigation",title:"Navigation",content:ct(Ae,{flexDirection:"column",children:[L(Y,{children:"Navigate through the application using these keys:"}),L(Y,{children:"\u2022 Arrow keys: Move through menus and lists"}),L(Y,{children:"\u2022 Enter: Select an item or confirm an action"}),L(Y,{children:"\u2022 Esc: Go back to the previous screen"}),L(Y,{children:"\u2022 Ctrl+Q: Quit the application"})]}),keywords:["navigate","navigation","menu","arrow","keys","back"],relatedTopics:["shortcuts"]},{id:"shortcuts",title:"Keyboard Shortcuts",content:ct(Ae,{flexDirection:"column",children:[L(Y,{children:"Common keyboard shortcuts:"}),L(Y,{children:"\u2022 ?: Show help"}),L(Y,{children:"\u2022 Ctrl+Q: Quit application"}),L(Y,{children:"\u2022 Ctrl+S: Toggle status bar"}),L(Y,{children:"\u2022 Ctrl+T: Cycle through themes"}),L(Y,{children:"\u2022 Ctrl+R: Refresh current view"})]}),keywords:["keyboard","shortcuts","hotkeys","keys"],relatedTopics:["navigation"]},{id:"orgs",title:"Managing Salesforce Orgs",content:ct(Ae,{flexDirection:"column",children:[L(Y,{children:"Working with Salesforce orgs:"}),L(Y,{children:"\u2022 View a list of connected orgs in Org Manager"}),L(Y,{children:'\u2022 Set default org or DevHub with the "Set as Default" option'}),L(Y,{children:'\u2022 Open an org in browser with the "Open Org" option'}),L(Y,{children:'\u2022 Log out of an org with the "Delete Org" option'})]}),keywords:["org","orgs","salesforce","devhub","login","logout"]},{id:"metadata",title:"Working with Metadata",content:ct(Ae,{flexDirection:"column",children:[L(Y,{children:"Managing Salesforce metadata:"}),L(Y,{children:'\u2022 Deploy metadata to an org with the "Deploy" option'}),L(Y,{children:'\u2022 Retrieve metadata from an org with the "Retrieve" option'}),L(Y,{children:'\u2022 Compare metadata with the "Compare" option'})]}),keywords:["metadata","deploy","retrieve","compare"]},{id:"themes",title:"Themes",content:ct(Ae,{flexDirection:"column",children:[L(Y,{children:"Customizing the application appearance:"}),L(Y,{children:"\u2022 Select a theme in the Settings menu"}),L(Y,{children:"\u2022 Cycle through themes with Ctrl+T"}),L(Y,{children:"\u2022 Available themes: Base, Dark, High Contrast, Salesforce"})]}),keywords:["theme","themes","appearance","colors","dark","light"]}],Cn=({children:r})=>{let[e,t]=Lr(!1),[o,n]=Lr(null),[i,l]=Lr(Ns),[u,a]=Lr([]),s=()=>{t(m=>!m),e&&n(null)},c=m=>{l(h=>h.some(C=>C.id===m.id)?h.map(C=>C.id===m.id?m:C):[...h,m])},g=m=>{l(h=>h.filter(y=>y.id!==m))},f=m=>{let h=i.filter(y=>m.includes(y.id));a(h)};_s((m,h)=>{m==="?"?s():h.escape&&e&&(o?n(null):t(!1))});let p={showHelp:e,toggleHelp:s,currentTopic:o,setCurrentTopic:n,topics:i,registerTopic:c,unregisterTopic:g,contextualHelp:u,setContextualHelp:f};return L(Sn.Provider,{value:p,children:r})},lo=()=>{let r=Ls(Sn);if(!r)throw new Error("useHelp must be used within a HelpProvider");return r},Bn=()=>{let r=I(),{showHelp:e,toggleHelp:t,currentTopic:o,setCurrentTopic:n,topics:i,contextualHelp:l}=lo();if(!e)return null;let u=[...l,...i.filter(a=>!l.some(s=>s.id===a.id))];if(o){let a=i.find(s=>s.id===o);return a?L(lt,{title:a.title,borderStyle:"round",borderColor:r.colors.primary,padding:1,children:ct(Ae,{flexDirection:"column",children:[L(Ae,{marginBottom:1,children:a.content}),a.relatedTopics&&a.relatedTopics.length>0&&ct(Ae,{flexDirection:"column",marginTop:1,children:[L(Y,{bold:!0,children:"Related Topics:"}),L(Ae,{children:a.relatedTopics.map((s,c)=>{let g=i.find(f=>f.id===s);return g?ct(Ae,{marginRight:1,children:[L(Y,{color:r.colors.primary,underline:!0,onPress:()=>n(s),children:g.title}),c<a.relatedTopics.length-1&&L(Y,{children:", "})]},s):null})})]}),L(Ae,{marginTop:1,children:L(Y,{color:"gray",italic:!0,children:"Press ESC to go back"})})]})}):null}return L(lt,{title:"Help Topics",borderStyle:"round",borderColor:r.colors.primary,padding:1,children:ct(Ae,{flexDirection:"column",children:[l.length>0&&ct(Fs,{children:[L(Y,{bold:!0,children:"Contextual Help"}),L(Ae,{flexDirection:"column",marginY:1,children:l.map(a=>L(Ae,{marginBottom:.5,children:L(Y,{color:r.colors.primary,underline:!0,onPress:()=>n(a.id),children:a.title})},a.id))})]}),L(Y,{bold:!0,children:"All Topics"}),L(Ae,{flexDirection:"column",marginY:1,children:u.map(a=>L(Ae,{marginBottom:.5,children:L(Y,{color:r.colors.primary,underline:!0,onPress:()=>n(a.id),children:a.title})},a.id))}),L(Ae,{marginTop:1,children:L(Y,{color:"gray",italic:!0,children:"Press ESC to close help"})})]})})};J();import{createContext as Ta,useContext as va,useState as Eo,useEffect as Sa}from"react";import{Box as ut,Text as _t}from"ink";import{v4 as Ca}from"uuid";import{useState as _r,useEffect as co,useCallback as js}from"react";import{Text as lr,useInput as $s,Box as wn}from"ink";import{jsx as cr,jsxs as En}from"react/jsx-runtime";var ne=({value:r,onChange:e,placeholder:t="",onSubmit:o,focus:n=!0,mask:i,showCursor:l=!0,validate:u,width:a,multiline:s=!1})=>{let[c,g]=_r(r.length),[f,p]=_r(null),[m,h]=_r(n),[y,C]=_r(r);co(()=>{C(r),g(r.length)},[r]),co(()=>{if(u){let T=u(y);p(T===!1?"Invalid input":typeof T=="string"?T:null)}},[y,u]);let P=js((T,R)=>{if(R.upArrow||R.downArrow||R.ctrl&&T==="c"||R.escape)return;let K=y,q=c;if(R.return){o&&(!u||!f)&&o(y);return}if(R.leftArrow)if(R.ctrl){let G=y.split(/\s+/),ae=0;for(let b=0;b<G.length;b++){if(ae+G[b].length>=c){b>0?q=y.indexOf(G[b-1]):q=0;break}ae+=G[b].length+1}}else q=Math.max(0,c-1);else if(R.rightArrow)if(R.ctrl){let G=y.split(/\s+/),ae=0;for(let b=0;b<G.length;b++){if(ae+=G[b].length,ae>c){q=Math.min(y.length,ae+1);break}ae+=1}}else q=Math.min(y.length,c+1);else R.delete?K=y.slice(0,c)+y.slice(c+1):R.backspace||R.delete?c>0&&(K=y.slice(0,c-1)+y.slice(c),q=c-1):R.home?q=0:R.end?q=y.length:T.length>0&&!R.ctrl&&!R.meta&&!R.alt&&(K=y.slice(0,c)+T+y.slice(c),q=c+T.length);K!==y&&(C(K),e(K)),q!==c&&g(q)},[y,c,e,o,u,f]);$s(P,{isActive:m}),co(()=>{h(n)},[n]);let O=i?i.repeat(y.length):y,v="\u2588",k=O.slice(0,c),M=O.slice(c),j=k,te=M;if(a){let T=Math.max(0,a-1);if(k.length>T&&(j="\u2026"+k.slice(-T+1)),M.length+j.length>T){let R=Math.max(0,T-j.length-1);te=M.slice(0,R)+(M.length>R?"\u2026":"")}}return En(wn,{flexDirection:"column",children:[En(wn,{children:[cr(lr,{children:j}),m&&l&&cr(lr,{inverse:!0,children:v||" "}),cr(lr,{children:te||(m&&l?" ":"")}),!j&&!te&&!m&&cr(lr,{dimColor:!0,children:t})]}),f&&cr(lr,{color:"red",children:f})]})};J();import{useMemo as uo}from"react";import{Text as Nr,useFocus as Hs,useInput as Us,Box as qs}from"ink";import{jsx as fo,jsxs as Rn}from"react/jsx-runtime";var Vs=({children:r,variant:e="default",disabled:t=!1,fullWidth:o=!1,loading:n=!1,focusable:i=!0,onPress:l,style:u={},boxProps:a={}})=>{let s=I(),{isFocused:c}=Hs({isActive:i&&!t&&!n,autoFocus:!1});Us((m,h)=>{(m===" "||h.return)&&l&&!t&&!n&&l()},{isActive:i&&!t&&!n});let g=uo(()=>{let m={default:{text:s.colors.text,background:s.colors.background,border:s.colors.border,hoverText:s.colors.text,hoverBackground:s.colors.backgroundHover,activeBackground:s.colors.highlight,disabledText:s.colors.textMuted,disabledBackground:s.colors.background,disabledBorder:s.colors.border},primary:{text:s.colors.textInverse,background:s.colors.primary,border:s.colors.primary,hoverText:s.colors.textInverse,hoverBackground:s.colors.primary,activeBackground:s.colors.primary,disabledText:s.colors.textInverse,disabledBackground:s.colors.textMuted,disabledBorder:s.colors.textMuted},secondary:{text:s.colors.textInverse,background:s.colors.secondary,border:s.colors.secondary,hoverText:s.colors.textInverse,hoverBackground:s.colors.secondary,activeBackground:s.colors.secondary,disabledText:s.colors.textInverse,disabledBackground:s.colors.textMuted,disabledBorder:s.colors.textMuted},success:{text:s.colors.textInverse,background:s.colors.success,border:s.colors.success,hoverText:s.colors.textInverse,hoverBackground:s.colors.success,activeBackground:s.colors.success,disabledText:s.colors.textInverse,disabledBackground:s.colors.textMuted,disabledBorder:s.colors.textMuted},warning:{text:s.colors.textInverse,background:s.colors.warning,border:s.colors.warning,hoverText:s.colors.textInverse,hoverBackground:s.colors.warning,activeBackground:s.colors.warning,disabledText:s.colors.textInverse,disabledBackground:s.colors.textMuted,disabledBorder:s.colors.textMuted},error:{text:s.colors.textInverse,background:s.colors.error,border:s.colors.error,hoverText:s.colors.textInverse,hoverBackground:s.colors.error,activeBackground:s.colors.error,disabledText:s.colors.textInverse,disabledBackground:s.colors.textMuted,disabledBorder:s.colors.textMuted},info:{text:s.colors.textInverse,background:s.colors.info,border:s.colors.info,hoverText:s.colors.textInverse,hoverBackground:s.colors.info,activeBackground:s.colors.info,disabledText:s.colors.textInverse,disabledBackground:s.colors.textMuted,disabledBorder:s.colors.textMuted}};return m[e]||m.default},[e,s]),f=uo(()=>{let m={paddingLeft:2,paddingRight:2,paddingTop:0,paddingBottom:0,height:3,minWidth:10,justifyContent:"center",alignItems:"center",borderStyle:"single",borderColor:g.border,backgroundColor:g.background,...u};return t||n?{...m,borderColor:g.disabledBorder,backgroundColor:g.disabledBackground,opacity:.7}:c?{...m,backgroundColor:g.hoverBackground,borderColor:g.border,borderStyle:"double"}:m},[g,t,c,n,u]),p=uo(()=>{let m={color:g.text};return t||n?{...m,color:g.disabledText}:c?{...m,color:g.hoverText,bold:!0}:m},[g,t,c,n]);return fo(qs,{...a,width:o?"100%":a.width,flexGrow:o?1:a.flexGrow,flexDirection:"row",alignItems:"center",justifyContent:"center",style:f,children:n?Rn(Nr,{...p,children:[fo(Nr,{children:"\u23F3 "}),fo(Nr,{children:"Loading..."})]}):Rn(Nr,{...p,children:[c&&"> ",r,c&&" <"]})})},et=Vs;J();import{useEffect as Qu,useState as Ju}from"react";import{Text as Zu}from"ink";import{jsx as rd,jsxs as od}from"react/jsx-runtime";J();import{useMemo as ad}from"react";import{Box as cd,Text as ud,useFocus as dd,useInput as fd}from"ink";import{jsx as hd,jsxs as md}from"react/jsx-runtime";J();import{useEffect as Td,useState as vd}from"react";import{Box as Cd,Text as Bd}from"ink";import{jsx as kd,jsxs as Pd}from"react/jsx-runtime";J();import{useEffect as Ws,useState as Pn}from"react";import{Box as He,Text as Be,useInput as Ks}from"ink";J();import{Box as Fr,Text as Ye}from"ink";import{Fragment as po,jsx as Qe,jsxs as Ot}from"react/jsx-runtime";var zs=({label:r,variant:e="horizontal",orientation:t="center",character:o,color:n,labelColor:i,style:l={},labelStyle:u={},lineStyle:a={}})=>{let s=I(),g=o||(e==="horizontal"?"\u2500":"\u2502"),f=n||s.colors.border,p=i||s.colors.text;return Qe(Fr,{style:l,flexDirection:e==="horizontal"?"row":"column",alignItems:"center",justifyContent:"center",width:e==="horizontal"?"100%":void 0,height:e==="vertical"?"100%":void 0,children:e==="horizontal"?(()=>{if(!r)return Qe(Fr,{children:Qe(Ye,{color:f,style:a,children:g.repeat(process.stdout.columns||40)})});let y=process.stdout.columns||80,P=(typeof r=="string"?r:"").length,O=Math.max(2,Math.floor((y-P-2)/2)),v=g.repeat(O),k=g.repeat(O),M;switch(t){case"left":M=Ot(po,{children:[Qe(Ye,{color:f,style:a,children:g.repeat(2)}),Ot(Ye,{color:p,style:u,children:[" ",r," "]}),Qe(Ye,{color:f,style:a,children:g.repeat(y-P-6)})]});break;case"right":M=Ot(po,{children:[Qe(Ye,{color:f,style:a,children:g.repeat(y-P-6)}),Ot(Ye,{color:p,style:u,children:[" ",r," "]}),Qe(Ye,{color:f,style:a,children:g.repeat(2)})]});break;case"center":default:M=Ot(po,{children:[Qe(Ye,{color:f,style:a,children:v}),Ot(Ye,{color:p,style:u,children:[" ",r," "]}),Qe(Ye,{color:f,style:a,children:k})]})}return Qe(Fr,{children:M})})():Ot(Fr,{flexDirection:"column",alignItems:"center",justifyContent:"center",children:[Qe(Ye,{color:f,style:a,children:g}),r&&Qe(Ye,{color:p,style:u,children:r})]})})},go=zs;import{jsx as Te,jsxs as Je}from"react/jsx-runtime";var Ys=({error:r,showDetails:e=!1,dismissible:t=!0,onDismiss:o,autoDismiss:n=0,markAsHandled:i=!0})=>{let l=I(),[u,a]=Pn(!0),[s,c]=Pn(e),g=h=>{switch(h){case"LOW":return l.colors.info;case"MEDIUM":return l.colors.warning;case"HIGH":case"CRITICAL":return l.colors.error;default:return l.colors.error}},f=h=>{switch(h){case"LOW":return"Minor";case"MEDIUM":return"Warning";case"HIGH":return"Error";case"CRITICAL":return"Critical";default:return"Error"}};Ws(()=>{if(!u||!n)return;let h=setTimeout(()=>{p()},n);return()=>{clearTimeout(h)}},[u,n]);let p=()=>{!t&&!n||(a(!1),i&&me.markAsHandled(r.id),o&&o())};if(Ks((h,y)=>{y.escape&&t&&p(),(h==="d"||h==="D")&&c(!s)}),!u)return null;let m=g(r.severity);return Je(He,{flexDirection:"column",borderStyle:"round",borderColor:m,padding:1,children:[Je(He,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[Te(He,{children:Je(Be,{bold:!0,color:m,children:[f(r.severity),": ",r.category]})}),t&&Te(He,{children:Te(Be,{color:l.colors.textMuted,dimColor:!0,onClick:p,children:"[ESC to close]"})})]}),Te(He,{marginY:1,children:Te(Be,{wrap:!0,children:r.message})}),r.userAction&&Te(He,{marginY:1,children:Je(Be,{italic:!0,color:l.colors.info,children:["Suggestion: ",r.userAction]})}),Te(He,{marginY:1,children:Je(Be,{dimColor:!0,children:["Press 'D' to ",s?"hide":"show"," details"]})}),s&&Je(He,{flexDirection:"column",marginTop:1,children:[Te(go,{}),Je(He,{marginY:1,children:[Te(Be,{bold:!0,children:"Error ID:"}),Te(Be,{children:" "}),Te(Be,{children:r.id})]}),r.context&&Je(He,{marginY:1,children:[Te(Be,{bold:!0,children:"Context:"}),Te(Be,{children:" "}),Te(Be,{children:r.context})]}),Je(He,{marginY:1,children:[Te(Be,{bold:!0,children:"Time:"}),Te(Be,{children:" "}),Te(Be,{children:r.timestamp.toLocaleString()})]}),r.details&&Object.keys(r.details).length>0&&Je(He,{flexDirection:"column",marginY:1,children:[Te(Be,{bold:!0,children:"Details:"}),Object.entries(r.details).map(([h,y])=>Je(Be,{children:[h,": ",typeof y=="object"?JSON.stringify(y):String(y)]},h))]}),r.error?.stack&&Je(He,{flexDirection:"column",marginY:1,children:[Te(Be,{bold:!0,children:"Stack Trace:"}),Te(He,{flexDirection:"column",borderStyle:"single",borderColor:l.colors.textMuted,paddingX:1,height:5,overflowY:"scroll",marginTop:1,children:r.error.stack.split(`
`).map((h,y)=>Te(Be,{dimColor:!0,wrap:!0,children:an(h,100)},y))})]})]})]})},zt=Ys;import{Component as Qs}from"react";import{Box as kn,Text as ho}from"ink";import{jsx as ur,jsxs as Js}from"react/jsx-runtime";var xo=class extends Qs{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){let{id:o,componentName:n}=this.props,i=n||(o?`ErrorBoundary(${o})`:"ErrorBoundary"),l=me.reportError(`UI Error in ${i}`,{error:e,severity:"HIGH",category:"UI",context:i,details:{componentStack:t.componentStack},userAction:"Try refreshing the application or report this issue to the developers."});this.setState({errorInfo:t,errorId:l.id})}render(){let{children:e,showError:t=!0,fallback:o}=this.props,{hasError:n,error:i,errorId:l}=this.state;if(n){if(!t)return null;if(o)return o;if(i&&l){let u=me.getError(l);if(u)return ur(kn,{flexDirection:"column",paddingY:1,children:ur(zt,{error:u})})}return Js(kn,{flexDirection:"column",borderStyle:"round",borderColor:"red",padding:1,children:[ur(ho,{bold:!0,color:"red",children:"An error occurred in this component"}),i&&ur(ho,{wrap:"wrap",children:i.message}),ur(ho,{children:"Please try again or restart the application."})]})}return e}},Dt=xo;import{createContext as Xs,useContext as Zs,useState as ea,useEffect as ta}from"react";import{Box as yt}from"ink";import{jsx as It,jsxs as dr}from"react/jsx-runtime";var An=Xs({errors:[],dismissError:()=>{},clearErrors:()=>{}}),fr=()=>Zs(An),ra=({children:r,maxVisibleErrors:e=3,position:t="top"})=>{let[o,n]=ea([]);ta(()=>{let a=me.subscribe(s=>{n(c=>c.some(g=>g.id===s.id)?c:[s,...c])});return()=>{a()}},[]);let i=a=>{me.markAsHandled(a),n(s=>s.filter(c=>c.id!==a))},l=()=>{o.forEach(a=>{me.markAsHandled(a.id)}),n([])},u=o.slice(0,e);return It(An.Provider,{value:{errors:o,dismissError:i,clearErrors:l},children:dr(yt,{flexDirection:"column",children:[t==="top"&&u.length>0&&dr(yt,{flexDirection:"column",marginBottom:1,children:[u.map(a=>It(zt,{error:a,onDismiss:()=>i(a.id)},a.id)),o.length>e&&It(yt,{justifyContent:"center",marginY:1,children:It(yt,{borderStyle:"single",paddingX:1,children:dr(yt,{children:[o.length-e," more ",o.length-e===1?"error":"errors"," not shown"]})})})]}),r,t==="bottom"&&u.length>0&&dr(yt,{flexDirection:"column",marginTop:1,children:[u.map(a=>It(zt,{error:a,onDismiss:()=>i(a.id)},a.id)),o.length>e&&It(yt,{justifyContent:"center",marginY:1,children:It(yt,{borderStyle:"single",paddingX:1,children:dr(yt,{children:[o.length-e," more ",o.length-e===1?"error":"errors"," not shown"]})})})]})]})})},pr=ra;J();import{useMemo as ff}from"react";import{Box as gf,Text as mf}from"ink";import{jsx as bf,jsxs as yf}from"react/jsx-runtime";J();import{useState as Cf,useEffect as Bf}from"react";import{Box as Ef,Text as Rf}from"ink";import{jsx as Af,jsxs as Mf}from"react/jsx-runtime";import{useState as Lf,useEffect as _f}from"react";import{Box as Ff,Text as jf}from"ink";J();import{jsx as qf,jsxs as Vf}from"react/jsx-runtime";J();import{useState as ia,useEffect as Mn}from"react";import{Box as yo,Text as gr}from"ink";import{execa as On}from"execa";var jr={name:"sf-tui",version:"0.1.0",description:"A modern, interactive terminal UI for Salesforce CLI",main:"dist/index.js",bin:{sft:"./bin/run"},scripts:{build:"tsup",dev:"tsup --watch",test:"vitest run","test:watch":"vitest","test:ui":"vitest --ui","test:coverage":"vitest run --coverage","test:errors":"vitest run 'tests/(utils|components|integration)/*error*'","test:e2e":"vitest run 'tests/e2e/*.e2e.test.tsx'","test:all":"vitest run",lint:"eslint . --ext .ts",prepack:"rm -rf dist && npm run build",version:"git add -A src",postversion:"git push && git push --tags"},vitest:{environment:"jsdom",setupFiles:"./tests/setup.ts",globals:!0,coverage:{provider:"v8",reporter:["text","json","html"],exclude:["**/node_modules/**","**/dist/**","**/tests/**","**/*.test.ts","**/*.test.tsx"]}},dependencies:{"@oclif/core":"^3.0.0",chalk:"^5.0.0",execa:"^8.0.0",ink:"^4.4.0","ink-box":"^2.0.0","ink-select-input":"^5.0.0","ink-spinner":"^4.0.0","ink-text-input":"^5.0.0",inquirer:"^9.0.0",open:"^9.0.0",ora:"^7.0.0",react:"^18.0.0","react-reconciler":"^0.29.0",uuid:"^11.1.0","yoga-layout-prebuilt":"^1.10.0"},devDependencies:{"@testing-library/jest-dom":"^6.4.2","@testing-library/react":"^14.2.1","@types/chai":"^4.3.0","@types/execa":"^0.9.0","@types/jest":"^29.5.12","@types/mocha":"^10.0.0","@types/node":"^20.17.48","@types/react":"^18.0.0","@types/react-dom":"^18.0.0","@types/react-reconciler":"^0.18.0","@types/resize-observer-browser":"^0.1.11","@types/uuid":"^10.0.0","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","@vitest/ui":"^1.6.0",eslint:"^8.0.0","eslint-config-prettier":"^9.0.0","eslint-plugin-react":"^7.30.0",jsdom:"^24.0.0",prettier:"^3.0.0",tsup:"^8.0.0",typescript:"^5.0.0",vitest:"^1.6.0"},engines:{node:">=18.0.0"},oclif:{commands:"./dist/commands",bin:"sft"},type:"module"};import{jsx as mr,jsxs as bo}from"react/jsx-runtime";var sa=({width:r=process.stdout.columns||100})=>{let e=I(),[t,o]=ia({currentOrg:void 0,defaultOrg:void 0,devhubOrg:void 0,version:jr.version,time:new Date().toLocaleTimeString()});return Mn(()=>{let n=setInterval(()=>{o(i=>({...i,time:new Date().toLocaleTimeString()}))},1e3);return()=>clearInterval(n)},[]),Mn(()=>{(async()=>{try{let{stdout:i}=await On("sf",["config","get","target-org","--json"]),u=JSON.parse(i)?.result?.[0]?.value,{stdout:a}=await On("sf",["config","get","target-dev-hub","--json"]),c=JSON.parse(a)?.result?.[0]?.value;o(g=>({...g,currentOrg:u,defaultOrg:u,devhubOrg:c}))}catch(i){console.error("Failed to get org info:",i)}})()},[]),bo(yo,{flexDirection:"row",width:r,height:1,justifyContent:"space-between",backgroundColor:e.colors.primary,padding:0,children:[bo(yo,{children:[mr(gr,{backgroundColor:e.colors.primary,color:e.colors.textInverse,children:` SF TUI v${t.version} `}),t.defaultOrg&&mr(gr,{backgroundColor:e.colors.secondary,color:e.colors.textInverse,children:` Org: ${t.defaultOrg} `}),t.devhubOrg&&mr(gr,{backgroundColor:e.colors.info,color:e.colors.textInverse,children:` DevHub: ${t.devhubOrg} `})]}),bo(yo,{children:[mr(gr,{backgroundColor:e.colors.warning,color:e.colors.textInverse,children:" ?: Help "}),mr(gr,{backgroundColor:e.colors.primary,color:e.colors.textInverse,children:` ${t.time} `})]})]})},To=sa;J();import{Box as Lt,Text as hr,useInput as aa}from"ink";import{Fragment as Dn,jsx as tt,jsxs as $r}from"react/jsx-runtime";var la=({onClose:r,title:e="Keyboard Shortcuts"})=>{let t=I(),{activeShortcuts:o}=Dr(),n=o.filter(u=>u.global),i=o.filter(u=>!u.global);aa((u,a)=>{(a.escape||u==="q")&&r()});let l=u=>{let a=[u.ctrl?"Ctrl+":"",u.alt?"Alt+":"",u.shift?"Shift+":"",u.key.toUpperCase()].join("");return $r(Lt,{marginY:0,children:[tt(Lt,{width:16,children:tt(hr,{bold:!0,color:t.colors.primary,children:a})}),tt(Lt,{children:tt(hr,{children:u.description})})]},u.action)};return tt(lt,{title:e,borderStyle:"round",borderColor:t.colors.primary,padding:1,width:60,children:$r(Lt,{flexDirection:"column",children:[n.length>0&&$r(Dn,{children:[tt(hr,{bold:!0,children:"Global Shortcuts"}),tt(Lt,{flexDirection:"column",marginY:1,children:n.map(l)})]}),i.length>0&&$r(Dn,{children:[tt(hr,{bold:!0,children:"Context Shortcuts"}),tt(Lt,{flexDirection:"column",marginY:1,children:i.map(l)})]}),tt(Lt,{marginTop:1,children:tt(hr,{color:"gray",italic:!0,children:"Press ESC or q to close"})})]})})},vo=la;J();import{useEffect as ca}from"react";import{Box as xr,Text as ua,useInput as da}from"ink";import{jsx as Wt,jsxs as In}from"react/jsx-runtime";var fa=({isOpen:r=!1,title:e,children:t,width:o=60,height:n="auto",showCloseButton:i=!0,closeButtonLabel:l="Close",showBackdrop:u=!0,onClose:a,style:s={},contentProps:c={}})=>{let g=I();if(da((C,P)=>{P.escape&&a&&a()},{isActive:r}),ca(()=>{if(r)return()=>{}},[r]),!r)return null;let f={position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:`${o}%`,maxWidth:"90%",minHeight:typeof n=="number"?`${n}%`:"auto",maxHeight:"90%",backgroundColor:g.colors.background,borderStyle:"single",borderColor:g.colors.border,flexDirection:"column",...s},p={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center",zIndex:1e3},m={borderBottomStyle:"single",borderBottomColor:g.colors.border,paddingX:1,paddingY:0,flexDirection:"row",justifyContent:"space-between",alignItems:"center",height:3},h={padding:1,flexGrow:1,overflow:"hidden"},y={borderTopStyle:"single",borderTopColor:g.colors.border,padding:1,flexDirection:"row",justifyContent:"flex-end",alignItems:"center",height:4};return Wt(xr,{...u?{style:p}:{},children:In(xr,{style:f,children:[In(xr,{style:m,children:[Wt(ua,{bold:!0,children:e}),i&&a&&Wt(et,{variant:"text",onPress:a,style:{padding:0,height:1},children:"\u2715"})]}),Wt(xr,{...c,style:{...h,...c.style},children:t}),Wt(xr,{style:y,children:a&&Wt(et,{variant:"secondary",onPress:a,children:l})})]})})},yr=fa;J();import{useCallback as So,useMemo as Ln}from"react";import{Box as Co,Text as pa}from"ink";import{jsx as br,jsxs as _n}from"react/jsx-runtime";var ga=({isOpen:r=!1,title:e="Confirm",message:t,confirmLabel:o="Confirm",cancelLabel:n="Cancel",confirmVariant:i="primary",cancelVariant:l="default",showCancel:u=!0,closeOnBackdropClick:a=!0,onConfirm:s,onCancel:c,style:g={}})=>{let f=I(),p=So(()=>{s()},[s]),m=So(()=>{c()},[c]),h=So(()=>{a&&c()},[a,c]),y=Ln(()=>_n(Co,{justifyContent:"flex-end",gap:1,children:[u&&br(et,{variant:l,onPress:m,children:n}),br(et,{variant:i,onPress:p,children:o})]}),[u,l,n,i,o,m,p]),C=Ln(()=>br(Co,{flexDirection:"column",gap:1,children:typeof t=="string"?br(pa,{children:t}):t}),[t]);return br(yr,{isOpen:r,title:e,onClose:m,style:g,showBackdrop:!0,showCloseButton:!1,children:_n(Co,{flexDirection:"column",gap:2,children:[C,y]})})},Bo=ga;J();import{useState as Rp,useRef as Pp,useEffect as kp}from"react";import{Box as Mp,Text as Op}from"ink";import{Fragment as Np,jsx as Fp,jsxs as jp}from"react/jsx-runtime";J();import{Text as Up}from"ink";import{jsx as Gp}from"react/jsx-runtime";J();import{Box as Kp,Text as Yp}from"ink";import{jsx as Zp,jsxs as eg}from"react/jsx-runtime";J();import{Box as og,Text as ng}from"ink";import{jsx as ag,jsxs as lg}from"react/jsx-runtime";J();import{useState as yg,useRef as bg,useEffect as Tg}from"react";import{Box as Sg,Text as Cg}from"ink";import{useState as dg,useRef as fg,useLayoutEffect as pg}from"react";import{jsx as Rg,jsxs as Pg}from"react/jsx-runtime";J();import{useCallback as Ig}from"react";import{Box as _g,Text as Ng}from"ink";import{jsx as qg,jsxs as Ug}from"react/jsx-runtime";J();import{useState as wo,useEffect as ha}from"react";import{Box as xa}from"ink";import{jsx as ba}from"react/jsx-runtime";var ya=({children:r,type:e="fade",duration:t=300,visible:o=!0,onComplete:n})=>{let[i,l]=wo(!1),[u,a]=wo(!1),[s,c]=wo(0),g=I(),f=8,p=t/f;ha(()=>{if(o!==i){a(!0),c(o?0:f);let y=setInterval(()=>{c(C=>{let P=o?C+1:C-1;return o&&P>=f||!o&&P<=0?(a(!1),l(o),clearInterval(y),n&&n(),o?f:0):P})},p);return()=>clearInterval(y)}},[o,i,t,n]);let m=()=>{let y=s/f,C=e==="fade"?o?y:1-y:1,P={},O=10;switch(e){case"slide-left":P={translateX:o?-O*(1-y):-O*y};break;case"slide-right":P={translateX:o?O*(1-y):O*y};break;case"slide-up":P={translateY:o?O*(1-y):O*y};break;case"slide-down":P={translateY:o?-O*(1-y):-O*y};break;case"zoom":P={scale:o?.5+.5*y:.5+.5*(1-y)};break}return{opacity:C,...P}};if(!u&&!i)return null;let h=m();return ba(xa,{style:{opacity:h.opacity,transform:h.transform,transition:`all ${t}ms`},children:r})},wt=ya;import{jsx as ze,jsxs as Kt}from"react/jsx-runtime";var Nn=Ta({notifications:[],showNotification:()=>"",updateNotification:()=>{},dismissNotification:()=>{},dismissAll:()=>{}}),Fn=({children:r})=>{let[e,t]=Eo([]),[o,n]=Eo([]),i=s=>{let c=Ca(),g={...s,id:c,createdAt:new Date};if(t(f=>[...f,g]),n(f=>[...f,c]),s.autoDismiss){let f=s.dismissAfter||5e3;setTimeout(()=>{u(c)},f)}return c},l=(s,c)=>{t(g=>g.map(f=>f.id===s?{...f,...c}:f))},u=s=>{let c=e.find(g=>g.id===s);c?.onDismiss&&c.onDismiss(),n(g=>g.filter(f=>f!==s)),setTimeout(()=>{t(g=>g.filter(f=>f.id!==s))},300)},a=()=>{e.forEach(s=>{s.onDismiss&&s.onDismiss()}),n([]),setTimeout(()=>{t([])},300)};return ze(Nn.Provider,{value:{notifications:e,showNotification:i,updateNotification:l,dismissNotification:u,dismissAll:a},children:r})},Ro=()=>{let r=va(Nn);if(!r)throw new Error("useNotifications must be used within a NotificationProvider");return r},jn=()=>{let{notifications:r,dismissNotification:e}=Ro(),[t,o]=Eo([]),n=I();Sa(()=>{o(a=>{let s=r.map(c=>c.id);return[...a.filter(c=>s.includes(c)),...s.filter(c=>!a.includes(c))]})},[r]);let i=a=>{switch(a){case"success":return n.colors.success;case"error":return n.colors.error;case"warning":return n.colors.warning;case"info":return n.colors.info;case"progress":return n.colors.primary;default:return n.colors.text}},l=a=>{switch(a){case"success":return"\u2713";case"error":return"\u2717";case"warning":return"\u26A0";case"info":return"\u2139";case"progress":return"\u27F3";default:return"\u2022"}},u=a=>{let{id:s,type:c,title:g,message:f,progress:p,maxProgress:m,actions:h}=a,y=i(c),C=l(c),P=t.includes(s),O=c==="progress"&&typeof p=="number",v=O?Math.round(p/(m||100)*100):0;return ze(wt,{type:"slide-left",duration:300,visible:P,children:Kt(ut,{flexDirection:"column",borderStyle:"round",borderColor:y,marginY:1,padding:1,width:60,children:[Kt(ut,{children:[Kt(_t,{color:y,children:[C," "]}),ze(_t,{bold:!0,children:g}),ze(ut,{flexGrow:1}),ze(_t,{color:n.colors.textMuted,onPress:()=>e(s),children:"\xD7"})]}),ze(ut,{marginY:1,children:ze(_t,{children:f})}),O&&Kt(ut,{marginY:1,children:[ze(ut,{width:50,children:Kt(_t,{color:y,children:[Array(Math.floor(v/2)).fill("\u2588").join(""),Array(50-Math.floor(v/2)).fill("\u2591").join("")]})}),ze(ut,{marginLeft:1,children:Kt(_t,{children:[v,"%"]})})]}),h&&h.length>0&&ze(ut,{marginTop:1,children:h.map((k,M)=>ze(ut,{marginRight:2,children:ze(_t,{color:n.colors.primary,underline:!0,onPress:k.action,children:k.label})},M))})]})},s)};return ze(ut,{flexDirection:"column",position:"absolute",right:1,top:1,width:60,children:r.map(u)})};import{useState as qn,useEffect as Ea}from"react";import{Box as bt,Text as A}from"ink";J();import{useState as $n,useEffect as Ba}from"react";import{Box as Et,Text as Hn}from"ink";import{jsx as Xe,jsxs as Po}from"react/jsx-runtime";var wa=({steps:r,isActive:e,onComplete:t,onSkip:o,initialStep:n=0})=>{let[i,l]=$n(n),[u,a]=$n(!1),s=I();Ba(()=>{a(!!e)},[e]);let c=r[i],g=()=>{i<r.length-1?l(h=>h+1):t()},f=()=>{i>0&&l(h=>h-1)},p=()=>{a(!1),setTimeout(()=>{o()},300)};if(!e||!c)return null;let m=(i+1)/r.length*100;return Xe(wt,{type:"fade",duration:300,visible:u,children:Xe(Et,{position:"absolute",top:2,right:2,flexDirection:"column",width:60,children:Xe(lt,{title:`Tutorial: ${c.title}`,borderStyle:"round",borderColor:s.colors.primary,padding:1,children:Po(Et,{flexDirection:"column",children:[Xe(Et,{marginBottom:1,children:typeof c.content=="string"?Xe(Hn,{children:c.content}):c.content}),Xe(Et,{marginY:1,children:Po(Hn,{children:[Array(Math.floor(m/5)).fill("\u2588").join(""),Array(20-Math.floor(m/5)).fill("\u2591").join(""),` ${Math.round(m)}%`]})}),Po(Et,{justifyContent:"space-between",marginTop:1,children:[Xe(Et,{children:i>0&&Xe(et,{label:"\u2190 Back",onPress:f,variant:"secondary",size:"small"})}),Xe(Et,{children:Xe(et,{label:"Skip Tutorial",onPress:p,variant:"danger",size:"small"})}),Xe(Et,{children:Xe(et,{label:i<r.length-1?"Next \u2192":"Finish",onPress:g,variant:"primary",size:"small"})})]})]})})})})},Un=wa;J();import{jsx as V,jsxs as ye}from"react/jsx-runtime";var Vn=[{id:"welcome",element:"main-menu",title:"Welcome to SF TUI",content:ye(bt,{flexDirection:"column",children:[V(A,{children:"Welcome to Salesforce Terminal UI! This tutorial will guide you through the main features of the application."}),V(A,{children:" "}),ye(A,{children:["Press ",V(A,{color:"cyan",bold:!0,children:"Next"})," to continue or ",V(A,{color:"red",children:"Skip Tutorial"})," to exit."]})]}),position:"right"},{id:"navigation",element:"main-menu",title:"Basic Navigation",content:ye(bt,{flexDirection:"column",children:[V(A,{children:"You can navigate through the application using:"}),ye(A,{children:["\u2022 ",V(A,{bold:!0,children:"Arrow keys"}),": Move through menus and lists"]}),ye(A,{children:["\u2022 ",V(A,{bold:!0,children:"Enter"}),": Select an item or confirm an action"]}),ye(A,{children:["\u2022 ",V(A,{bold:!0,children:"Esc"}),": Go back to the previous screen"]})]}),position:"right"},{id:"orgs",element:"org-manager",title:"Managing Orgs",content:ye(bt,{flexDirection:"column",children:[ye(A,{children:["The ",V(A,{bold:!0,children:"Org Manager"})," allows you to:"]}),V(A,{children:"\u2022 View all connected Salesforce orgs"}),V(A,{children:"\u2022 Set default orgs and DevHubs"}),V(A,{children:"\u2022 Open orgs directly in your browser"}),V(A,{children:"\u2022 Log out of orgs when needed"})]}),position:"bottom"},{id:"metadata",element:"metadata-tools",title:"Metadata Tools",content:ye(bt,{flexDirection:"column",children:[ye(A,{children:["The ",V(A,{bold:!0,children:"Metadata Tools"})," help you:"]}),V(A,{children:"\u2022 Deploy code and configurations to orgs"}),V(A,{children:"\u2022 Retrieve metadata from orgs"}),V(A,{children:"\u2022 Compare metadata between different environments"})]}),position:"left"},{id:"run",element:"run-tools",title:"Run Tools",content:ye(bt,{flexDirection:"column",children:[ye(A,{children:["The ",V(A,{bold:!0,children:"Run Tools"})," allow you to:"]}),V(A,{children:"\u2022 Execute Apex code directly"}),V(A,{children:"\u2022 Run SOQL queries"}),V(A,{children:"\u2022 Trigger flows and processes"}),V(A,{children:"\u2022 Analyze results in a structured format"})]}),position:"top"},{id:"shortcuts",element:"keyboard-shortcuts",title:"Keyboard Shortcuts",content:ye(bt,{flexDirection:"column",children:[V(A,{children:"SF TUI supports keyboard shortcuts:"}),ye(A,{children:["\u2022 ",V(A,{bold:!0,children:"?"}),": Show help"]}),ye(A,{children:["\u2022 ",V(A,{bold:!0,children:"Ctrl+Q"}),": Quit application"]}),ye(A,{children:["\u2022 ",V(A,{bold:!0,children:"Ctrl+S"}),": Toggle status bar"]}),ye(A,{children:["\u2022 ",V(A,{bold:!0,children:"Ctrl+T"}),": Cycle through themes"]})]}),position:"left"},{id:"settings",element:"settings",title:"Settings",content:ye(bt,{flexDirection:"column",children:[ye(A,{children:["The ",V(A,{bold:!0,children:"Settings"})," menu lets you:"]}),V(A,{children:"\u2022 Change the application theme"}),V(A,{children:"\u2022 Configure keyboard shortcuts"}),V(A,{children:"\u2022 View and manage other preferences"})]}),position:"right"},{id:"completion",element:"main-menu",title:"Tutorial Complete!",content:ye(bt,{flexDirection:"column",children:[V(A,{children:"Congratulations! You've completed the basic tutorial."}),V(A,{children:" "}),ye(A,{children:["Remember, you can press ",V(A,{bold:!0,children:"?"})," at any time to get context-sensitive help."]}),V(A,{children:" "}),V(A,{children:"Happy Salesforce development!"})]}),position:"bottom"}];var Ra=({children:r})=>{let[e,t]=qn(!1),[o,n]=qn(0),i=I();Ea(()=>{{let c=setTimeout(()=>{t(!0)},1e3);return()=>clearTimeout(c)}},[]);let l=()=>{t(!1),console.log("Tutorial completed and marked as done")},u=()=>{t(!1),console.log("Tutorial skipped and marked as done")},a=s=>{let c=Vn.findIndex(g=>g.id===s);c!==-1&&(n(c),t(!0))};return ye(bt,{position:"relative",children:[r,V(Un,{steps:Vn,isActive:e,onComplete:l,onSkip:u,initialStep:o})]})},Gn=Ra;import{useState as Jt,useEffect as Lo,useCallback as bl}from"react";import{Box as Ft,Text as Q,useInput as Tl,useApp as vl}from"ink";import Sl from"ink-select-input";import ke from"chalk";import{useState as Rt,useEffect as Pa}from"react";import{Box as we,Text as ce,useInput as ka}from"ink";import ko from"ink-select-input";import{execa as zn}from"execa";import Wn from"ink-spinner";import{jsx as X,jsxs as Me}from"react/jsx-runtime";var Kn=({onBack:r})=>{let{errors:e,dismissError:t}=fr(),{showNotification:o,updateNotification:n,dismissNotification:i}=Ro(),[l,u]=Rt([]),[a,s]=Rt(!0),[c,g]=Rt(null),[f,p]=Rt(null),[m,h]=Rt(""),[y,C]=Rt(!1),[P,O]=Rt(!1),[v,k]=Rt({});Pa(()=>{M()},[]);let M=async()=>{let b="";try{s(!0),g(null),b=o({type:"info",title:"Loading Orgs",message:"Fetching org list from Salesforce CLI...",progress:0,maxProgress:100});let{stdout:d}=await zn("sf",["org","list","--json"]);n(b,{progress:50,message:"Processing org data..."});let x=JSON.parse(d);if(x.status===0&&x.result){let S=x.result.nonScratchOrgs.concat(x.result.scratchOrgs||[]);u(S),n(b,{type:"success",title:"Orgs Loaded",message:`Found ${S.length} Salesforce orgs`,progress:100,autoDismiss:!0,dismissAfter:3e3})}else u([]),(!x.result||(!x.result.nonScratchOrgs||x.result.nonScratchOrgs.length===0)&&(!x.result.scratchOrgs||x.result.scratchOrgs.length===0))&&(n(b,{type:"warning",title:"No Orgs Found",message:"Use the Auth Manager to log in to a Salesforce org.",progress:100,autoDismiss:!0,dismissAfter:5e3}),me.reportError("No Salesforce orgs found",{severity:"LOW",category:"AUTH",context:"OrgManager",userAction:"Use the Auth Manager to log in to a Salesforce org."}))}catch(d){let x=`Failed to load orgs: ${d instanceof Error?d.message:String(d)}`;g(x),u([]),b&&n(b,{type:"error",title:"Error Loading Orgs",message:x,autoDismiss:!0,dismissAfter:5e3,actions:[{label:"Retry",action:M}]}),me.reportError("Failed to load Salesforce orgs",{error:d instanceof Error?d:new Error(String(d)),severity:"HIGH",category:"COMMAND",context:"OrgManager.loadOrgs",userAction:"Check if Salesforce CLI is installed and properly configured."})}finally{s(!1)}},j=b=>{p(b)},te=async(b,d=[])=>{try{C(!0),h("");let x=T(b,d),S=o({type:"progress",title:x,message:`Running: sf ${b} ${d.join(" ")}`,progress:0,maxProgress:100,autoDismiss:!1});k(pe=>({...pe,[b]:S}));let B=zn("sf",[b,...d]),re="";B.stdout?.on("data",pe=>{let be=pe.toString();re+=be,h(nt=>nt+be),n(S,{progress:Math.min(95,re.length/500*100),message:`Running: sf ${b} ${d.join(" ")}
${be.slice(-50)}`})}),B.stderr?.on("data",pe=>{let be=pe.toString();re+=be,h(nt=>nt+be),n(S,{type:"warning",message:`Warning: ${be.slice(-50)}`})}),await B,n(S,{type:"success",title:`${x} - Completed`,message:"Command completed successfully",progress:100,autoDismiss:!0,dismissAfter:5e3}),k(pe=>{let be={...pe};return delete be[b],be}),await M()}catch(x){let S=`Error: ${x instanceof Error?x.message:String(x)}`;h(S);let B=v[b];B&&(n(B,{type:"error",title:`Error: ${T(b,d)}`,message:S,autoDismiss:!0,dismissAfter:8e3,actions:[{label:"Retry",action:()=>te(b,d)}]}),k(re=>{let pe={...re};return delete pe[b],pe})),me.reportCommandError(`Failed to execute Salesforce CLI command: sf ${b} ${d.join(" ")}`,x instanceof Error?x:new Error(String(x)),{command:b,args:d})}finally{C(!1)}},T=(b,d)=>{switch(b){case"org":return d.includes("open")?"Opening Org":d.includes("display")?"Refreshing Org":d.includes("delete")?"Deleting Org":"Org Operation";case"config":return d.includes("target-org")?"Setting Default Org":d.includes("target-dev-hub")?"Setting Default DevHub":"Config Operation";case"auth":return d.includes("logout")?"Logging Out":"Auth Operation";default:return"Salesforce CLI Operation"}},R=b=>{te("org",["open","-o",b.username])},K=b=>{te("config",["set","target-org",b.username,"--global"])},q=b=>{te("config",["set","target-dev-hub",b.username,"--global"])},G=b=>{te("org",["display","-o",b.username,"--verbose"])},ae=async b=>{b.status==="Active"&&b.username.includes("test.com")?await te("org",["delete","scratch","-o",b.username,"--no-prompt"]):await te("auth",["logout","-o",b.username,"--no-prompt"]),await M(),p(null)};return ka((b,d)=>{d.escape&&(P?O(!1):f?p(null):r())}),a?X(we,{children:Me(ce,{children:[X(Wn,{type:"dots"})," Loading orgs..."]})}):c?Me(we,{flexDirection:"column",children:[Me(ce,{color:"red",children:["Error: ",c]}),X(ce,{children:"Press ESC to go back"})]}):f?P?Me(we,{flexDirection:"column",children:[X(we,{marginBottom:1,children:X(ce,{bold:!0,color:"red",children:"\u26A0\uFE0F  Delete Org Confirmation"})}),Me(we,{marginBottom:2,children:[Me(ce,{children:["Are you sure you want to delete the org ",X(ce,{bold:!0,children:f.alias||f.username}),"?"]}),Me(ce,{children:["This action ",f.username.includes("test.com")?"will PERMANENTLY delete the scratch org":"will revoke authentication for this org","."]})]}),X(we,{flexDirection:"column",marginBottom:2,children:X(ko,{items:[{label:"\u274C Cancel - Keep this org",value:"cancel"},{label:"\u26A0\uFE0F Yes, DELETE this org",value:"confirm"}],onSelect:b=>{b.value==="confirm"?ae(f):O(!1)}})}),X(ce,{color:"gray",italic:!0,children:"Press ESC to cancel"})]}):Me(we,{flexDirection:"column",children:[Me(we,{marginBottom:1,children:[Me(ce,{bold:!0,children:["Org: ",f.alias||f.username]}),X(ce,{children:"  "}),f.isDefaultUsername&&X(ce,{color:"green",children:"[Default]"}),f.isDefaultDevHub&&X(ce,{color:"blue",children:" [DevHub]"})]}),X(we,{marginBottom:1,children:Me(ce,{children:["Status: ",f.status]})}),X(we,{marginBottom:2,children:Me(ce,{children:["Instance: ",f.instanceUrl]})}),X(we,{flexDirection:"column",marginBottom:2,children:X(ko,{items:[{label:"Open Org in Browser",value:"open"},{label:"Set as Default Org",value:"set-default"},{label:"Set as Default Dev Hub",value:"set-dev-hub"},{label:"Refresh Org Info",value:"refresh"},{label:"Delete Org",value:"delete"},{label:"Back to List",value:"back"}],onSelect:b=>{switch(b.value){case"open":R(f);break;case"set-default":K(f);break;case"set-dev-hub":q(f);break;case"refresh":G(f);break;case"delete":O(!0);break;case"back":p(null);break}}})}),y&&X(we,{children:Me(ce,{children:[X(Wn,{type:"dots"})," Processing..."]})}),m&&Me(we,{flexDirection:"column",borderStyle:"round",padding:1,children:[X(ce,{bold:!0,children:"Output:"}),X(ce,{children:m})]}),X(ce,{color:"gray",italic:!0,children:"Press ESC to go back"})]}):Me(we,{flexDirection:"column",children:[X(we,{marginBottom:1,children:X(ce,{bold:!0,children:"Your Salesforce Orgs"})}),l.length===0?X(ce,{children:"No orgs found. Use 'sf org login web' to authenticate with an org."}):X(we,{flexDirection:"column",children:X(ko,{items:l.map(b=>({label:`${b.isDefaultUsername?"\u2605 ":"  "}${b.alias||b.username}`,value:b.username,org:b})),onSelect:b=>j(b.org),itemComponent:({isSelected:b,label:d,org:x})=>Me(we,{children:[X(ce,{color:b?"cyan":"white",children:d}),X(ce,{children:"  "}),Me(ce,{color:"gray",children:[x.instanceUrl," ",x.isDefaultDevHub&&"(DevHub)"]})]})})}),X(we,{marginTop:1,children:X(ce,{children:"Press ESC to go back"})})]})};import{useState as Nt}from"react";import{Box as Ie,Text as Z,useInput as Aa,Newline as Hr}from"ink";import Yn from"ink-select-input";import{execa as Ma}from"execa";import Oa from"ink-spinner";import{Fragment as Ia,jsx as $,jsxs as Le}from"react/jsx-runtime";var Da=[{label:"Standard Project",value:"standard",description:"A standard Salesforce project with the default settings"},{label:"Empty Project",value:"empty",description:"Create an empty Salesforce project"},{label:"Analytics Project",value:"analytics",description:"A project with Analytics (Wave) templates"},{label:"Functions Project",value:"functions",description:"A project with Salesforce Functions support"},{label:"LWC Project",value:"lwc",description:"A project optimized for Lightning Web Components"},{label:"Package Project",value:"pkg",description:"A project for developing unlocked or managed packages"}],Qn=({onBack:r})=>{let[e,t]=Nt("type"),[o,n]=Nt("standard"),[i,l]=Nt("my-sfdx-project"),[u,a]=Nt(process.cwd()),[s,c]=Nt(""),[g,f]=Nt(!1),[p,m]=Nt("");Aa((v,k)=>{k.escape&&(e==="type"?r():t("type"))});let h=async()=>{f(!0),c("");try{let v=["project","generate","--name",i];switch(o){case"empty":v.push("--empty");break;case"analytics":v.push("--template","analytics");break;case"functions":v.push("--template","functions");break;case"lwc":v.push("--template","lwc");break;case"pkg":v.push("--template","package");break}let k=`${u}/${i}`.replace(/\/\//g,"/");v.push("--output-dir",u);let M=Ma("sf",v);M.stdout?.on("data",j=>{c(te=>te+j.toString())}),M.stderr?.on("data",j=>{c(te=>te+j.toString())}),await M,m(k),t("creating")}catch(v){c(`Error: ${v instanceof Error?v.message:String(v)}`)}finally{f(!1)}},y=()=>Le(Ie,{flexDirection:"column",children:[$(Z,{bold:!0,children:"Select Project Type"}),$(Z,{children:"Choose the type of Salesforce project you'd like to create:"}),$(Ie,{marginTop:1,marginBottom:2,children:$(Yn,{items:Da.map(v=>({...v,key:v.value})),onSelect:v=>{n(v.value),t("name")},itemComponent:({isSelected:v,label:k,description:M})=>Le(Ie,{children:[$(Z,{color:v?"cyan":"white",children:k}),$(Z,{children:"  "}),$(Z,{color:"gray",children:M})]})})}),$(Z,{color:"gray",italic:!0,children:"Use arrow keys to navigate, Enter to select, ESC to go back"})]}),C=()=>Le(Ie,{flexDirection:"column",children:[$(Z,{bold:!0,children:"Project Name"}),$(Z,{children:"Enter a name for your project (alphanumeric and hyphens only):"}),Le(Ie,{marginTop:1,marginBottom:2,children:[$(Z,{children:"Project name: "}),$(ne,{value:i,onChange:l,onSubmit:()=>t("directory"),validate:v=>/^[a-zA-Z0-9-]+$/.test(v)||"Project name can only contain letters, numbers, and hyphens"})]}),$(Z,{color:"gray",italic:!0,children:"Press Enter to continue, ESC to go back"})]}),P=()=>Le(Ie,{flexDirection:"column",children:[$(Z,{bold:!0,children:"Project Directory"}),$(Z,{children:"Where would you like to create the project?"}),Le(Ie,{marginTop:1,marginBottom:1,children:[$(Z,{children:"Directory: "}),$(ne,{value:u,onChange:a,onSubmit:h})]}),$(Ie,{marginBottom:2,children:Le(Z,{children:["Full path: ",u,"/",i]})}),$(Ie,{flexDirection:"column",marginBottom:2,children:$(Yn,{items:[{label:"Create Project",value:"create"},{label:"Change Project Type",value:"type"},{label:"Change Project Name",value:"name"},{label:"Cancel",value:"cancel"}],onSelect:v=>{switch(v.value){case"create":h();break;case"type":t("type");break;case"name":t("name");break;case"cancel":r();break}}})}),$(Z,{color:"gray",italic:!0,children:"ESC to go back"})]}),O=()=>$(Ie,{flexDirection:"column",children:g?Le(Ia,{children:[Le(Z,{children:[$(Oa,{type:"dots"})," Creating project..."]}),$(Ie,{marginTop:1,borderStyle:"round",padding:1,height:10,overflow:"hidden",children:$(Z,{children:s||"Initializing project..."})})]}):p?Le(Ie,{flexDirection:"column",children:[$(Z,{color:"green",children:"\u2713 Project created successfully!"}),$(Hr,{}),Le(Z,{children:["Project location: ",p]}),$(Hr,{}),$(Z,{children:"Next steps:"}),Le(Z,{children:["  1. ",Le(Z,{color:"cyan",children:["cd ",p.split("/").pop()]})]}),Le(Z,{children:["  2. ",$(Z,{color:"cyan",children:"sft"})," to open the TUI in your new project"]}),$(Hr,{}),$(Z,{children:"Press any key to continue..."})]}):Le(Ie,{flexDirection:"column",children:[$(Z,{color:"red",children:"Error creating project"}),$(Ie,{marginTop:1,borderStyle:"round",padding:1,height:10,overflow:"hidden",children:$(Z,{children:s||"Unknown error occurred"})}),$(Hr,{}),$(Z,{children:"Press any key to continue..."})]})});return Le(Ie,{flexDirection:"column",padding:1,children:[$(Ie,{marginBottom:1,children:$(Z,{bold:!0,children:"New Salesforce Project"})}),e==="type"&&y(),e==="name"&&C(),e==="directory"&&P(),e==="creating"&&O(),e!=="creating"&&$(Z,{color:"gray",italic:!0,children:"ESC to go back"})]})};import{useState as Pt,useEffect as La}from"react";import{Box as ue,Text as ve,useInput as _a}from"ink";import Ur from"ink-select-input";import{execa as Jn}from"execa";import Na from"ink-spinner";import{jsx as z,jsxs as je}from"react/jsx-runtime";var Xn=({onBack:r})=>{let[e,t]=Pt([]),[o,n]=Pt(!0),[i,l]=Pt(""),[u,a]=Pt(""),[s,c]=Pt(null),[g,f]=Pt("list"),[p,m]=Pt(""),[h,y]=Pt("");La(()=>{C()},[]);let C=async()=>{try{n(!0),l("");let{stdout:T}=await Jn("sf",["alias","list","--json"]),R=JSON.parse(T);if(R.status===0&&R.result){let K=Object.entries(R.result).map(([q,G])=>({alias:q,value:String(G)}));t(K)}else t([])}catch(T){l(`Failed to load aliases: ${T instanceof Error?T.message:String(T)}`),t([])}finally{n(!1)}},P=async(T,R=[])=>{try{a("");let K=Jn("sf",[T,...R]);return K.stdout?.on("data",q=>{a(G=>G+q.toString())}),K.stderr?.on("data",q=>{a(G=>G+q.toString())}),await K,await C(),!0}catch(K){return a(`Error: ${K instanceof Error?K.message:String(K)}`),!1}},O=async()=>{if(!p||!h){l("Both alias name and value are required");return}await P("alias",["set",p,h])&&(m(""),y(""),f("list"))},v=async T=>{await P("alias",["unset",T])&&(c(null),f("list"))};_a((T,R)=>{R.escape&&(g!=="list"?(f("list"),c(null)):r())});let k=()=>je(ue,{flexDirection:"column",children:[z(ue,{marginBottom:1,children:z(ve,{bold:!0,children:"Your Salesforce CLI Aliases"})}),o?z(ue,{children:je(ve,{children:[z(Na,{type:"dots"})," Loading aliases..."]})}):i?je(ve,{color:"red",children:["Error: ",i]}):e.length===0?z(ve,{children:"No aliases found. Create one to get started."}):z(ue,{flexDirection:"column",children:z(ue,{marginBottom:1,children:z(Ur,{items:[...e.map(T=>({label:`${T.alias} = ${T.value}`,value:T.alias,alias:T})),{label:"\u2795 Add New Alias",value:"add"}],onSelect:T=>{T.value==="add"?f("add"):(c(T.alias),f("info"))},itemComponent:({isSelected:T,label:R})=>z(ve,{color:T?"cyan":"white",children:R})})})}),z(ue,{marginTop:1,children:z(ve,{children:"Press ESC to go back"})})]}),M=()=>je(ue,{flexDirection:"column",children:[z(ue,{marginBottom:1,children:z(ve,{bold:!0,children:"Add New Alias"})}),je(ue,{marginBottom:1,flexDirection:"column",children:[je(ue,{marginBottom:1,children:[z(ve,{children:"Alias Name: "}),z(ne,{value:p,onChange:m,placeholder:"my-alias"})]}),je(ue,{marginBottom:2,children:[z(ve,{children:"Alias Value: "}),z(ne,{value:h,onChange:y,placeholder:"user@example.com or 00D..."})]}),z(ue,{flexDirection:"column",marginBottom:2,children:z(Ur,{items:[{label:"Create Alias",value:"create"},{label:"Cancel",value:"cancel"}],onSelect:T=>{T.value==="create"?O():f("list")}})})]}),z(ve,{color:"gray",italic:!0,children:"ESC to go back"})]}),j=()=>s?je(ue,{flexDirection:"column",children:[z(ue,{marginBottom:1,children:je(ve,{bold:!0,children:["Alias: ",s.alias]})}),z(ue,{marginBottom:2,children:je(ve,{children:["Value: ",s.value]})}),z(ue,{flexDirection:"column",marginBottom:2,children:z(Ur,{items:[{label:"Edit Alias",value:"edit"},{label:"Delete Alias",value:"delete"},{label:"Back to List",value:"back"}],onSelect:T=>{switch(T.value){case"edit":m(s.alias),y(s.value),f("edit");break;case"delete":f("delete");break;case"back":f("list"),c(null);break}}})}),z(ve,{color:"gray",italic:!0,children:"ESC to go back"})]}):null,te=()=>s?je(ue,{flexDirection:"column",children:[z(ue,{marginBottom:1,children:z(ve,{bold:!0,children:"Delete Alias"})}),je(ue,{marginBottom:2,children:[je(ve,{children:["Are you sure you want to delete the alias '",s.alias,"'?"]}),je(ve,{children:["Value: ",s.value]})]}),z(ue,{flexDirection:"column",marginBottom:2,children:z(Ur,{items:[{label:"\u2705 Yes, delete it",value:"confirm"},{label:"\u274C No, keep it",value:"cancel"}],onSelect:T=>{T.value==="confirm"?v(s.alias):f("info")}})}),z(ve,{color:"gray",italic:!0,children:"ESC to go back"})]}):null;return je(ue,{flexDirection:"column",padding:1,children:[z(ue,{marginBottom:1,children:z(ve,{bold:!0,children:"Salesforce CLI Alias Manager"})}),g==="list"&&k(),g==="add"&&M(),g==="info"&&j(),g==="delete"&&te(),u&&z(ue,{marginTop:1,borderStyle:"round",padding:1,children:z(ve,{children:u})}),i&&z(ue,{marginTop:1,children:z(ve,{color:"red",children:i})})]})};import{useState as Tt}from"react";import{Box as Ee,Text as ee,useInput as Fa,Newline as Tr}from"ink";import Zn from"ink-select-input";import{execa as ja}from"execa";import $a from"ink-spinner";import Ha from"open";import{Fragment as qa,jsx as N,jsxs as _e}from"react/jsx-runtime";var Ua=[{label:"Web Login (Recommended)",value:"web",description:"Opens a browser window to log in to your org",requiresInput:!1},{label:"JWT Bearer Flow",value:"jwt",description:"Authenticate using a JWT bearer token",requiresInput:!0},{label:"Device Code Flow",value:"device",description:"Authenticate using a device code",requiresInput:!1},{label:"Access Token",value:"token",description:"Authenticate with an existing access token",requiresInput:!0},{label:"SOAP Username-Password",value:"soap",description:"Authenticate with username and password (not recommended)",requiresInput:!0}],ei=({onBack:r})=>{let[e,t]=Tt("method"),[o,n]=Tt("web"),[i,l]=Tt(""),[u,a]=Tt(""),[s,c]=Tt(""),[g,f]=Tt(""),[p,m]=Tt(!1),[h,y]=Tt(""),[C,P]=Tt("");Fa((T,R)=>{R.escape&&(e==="method"?r():t("method"))});let O=async()=>{m(!0),c(""),f("");try{let T=["org","login"],R;switch(o){case"web":T.push("web","--browser","chrome"),i&&T.push("--alias",i),u&&T.push("--username",u);break;case"jwt":T.push("jwt","--username",u,"--jwt-key-file","path/to/server.key"),i&&T.push("--alias",i);break;case"device":T.push("device","--browser","chrome"),i&&T.push("--alias",i);break;case"token":T.push("access-token","--instance-url","https://login.salesforce.com","--access-token","YOUR_TOKEN"),i&&T.push("--alias",i);break;case"soap":T.push("soap","--username",u,"--password","YOUR_PASSWORD"),i&&T.push("--alias",i);break}R=ja("sf",T),R.stdout?.on("data",K=>{let q=K.toString();if(c(G=>G+q),o==="web"&&q.includes("https://")){let G=q.match(/https?:\/\/[^\s]+/);G&&(y(G[0]),Ha(G[0]))}if(o==="device"){if(q.includes("https://")){let G=q.match(/https?:\/\/[^\s]+/);G&&y(G[0])}if(q.includes("code:")){let G=q.match(/code:\s*([^\s]+)/);G&&P(G[1])}}}),R.stderr?.on("data",K=>{c(q=>q+K.toString())}),await R,t("success")}catch(T){f(T instanceof Error?T.message:"Unknown error occurred"),t("error")}finally{m(!1)}},v=()=>_e(Ee,{flexDirection:"column",children:[N(ee,{bold:!0,children:"Authentication Method"}),N(ee,{children:"Choose how you'd like to authenticate with Salesforce:"}),N(Ee,{marginTop:1,marginBottom:2,children:N(Zn,{items:Ua.map(T=>({...T,key:T.value})),onSelect:T=>{n(T.value),T.requiresInput?t("input"):(t("authenticating"),O())},itemComponent:({isSelected:T,label:R,description:K})=>_e(Ee,{children:[N(ee,{color:T?"cyan":"white",children:R}),N(ee,{children:"  "}),N(ee,{color:"gray",children:K})]})})}),N(ee,{color:"gray",italic:!0,children:"Use arrow keys to navigate, Enter to select, ESC to go back"})]}),k=()=>_e(Ee,{flexDirection:"column",children:[N(ee,{bold:!0,children:"Authentication Details"}),_e(ee,{children:["Please provide the required information for ",o," authentication:"]}),_e(Ee,{marginTop:1,marginBottom:2,flexDirection:"column",children:[_e(Ee,{marginBottom:1,children:[N(ee,{children:"Alias (optional): "}),N(ne,{value:i,onChange:l,placeholder:"my-org-alias"})]}),_e(Ee,{marginBottom:2,children:[N(ee,{children:"Username: "}),N(ne,{value:u,onChange:a,placeholder:"user@example.com"})]}),N(Ee,{flexDirection:"column",marginTop:1,children:N(Zn,{items:[{label:"Authenticate",value:"auth"},{label:"Back",value:"back"}],onSelect:T=>{T.value==="auth"?(t("authenticating"),O()):t("method")}})})]}),N(ee,{color:"gray",italic:!0,children:"ESC to go back"})]}),M=()=>N(Ee,{flexDirection:"column",children:p?_e(qa,{children:[_e(ee,{children:[N($a,{type:"dots"})," Authenticating..."]}),h&&_e(Ee,{marginTop:1,marginBottom:1,children:[N(ee,{children:"Please complete authentication in your browser:"}),N(ee,{color:"cyan",underline:!0,children:h})]}),C&&N(Ee,{marginTop:1,marginBottom:1,children:_e(ee,{children:["Your device code: ",N(ee,{bold:!0,children:C})]})}),N(Ee,{marginTop:1,borderStyle:"round",padding:1,height:10,overflow:"hidden",children:N(ee,{children:s||"Starting authentication..."})})]}):N(ee,{children:"Authentication complete!"})}),j=()=>_e(Ee,{flexDirection:"column",children:[N(ee,{color:"green",children:"\u2713 Authentication successful!"}),N(Tr,{}),N(ee,{children:"You are now authenticated with Salesforce."}),i&&_e(ee,{children:["Alias: ",N(ee,{bold:!0,children:i})]}),N(Tr,{}),N(ee,{children:"Press any key to continue..."})]}),te=()=>_e(Ee,{flexDirection:"column",children:[N(ee,{color:"red",children:"\u2717 Authentication failed"}),N(Tr,{}),_e(ee,{children:["Error: ",g||"Unknown error occurred"]}),N(Tr,{}),N(Ee,{borderStyle:"round",padding:1,height:10,overflow:"hidden",children:N(ee,{children:s||"No additional details available"})}),N(Tr,{}),N(ee,{children:"Press any key to continue..."})]});return _e(Ee,{flexDirection:"column",padding:1,children:[N(Ee,{marginBottom:1,children:N(ee,{bold:!0,children:"Salesforce Authentication"})}),e==="method"&&v(),e==="input"&&k(),e==="authenticating"&&M(),e==="success"&&j(),e==="error"&&te(),(e==="success"||e==="error")&&N(Ee,{marginTop:1,children:N(ee,{children:"Press any key to continue..."})}),e!=="success"&&e!=="error"&&e!=="authenticating"&&N(ee,{color:"gray",italic:!0,children:"ESC to go back"})]})};import{useState as rt,useEffect as Va}from"react";import{Box as de,Text as Re,useInput as Ga}from"ink";import qr from"ink-select-input";import{execa as ti}from"execa";import Ao from"ink-spinner";import{Fragment as Wa,jsx as H,jsxs as $e}from"react/jsx-runtime";var za=[{id:"deploy",label:"Deploy Metadata",description:"Deploy metadata to an org",requiresTargetOrg:!0,requiresManifest:!0},{id:"retrieve",label:"Retrieve Metadata",description:"Retrieve metadata from an org",requiresSourceOrg:!0,requiresManifest:!0},{id:"deploy-dir",label:"Deploy Directory",description:"Deploy all metadata from a directory",requiresTargetOrg:!0},{id:"retrieve-dir",label:"Retrieve to Directory",description:"Retrieve metadata to a directory",requiresSourceOrg:!0},{id:"validate",label:"Validate Deployment",description:"Validate a deployment without making changes",requiresTargetOrg:!0,requiresManifest:!0},{id:"list",label:"List Metadata",description:"List metadata in an org",requiresSourceOrg:!0},{id:"describe",label:"Describe Metadata",description:"Describe metadata types in an org",requiresSourceOrg:!0}],ri=({onBack:r})=>{let{errors:e,dismissError:t}=fr(),[o,n]=rt(null),[i,l]=rt(!1),[u,a]=rt(""),[s,c]=rt(""),[g,f]=rt(""),[p,m]=rt(""),[h,y]=rt("manifest/package.xml"),[C,P]=rt(""),[O,v]=rt("force-app/main/default"),[k,M]=rt(!1),[j,te]=rt([]),T=async()=>{try{l(!0);let{stdout:d}=await ti("sf",["org","list","--json"]),x=JSON.parse(d);return x.status===0&&x.result&&Array.isArray(x.result.nonScratchOrgs)?[...(x.result.nonScratchOrgs||[]).map(B=>({username:B.username,isDefault:B.isDefaultUsername||!1,alias:B.alias||"",connectedStatus:B.connectedStatus||""})),...(x.result.scratchOrgs||[]).map(B=>({username:B.username,isDefault:B.isDefaultUsername||!1,alias:B.alias||"",connectedStatus:B.connectedStatus||"",isScratch:!0}))]:(me.reportError("Failed to load orgs",{severity:"MEDIUM",category:nr.SYSTEM,context:"MetadataTools.loadOrgs",details:{result:x}}),[])}catch(d){return me.reportCommandError("Failed to load orgs from Salesforce CLI",d instanceof Error?d:new Error(String(d)),{command:"sf org list --json"}),[]}finally{l(!1)}},R=async(d,x=[])=>{try{M(!0),a(""),c("");let S=ti("sf",[d,...x]);return S.stdout?.on("data",B=>{a(re=>re+B.toString())}),S.stderr?.on("data",B=>{a(re=>re+B.toString())}),await S,!0}catch(S){let B=`Error: ${S instanceof Error?S.message:String(S)}`;return c(B),me.reportCommandError(`Failed to execute Salesforce CLI command: sf ${d} ${x.join(" ")}`,S instanceof Error?S:new Error(String(S)),{command:d,args:x}),!1}finally{M(!1)}},K=d=>{n(d)},q=async()=>{if(o)try{M(!0),a(""),c("");let d="project",x=[];if(o.requiresTargetOrg&&!g){c("Target org is required for this operation"),me.reportValidationError(`Target org is required for the ${o.label} operation`,void 0,{tool:o.id}),M(!1);return}if(o.requiresSourceOrg&&!p){c("Source org is required for this operation"),me.reportValidationError(`Source org is required for the ${o.label} operation`,void 0,{tool:o.id}),M(!1);return}if(o.requiresManifest&&!h){c("Manifest file is required for this operation"),me.reportValidationError(`Manifest file is required for the ${o.label} operation`,void 0,{tool:o.id}),M(!1);return}switch(o.id){case"deploy":d="project",x.push("deploy","start","--manifest",h),g&&x.push("--target-org",g);break;case"retrieve":d="project",x.push("retrieve","start","--manifest",h),p&&x.push("--source-org",p);break;case"deploy-dir":d="project",x.push("deploy","start","--source-dir",O),g&&x.push("--target-org",g);break;case"retrieve-dir":d="project",x.push("retrieve","start","--output-dir",O),p&&x.push("--source-org",p);break;case"validate":d="project",x.push("deploy","validate","--manifest",h),g&&x.push("--target-org",g);break;case"list":d="org",x.push("list","metadata"),p&&x.push("--target-org",p),C&&x.push("--metadata",C);break;case"describe":d="org",x.push("describe","metadata"),p&&x.push("--target-org",p);break}await R(d,x)}catch(d){let x=`Failed to execute ${o.label}: ${d instanceof Error?d.message:String(d)}`;c(x),me.reportError(`Failed to execute ${o.label}`,{error:d instanceof Error?d:new Error(String(d)),severity:"MEDIUM",category:"COMMAND",context:"MetadataTools.executeTool",details:{tool:o},userAction:"Check the command parameters and try again."})}finally{M(!1)}};Va(()=>{(async()=>{let x=await T();te(x)})()},[]),Ga((d,x)=>{x.escape&&(o?n(null):r())});let G=()=>$e(de,{flexDirection:"column",children:[H(de,{marginBottom:1,children:H(Re,{bold:!0,children:"Metadata Tools"})}),H(de,{marginBottom:2,children:H(qr,{items:za.map(d=>({...d,label:`${d.label} - ${d.description}`,value:d.id})),onSelect:d=>K(d),itemComponent:({isSelected:d,label:x})=>H(Re,{color:d?"cyan":"white",children:x})})}),H(Re,{color:"gray",italic:!0,children:"Use arrow keys to navigate, Enter to select, ESC to go back"})]}),ae=()=>o?$e(de,{flexDirection:"column",children:[H(de,{marginBottom:1,children:H(Re,{bold:!0,children:o.label})}),H(de,{marginBottom:1,children:H(Re,{children:o.description})}),$e(de,{flexDirection:"column",marginTop:1,children:[o.requiresTargetOrg&&$e(de,{marginBottom:1,flexDirection:"column",children:[H(Re,{children:"Target Org:"}),j.length>0?H(de,{marginTop:1,children:H(qr,{items:j.map(d=>({label:`${d.username}${d.alias?` (${d.alias})`:""}${d.isDefault?" [default]":""}`,value:d.username})),onSelect:d=>f(d.value)})}):i?H(de,{marginTop:1,children:$e(Re,{children:[H(Ao,{type:"dots"})," Loading orgs..."]})}):$e(de,{marginTop:1,children:[H(ne,{value:g,onChange:f,placeholder:"username or alias"}),H(Re,{color:"gray",marginLeft:1,children:"(No orgs found. Manual entry required)"})]})]}),o.requiresSourceOrg&&$e(de,{marginBottom:1,flexDirection:"column",children:[H(Re,{children:"Source Org:"}),j.length>0?H(de,{marginTop:1,children:H(qr,{items:j.map(d=>({label:`${d.username}${d.alias?` (${d.alias})`:""}${d.isDefault?" [default]":""}`,value:d.username})),onSelect:d=>m(d.value)})}):i?H(de,{marginTop:1,children:$e(Re,{children:[H(Ao,{type:"dots"})," Loading orgs..."]})}):$e(de,{marginTop:1,children:[H(ne,{value:p,onChange:m,placeholder:"username or alias"}),H(Re,{color:"gray",marginLeft:1,children:"(No orgs found. Manual entry required)"})]})]}),o.requiresManifest&&$e(de,{marginBottom:1,children:[H(Re,{children:"Manifest File: "}),H(ne,{value:h,onChange:y,placeholder:"path/to/package.xml"})]}),(o.id==="deploy-dir"||o.id==="retrieve-dir")&&$e(de,{marginBottom:1,children:[H(Re,{children:"Directory: "}),H(ne,{value:O,onChange:v,placeholder:"path/to/directory"})]}),o.id==="list"&&$e(de,{marginBottom:1,children:[H(Re,{children:"Metadata Type (optional): "}),H(ne,{value:C,onChange:P,placeholder:"ApexClass,CustomObject,..."})]}),H(de,{marginTop:2,marginBottom:2,children:H(qr,{items:[{label:"Run Command",value:"run"},{label:"Back to Tools",value:"back"}],onSelect:d=>{d.value==="run"?q():n(null)}})})]}),H(Re,{color:"gray",italic:!0,children:"ESC to go back"})]}):null,b=()=>!u&&!s?null:$e(de,{marginTop:2,flexDirection:"column",children:[H(de,{marginBottom:1,children:H(Re,{bold:!0,children:"Output:"})}),H(de,{borderStyle:"round",padding:1,height:10,overflow:"hidden",children:H(Re,{children:s||u})})]});return H(de,{flexDirection:"column",padding:1,children:k?H(de,{children:$e(Re,{children:[H(Ao,{type:"dots"})," Processing..."]})}):o?$e(Wa,{children:[ae(),b()]}):G()})};import{useState as dt}from"react";import{Box as W,Text as ie,useInput as Ka}from"ink";import Yt from"ink-select-input";import{execa as Ya}from"execa";import Qa from"ink-spinner";import{Fragment as Xa,jsx as E,jsxs as Ne}from"react/jsx-runtime";var Ja=[{id:"apex",label:"Execute Anonymous Apex",description:"Execute anonymous Apex code",requiresTargetOrg:!0},{id:"flow",label:"Run Flow",description:"Run a Flow or Process Builder flow",requiresTargetOrg:!0},{id:"test",label:"Run Tests",description:"Run Apex tests",requiresTargetOrg:!0},{id:"soql",label:"Execute SOQL Query",description:"Run a SOQL query",requiresTargetOrg:!0},{id:"data-tree",label:"View Data Tree",description:"Explore sObject data relationships",requiresTargetOrg:!0}],oi=({onBack:r})=>{let[e,t]=dt(null),[o,n]=dt(!1),[i,l]=dt(""),[u,a]=dt(""),[s,c]=dt(""),[g,f]=dt("System.debug('Hello from SF TUI!');"),[p,m]=dt(""),[h,y]=dt("SELECT Id, Name FROM Account LIMIT 10"),[C,P]=dt(""),[O,v]=dt(!1),k=async(d,x=[])=>{try{v(!0),l(""),a("");let S=Ya("sf",[d,...x]);return S.stdout?.on("data",B=>{l(re=>re+B.toString())}),S.stderr?.on("data",B=>{l(re=>re+B.toString())}),await S,!0}catch(S){return a(`Error: ${S instanceof Error?S.message:String(S)}`),!1}finally{v(!1)}},M=d=>{t(d)},j=async()=>{if(e)try{v(!0),l(""),a("");let d="data",x=[];switch(e.id){case"apex":d="apex",x.push("run","--code",`"${g}"`),s&&x.push("--target-org",s);break;case"flow":d="flow",x.push("run","--flow",p),s&&x.push("--target-org",s);break;case"test":d="apex",x.push("run","test"),C&&x.push("--class-names",C),s&&x.push("--target-org",s);break;case"soql":d="data",x.push("query","--query",`"${h}"`),s&&x.push("--target-org",s);break;case"data-tree":d="data",x.push("tree","view"),s&&x.push("--target-org",s);break}await k(d,x)}catch(d){a(`Failed to execute ${e.label}: ${d instanceof Error?d.message:String(d)}`)}finally{v(!1)}};Ka((d,x)=>{x.escape&&(e?t(null):r())});let te=()=>Ne(W,{flexDirection:"column",children:[E(W,{marginBottom:1,children:E(ie,{bold:!0,children:"Run Tools"})}),E(W,{marginBottom:2,children:E(Yt,{items:Ja.map(d=>({...d,label:`${d.label} - ${d.description}`,value:d.id})),onSelect:d=>M(d),itemComponent:({isSelected:d,label:x})=>E(ie,{color:d?"cyan":"white",children:x})})}),E(ie,{color:"gray",italic:!0,children:"Use arrow keys to navigate, Enter to select, ESC to go back"})]}),T=()=>Ne(W,{flexDirection:"column",children:[E(W,{marginBottom:1,children:E(ie,{bold:!0,children:"Execute Anonymous Apex"})}),E(W,{marginBottom:1,children:E(ie,{children:"Enter your Apex code:"})}),E(W,{marginBottom:2,borderStyle:"round",padding:1,height:10,overflow:"hidden",children:E(ne,{value:g,onChange:f,multiline:!0,onSubmit:j})}),Ne(W,{marginBottom:2,children:[E(ie,{children:"Target Org: "}),E(ne,{value:s,onChange:c,placeholder:"username or alias"})]}),E(W,{marginTop:1,marginBottom:2,children:E(Yt,{items:[{label:"Execute",value:"run"},{label:"Back to Tools",value:"back"}],onSelect:d=>{d.value==="run"?j():t(null)}})}),E(ie,{color:"gray",italic:!0,children:"ESC to go back"})]}),R=()=>Ne(W,{flexDirection:"column",children:[E(W,{marginBottom:1,children:E(ie,{bold:!0,children:"Run Flow"})}),Ne(W,{marginBottom:2,children:[E(ie,{children:"Flow API Name: "}),E(ne,{value:p,onChange:m,placeholder:"My_Flow_API_Name"})]}),Ne(W,{marginBottom:2,children:[E(ie,{children:"Target Org: "}),E(ne,{value:s,onChange:c,placeholder:"username or alias"})]}),E(W,{marginTop:1,marginBottom:2,children:E(Yt,{items:[{label:"Run Flow",value:"run"},{label:"Back to Tools",value:"back"}],onSelect:d=>{d.value==="run"?j():t(null)}})}),E(ie,{color:"gray",italic:!0,children:"ESC to go back"})]}),K=()=>Ne(W,{flexDirection:"column",children:[E(W,{marginBottom:1,children:E(ie,{bold:!0,children:"Run Apex Tests"})}),Ne(W,{marginBottom:2,children:[E(ie,{children:"Test Classes (comma-separated, leave empty for all tests):"}),E(ne,{value:C,onChange:P,placeholder:"MyTestClass,AnotherTestClass"})]}),Ne(W,{marginBottom:2,children:[E(ie,{children:"Target Org: "}),E(ne,{value:s,onChange:c,placeholder:"username or alias"})]}),E(W,{marginTop:1,marginBottom:2,children:E(Yt,{items:[{label:"Run Tests",value:"run"},{label:"Back to Tools",value:"back"}],onSelect:d=>{d.value==="run"?j():t(null)}})}),E(ie,{color:"gray",italic:!0,children:"ESC to go back"})]}),q=()=>Ne(W,{flexDirection:"column",children:[E(W,{marginBottom:1,children:E(ie,{bold:!0,children:"Execute SOQL Query"})}),E(W,{marginBottom:1,children:E(ie,{children:"Enter your SOQL query:"})}),E(W,{marginBottom:2,borderStyle:"round",padding:1,height:5,overflow:"hidden",children:E(ne,{value:h,onChange:y,onSubmit:j})}),Ne(W,{marginBottom:2,children:[E(ie,{children:"Target Org: "}),E(ne,{value:s,onChange:c,placeholder:"username or alias"})]}),E(W,{marginTop:1,marginBottom:2,children:E(Yt,{items:[{label:"Run Query",value:"run"},{label:"Back to Tools",value:"back"}],onSelect:d=>{d.value==="run"?j():t(null)}})}),E(ie,{color:"gray",italic:!0,children:"ESC to go back"})]}),G=()=>Ne(W,{flexDirection:"column",children:[E(W,{marginBottom:1,children:E(ie,{bold:!0,children:"View Data Tree"})}),E(W,{marginBottom:2,children:E(ie,{children:"Explore sObject data relationships in your org."})}),Ne(W,{marginBottom:2,children:[E(ie,{children:"Target Org: "}),E(ne,{value:s,onChange:c,placeholder:"username or alias"})]}),E(W,{marginTop:1,marginBottom:2,children:E(Yt,{items:[{label:"View Data Tree",value:"run"},{label:"Back to Tools",value:"back"}],onSelect:d=>{d.value==="run"?j():t(null)}})}),E(ie,{color:"gray",italic:!0,children:"ESC to go back"})]}),ae=()=>{if(!e)return null;switch(e.id){case"apex":return T();case"flow":return R();case"test":return K();case"soql":return q();case"data-tree":return G();default:return null}},b=()=>!i&&!u?null:Ne(W,{marginTop:2,flexDirection:"column",children:[E(W,{marginBottom:1,children:E(ie,{bold:!0,children:"Output:"})}),E(W,{borderStyle:"round",padding:1,height:10,overflow:"hidden",children:E(ie,{children:u||i})})]});return E(W,{flexDirection:"column",padding:1,children:O?E(W,{children:Ne(ie,{children:[E(Qa,{type:"dots"})," Processing..."]})}):e?Ne(Xa,{children:[ae(),b()]}):te()})};import{useState as ft,useEffect as Za}from"react";import{Box as oe,Text as se,useInput as el}from"ink";import Vr from"ink-select-input";import{execa as Mo}from"execa";import ni from"ink-spinner";import{Fragment as tl,jsx as F,jsxs as he}from"react/jsx-runtime";var ii=({onBack:r})=>{let[e,t]=ft([]),[o,n]=ft(!0),[i,l]=ft(""),[u,a]=ft(""),[s,c]=ft(null),[g,f]=ft(!1),[p,m]=ft("list"),[h,y]=ft(""),[C,P]=ft(""),[O,v]=ft(!1);Za(()=>{k()},[]);let k=async()=>{try{n(!0),l("");let{stdout:S}=await Mo("sf",["plugins","--json"]),B=JSON.parse(S);Array.isArray(B)?t(B):t([])}catch(S){l(`Failed to load plugins: ${S instanceof Error?S.message:String(S)}`),t([])}finally{n(!1)}},M=async()=>{try{v(!0),a("");let S=Mo("sf",["plugins","update","--json"]);S.stdout?.on("data",B=>{a(re=>re+B.toString())}),S.stderr?.on("data",B=>{a(re=>re+B.toString())}),await S,await k()}catch(S){l(`Error checking for updates: ${S instanceof Error?S.message:String(S)}`)}finally{v(!1)}},j=async(S,B=[])=>{try{f(!0),a("");let re=Mo("sf",[S,...B]);return re.stdout?.on("data",pe=>{a(be=>be+pe.toString())}),re.stderr?.on("data",pe=>{a(be=>be+pe.toString())}),await re,await k(),!0}catch(re){return a(`Error: ${re instanceof Error?re.message:String(re)}`),!1}finally{f(!1)}},te=async S=>{await j("plugins",["install",S])&&(P(""),m("list"))},T=async S=>{await j("plugins",["update",S])},R=async S=>{await j("plugins",["uninstall",S]),c(null),m("list")},K=async()=>{await j("plugins",["update"])},q=S=>{c(S),m("details")};el((S,B)=>{B.escape&&(p!=="list"?(m("list"),c(null)):r())});let G=()=>{let S=e.filter(B=>B.name.toLowerCase().includes(h.toLowerCase()));return he(oe,{flexDirection:"column",children:[F(oe,{marginBottom:1,children:F(se,{bold:!0,children:"Installed Plugins"})}),he(oe,{marginBottom:1,children:[F(se,{children:"Search: "}),F(ne,{value:h,onChange:y,placeholder:"Filter plugins..."})]}),o?F(oe,{children:he(se,{children:[F(ni,{type:"dots"})," Loading plugins..."]})}):i?he(se,{color:"red",children:["Error: ",i]}):S.length===0?F(se,{children:"No plugins found. Install some plugins to get started."}):F(oe,{flexDirection:"column",children:F(oe,{marginBottom:1,children:F(Vr,{items:[...S.map(B=>({label:`${B.name}@${B.version} ${B.updateAvailable?"\u{1F504}":""}`,value:B.name,plugin:B})),{label:"\u2795 Install New Plugin",value:"install"},{label:"\u{1F504} Update All Plugins",value:"update-all"},{label:"\u{1F50D} Check for Updates",value:"check-updates"}],onSelect:B=>{B.value==="install"?m("install"):B.value==="update-all"?K():B.value==="check-updates"?M():q(B.plugin)},itemComponent:({isSelected:B,label:re,plugin:pe})=>he(oe,{children:[F(se,{color:B?"cyan":"white",children:re}),pe?.updateAvailable&&he(se,{color:"yellow",children:[" (update to ",pe.latestVersion," available)"]})]})})})}),F(oe,{marginTop:1,children:F(se,{children:"Press ESC to go back"})})]})},ae=()=>s?he(oe,{flexDirection:"column",children:[F(oe,{marginBottom:1,children:he(se,{bold:!0,children:["Plugin: ",s.name]})}),he(oe,{marginBottom:1,children:[he(se,{children:["Version: ",s.version]}),s.updateAvailable&&he(se,{color:"yellow",children:["Update available: ",s.latestVersion]})]}),F(oe,{marginBottom:1,children:he(se,{children:["Type: ",s.type]})}),s.location&&F(oe,{marginBottom:1,children:he(se,{children:["Location: ",s.location]})}),s.homepage&&F(oe,{marginBottom:2,children:he(se,{children:["Homepage: ",s.homepage]})}),F(oe,{flexDirection:"column",marginBottom:2,children:F(Vr,{items:[...s.updateAvailable?[{label:`\u{1F504} Update to v${s.latestVersion}`,value:"update"}]:[],{label:"Uninstall Plugin",value:"uninstall"},{label:"Back to List",value:"back"}],onSelect:S=>{switch(S.value){case"update":m("update"),T(s.name);break;case"uninstall":m("uninstall");break;case"back":m("list"),c(null);break}}})}),F(se,{color:"gray",italic:!0,children:"ESC to go back"})]}):null,b=()=>he(oe,{flexDirection:"column",children:[F(oe,{marginBottom:1,children:F(se,{bold:!0,children:"Install New Plugin"})}),he(oe,{marginBottom:2,children:[F(se,{children:"Plugin name or npm package:"}),F(ne,{value:C,onChange:P,placeholder:"@salesforce/plugin-name or plugin-name"})]}),F(oe,{marginBottom:2,children:F(se,{children:"Example: @salesforce/plugin-org, @salesforce/plugin-apex, etc."})}),F(oe,{flexDirection:"column",marginBottom:2,children:F(Vr,{items:[{label:"Install",value:"install"},{label:"Cancel",value:"cancel"}],onSelect:S=>{S.value==="install"&&C?te(C):m("list")}})}),F(se,{color:"gray",italic:!0,children:"ESC to go back"})]}),d=()=>s?he(oe,{flexDirection:"column",children:[F(oe,{marginBottom:1,children:F(se,{bold:!0,children:"Uninstall Plugin"})}),he(oe,{marginBottom:2,children:[he(se,{children:["Are you sure you want to uninstall ",s.name,"?"]}),he(se,{children:["Version: ",s.version]})]}),F(oe,{flexDirection:"column",marginBottom:2,children:F(Vr,{items:[{label:"\u2705 Yes, uninstall it",value:"confirm"},{label:"\u274C No, keep it",value:"cancel"}],onSelect:S=>{S.value==="confirm"?R(s.name):m("details")}})}),F(se,{color:"gray",italic:!0,children:"ESC to go back"})]}):null,x=()=>!u&&!i?null:he(oe,{marginTop:2,flexDirection:"column",children:[F(oe,{marginBottom:1,children:F(se,{bold:!0,children:"Output:"})}),F(oe,{borderStyle:"round",padding:1,height:10,overflow:"hidden",children:F(se,{children:i||u})})]});return F(oe,{flexDirection:"column",padding:1,children:g||O?F(oe,{children:he(se,{children:[F(ni,{type:"dots"})," ",O?"Checking for updates...":"Processing..."]})}):he(tl,{children:[p==="list"&&G(),p==="details"&&ae(),p==="install"&&b(),p==="uninstall"&&d(),x()]})})};import{useState as ui}from"react";import{Box as vr,Text as Qt,useInput as fl}from"ink";import pl from"ink-select-input";J();import{useState as si,useEffect as rl}from"react";import{Box as vt,Text as fe,useInput as ol}from"ink";import nl from"ink-select-input";import{jsx as xe,jsxs as Ue}from"react/jsx-runtime";var il=[{label:"\u{1F31E} Base Theme",value:"base",description:"Default light theme with Salesforce colors"},{label:"\u{1F319} Dark Theme",value:"dark",description:"Dark theme for low-light environments"},{label:"\u{1F50D} High Contrast",value:"highContrast",description:"Enhanced contrast for better accessibility"},{label:"\u26A1 Salesforce Lightning",value:"salesforce",description:"Official Salesforce Lightning color scheme"}],sl=({onBack:r,onThemeChange:e})=>{let{state:t,setTheme:o}=Or(),[n,i]=si(t.themeName),[l,u]=si(t.themeName),a=I();return ol((f,p)=>{p.escape&&r()}),rl(()=>{e&&e(n),o(n)},[n,e,o]),Ue(vt,{flexDirection:"column",children:[xe(vt,{marginBottom:1,children:xe(fe,{bold:!0,children:"Theme Settings"})}),Ue(vt,{flexDirection:"row",gap:2,children:[Ue(vt,{flexDirection:"column",width:"50%",children:[xe(fe,{bold:!0,children:"Select a Theme"}),xe(nl,{items:il,onSelect:f=>{i(f.value)},onHighlight:f=>{u(f.value)},itemComponent:({isSelected:f,label:p,item:m})=>Ue(vt,{children:[xe(fe,{color:f?a.colors.primary:a.colors.text,children:p}),xe(fe,{children:" "}),xe(fe,{color:"gray",children:m.description})]})})]}),xe(vt,{width:"50%",children:xe(({themeName:f})=>{let p=Ct(f);return xe(Mt,{theme:p,children:xe(lt,{title:"Theme Preview",borderStyle:"round",padding:1,width:40,children:Ue(vt,{flexDirection:"column",children:[Ue(fe,{children:["Primary: ",xe(fe,{color:p.colors.primary,children:"\u25A0\u25A0\u25A0"})]}),Ue(fe,{children:["Secondary: ",xe(fe,{color:p.colors.secondary,children:"\u25A0\u25A0\u25A0"})]}),Ue(fe,{children:["Success: ",xe(fe,{color:p.colors.success,children:"\u25A0\u25A0\u25A0"})]}),Ue(fe,{children:["Warning: ",xe(fe,{color:p.colors.warning,children:"\u25A0\u25A0\u25A0"})]}),Ue(fe,{children:["Error: ",xe(fe,{color:p.colors.error,children:"\u25A0\u25A0\u25A0"})]}),Ue(fe,{children:["Info: ",xe(fe,{color:p.colors.info,children:"\u25A0\u25A0\u25A0"})]}),Ue(fe,{children:["Text: ",xe(fe,{color:p.colors.text,children:"\u25A0\u25A0\u25A0"})]}),Ue(fe,{children:["Border: ",xe(fe,{color:p.colors.border,children:"\u25A0\u25A0\u25A0"})]})]})})})},{themeName:l})})]}),xe(vt,{marginTop:1,children:Ue(fe,{children:["Current theme: ",xe(fe,{bold:!0,children:n})]})}),xe(vt,{marginTop:1,children:xe(fe,{color:"gray",italic:!0,children:"Press Esc to go back"})})]})},ai=sl;J();import{useState as pt,useEffect as al}from"react";import{Box as Ce,Text as U,useInput as ll}from"ink";import cl from"ink-select-input";import{Fragment as dl,jsx as _,jsxs as Pe}from"react/jsx-runtime";var li=r=>{let e=[];r.ctrl&&e.push("Ctrl"),r.alt&&e.push("Alt"),r.shift&&e.push("Shift");let t=r.key;return t==="escape"?t="Esc":t==="return"?t="Enter":t==="space"&&(t="Space"),e.push(t.length===1?t.toUpperCase():t),e.join("+")},Oo={help:"Show help screen",back:"Go back/cancel",quit:"Quit the application",toggleStatusBar:"Show/hide status bar",toggleTheme:"Switch between themes",refresh:"Refresh current view",save:"Save changes",create:"Create new item",delete:"Delete selected item",search:"Search",navigate:"Navigate"},ul=({onBack:r})=>{let{shortcuts:e}=Dr(),t=I(),[o,n]=pt([]),[i,l]=pt(null),[u,a]=pt(!1),[s,c]=pt(""),[g,f]=pt(!1),[p,m]=pt(!1),[h,y]=pt(!1),[C,P]=pt(!1),[O,v]=pt(""),[k,M]=pt(!1);al(()=>{j()},[e]);let j=()=>{let b=st.get("keyboardShortcuts")||{},d={...e,...b},x=Object.entries(d).map(([S,B])=>({label:`${Oo[B.action]||B.action}`,value:S,shortcut:B}));n(x)};ll((b,d)=>{if(k){if(d.escape){M(!1);return}let x="";d.return?x="return":d.escape?x="escape":d.tab?x="tab":d.backspace?x="backspace":d.delete?x="delete":d.upArrow?x="up":d.downArrow?x="down":d.leftArrow?x="left":d.rightArrow?x="right":d.meta?x="meta":d.space?x="space":b&&(x=b),x&&(c(x),f(d.ctrl),m(d.alt),y(d.shift),M(!1),a(!0));return}if(u){if(d.escape){a(!1);return}if(d.return){te();return}if(b==="c"){f(!g);return}if(b==="a"){m(!p);return}if(b==="s"){y(!h);return}return}if(!C){if(i&&!u&&b==="k"){K();return}if(b==="r"&&!i){q();return}d.escape&&(i?l(null):r())}});let te=()=>{if(!i)return;let b=o.find(d=>d.shortcut.key===s&&d.shortcut.ctrl===g&&d.shortcut.alt===p&&d.shortcut.shift===h&&d.shortcut.action!==i.action);if(b){v(`This key combination is already used for "${Oo[b.shortcut.action]}". Override?`),P(!0);return}T()},T=()=>{if(!i)return;let b={...i,key:s,ctrl:g,alt:p,shift:h},x={...st.get("keyboardShortcuts")||{},[i.action]:b};st.set("keyboardShortcuts",x);let S=o.map(B=>B.shortcut.action===i.action?{...B,shortcut:b}:B);n(S),a(!1),P(!1)},R=b=>{l(b.shortcut),c(b.shortcut.key),f(!!b.shortcut.ctrl),m(!!b.shortcut.alt),y(!!b.shortcut.shift)},K=()=>{M(!0)},q=()=>{st.set("keyboardShortcuts",{}),j(),v("All keyboard shortcuts have been reset to default values."),P(!0)},G=()=>Pe(Ce,{flexDirection:"column",children:[_(U,{bold:!0,children:"Keyboard Shortcuts"}),_(Ce,{marginY:1,children:_(U,{children:"Select a shortcut to customize"})}),_(cl,{items:o,onSelect:R,itemComponent:({isSelected:b,label:d,item:x})=>Pe(Ce,{children:[_(U,{color:b?t.colors.primary:t.colors.text,children:d}),_(U,{children:" "}),_(U,{color:t.colors.secondary,children:li(x.shortcut)})]})}),Pe(Ce,{marginY:1,flexDirection:"column",children:[_(U,{children:"Press "}),_(U,{color:t.colors.secondary,children:"r"}),_(U,{children:" to reset all shortcuts to defaults"})]}),_(Ce,{marginTop:1,children:_(U,{color:"gray",italic:!0,children:"Press Esc to go back"})})]}),ae=()=>i?Pe(Ce,{flexDirection:"column",children:[Pe(U,{bold:!0,children:["Edit Shortcut: ",Oo[i.action]]}),Pe(Ce,{marginY:1,flexDirection:"column",children:[Pe(Ce,{marginBottom:1,children:[_(U,{children:"Current: "}),_(U,{color:t.colors.secondary,children:li(i)})]}),u?Pe(dl,{children:[Pe(Ce,{marginBottom:1,children:[_(U,{children:"New: "}),Pe(U,{color:t.colors.primary,children:[g?"Ctrl+":"",p?"Alt+":"",h?"Shift+":"",s.length===1?s.toUpperCase():s]})]}),Pe(Ce,{marginY:1,flexDirection:"column",children:[_(Ce,{marginBottom:1,children:_(U,{bold:!0,children:"Modifier keys:"})}),Pe(Ce,{marginLeft:2,flexDirection:"column",children:[Pe(Ce,{children:[_(U,{color:g?t.colors.primary:t.colors.text,children:"[x] Ctrl"}),_(U,{children:" - Press "}),_(U,{color:t.colors.secondary,children:"c"}),_(U,{children:" to toggle"})]}),Pe(Ce,{children:[_(U,{color:p?t.colors.primary:t.colors.text,children:"[x] Alt"}),_(U,{children:" - Press "}),_(U,{color:t.colors.secondary,children:"a"}),_(U,{children:" to toggle"})]}),Pe(Ce,{children:[_(U,{color:h?t.colors.primary:t.colors.text,children:"[x] Shift"}),_(U,{children:" - Press "}),_(U,{color:t.colors.secondary,children:"s"}),_(U,{children:" to toggle"})]})]})]}),Pe(Ce,{marginTop:2,flexDirection:"column",children:[_(U,{children:"Press "}),_(U,{color:t.colors.secondary,children:"Enter"}),_(U,{children:" to save or "}),_(U,{color:t.colors.secondary,children:"Esc"}),_(U,{children:" to cancel"})]})]}):Pe(Ce,{marginTop:1,flexDirection:"column",children:[_(U,{children:"Press "}),_(U,{color:t.colors.secondary,children:"k"}),_(U,{children:" to assign a new key, or "}),_(U,{color:t.colors.secondary,children:"Esc"}),_(U,{children:" to go back"})]})]})]}):null;return C?_(Bo,{message:O,onConfirm:()=>{T()},onCancel:()=>{P(!1)}}):k?_(yr,{title:"Capturing Keyboard Input",children:Pe(Ce,{flexDirection:"column",alignItems:"center",padding:1,children:[_(U,{children:"Press any key or key combination"}),_(U,{color:"gray",children:"(Esc to cancel)"})]})}):_(Ce,{flexDirection:"column",padding:1,children:i?ae():G()})},ci=ul;J();import{jsx as qe,jsxs as di}from"react/jsx-runtime";var gl=[{label:"\u{1F3A8} Theme Settings",value:"theme",description:"Customize the application theme"},{label:"\u2328\uFE0F  Keyboard Shortcuts",value:"shortcuts",description:"View and customize keyboard shortcuts"},{label:"\u{1F504} Back to Main Menu",value:"back",description:"Return to the main menu"}],fi=({onBack:r})=>{let[e,t]=ui(null),[o,n]=ui("base"),i=I();fl((a,s)=>{s.escape&&(e?t(null):r())});let l=a=>{n(a)};return qe(Dt,{componentName:"SettingsMenu",children:qe(vr,{flexDirection:"column",padding:1,children:e?e==="theme"?qe(Mt,{theme:Ct(o),children:qe(ai,{onBack:()=>t(null),onThemeChange:l})}):e==="shortcuts"?qe(ci,{onBack:()=>t(null)}):null:di(vr,{flexDirection:"column",children:[qe(Qt,{bold:!0,children:"Settings"}),qe(vr,{marginY:1,children:qe(Qt,{children:"Configure application preferences and appearance"})}),qe(pl,{items:gl,onSelect:a=>{a.value==="back"?r():t(a.value)},itemComponent:({isSelected:a,label:s,item:c})=>di(vr,{children:[qe(Qt,{color:a?i.colors.primary:i.colors.text,children:s}),qe(Qt,{children:" "}),qe(Qt,{color:"gray",children:c.description})]})}),qe(vr,{marginTop:1,children:qe(Qt,{color:"gray",italic:!0,children:"Press Esc to go back"})})]})})})};import ml from"react";import{Box as hl,Text as pi}from"ink";import{jsx as Do,jsxs as xl}from"react/jsx-runtime";var gi=({items:r})=>Do(hl,{flexDirection:"row",marginBottom:1,children:r.map((e,t)=>xl(ml.Fragment,{children:[Do(pi,{color:e.active?"cyan":"gray",bold:e.active,children:e.label}),t<r.length-1&&Do(pi,{color:"gray",children:" \u203A "})]},t))});import{Box as Gr,Text as zr,useInput as yl}from"ink";import{jsx as Sr,jsxs as Io}from"react/jsx-runtime";var mi=({shortcuts:r,visible:e=!1,onClose:t})=>(yl((o,n)=>{e&&(o==="?"||n.escape)&&t&&t()}),e?Sr(Gr,{flexDirection:"column",marginTop:1,children:Io(Gr,{flexDirection:"column",borderStyle:"round",borderColor:"cyan",padding:1,children:[Sr(zr,{bold:!0,children:"Keyboard Shortcuts"}),Sr(Gr,{flexDirection:"column",marginTop:1,children:r.map((o,n)=>Io(Gr,{children:[Sr(zr,{color:"cyan",bold:!0,children:o.key.padEnd(10)}),Io(zr,{children:[" ",o.description]})]},n))}),Sr(zr,{color:"gray",italic:!0,children:"Press ESC or ? to close"})]})}):null);import{Fragment as wl,jsx as D,jsxs as gt}from"react/jsx-runtime";var hi=[{label:"\u{1F504}  Org Manager",value:"org",description:"Manage your Salesforce orgs (scratch, sandbox, production)"},{label:"\u{1F680}  Project Generator",value:"project",description:"Create new Salesforce projects and packages"},{label:"\u{1F511}  Auth Manager",value:"auth",description:"Authenticate with Salesforce orgs"},{label:"\u{1F3F7}\uFE0F  Alias Manager",value:"alias",description:"Manage your Salesforce CLI aliases"},{label:"\u{1F4E6}  Metadata Tools",value:"metadata",description:"Deploy, retrieve, and manage metadata"},{label:"\u26A1  Run Tools",value:"run",description:"Run Apex, Flows, and more"},{label:"\u{1F9E9}  Plugins",value:"plugins",description:"Manage CLI plugins"},{label:"\u2699\uFE0F  Settings",value:"settings",description:"Configure application preferences and appearance"},{label:"\u274C  Exit",value:"exit",description:"Exit SF TUI"}],Cl={org:"Org Manager",project:"Project Generator",auth:"Auth Manager",alias:"Alias Manager",metadata:"Metadata Tools",run:"Run Tools",plugins:"Plugins",settings:"Settings"},Bl=()=>{let[r,e]=Jt(null),[t,o]=Jt(!0),[n,i]=Jt(0),[l,u]=Jt(!1),[a,s]=Jt(!1),[c,g]=Jt(!1),{exit:f}=vl(),{setContextualHelp:p}=lo();Lo(()=>{if(!r)p(["navigation","shortcuts","themes"]);else switch(r){case"org":p(["orgs","navigation"]);break;case"metadata":p(["metadata","orgs"]);break;case"settings":p(["themes","shortcuts"]);break;default:p(["navigation","shortcuts"])}},[r,p]),Lo(()=>{if(t){let v=setTimeout(()=>{o(!1)},2e3),k=setInterval(()=>{i(M=>(M+1)%10)},100);return()=>{clearTimeout(v),clearInterval(k)}}},[t]),Lo(()=>{if(!t&&!l){let v=setTimeout(()=>{u(!0)},100);return()=>clearTimeout(v)}},[t,l]);let m=()=>{let k=["\u280B","\u2819","\u2839","\u2838","\u283C","\u2834","\u2826","\u2827","\u2807","\u280F"][n];return gt(Ft,{flexDirection:"column",alignItems:"center",justifyContent:"center",marginY:2,children:[D(Q,{color:"blue",children:ke.bold.blue("   \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2557   \u2588\u2588\u2588\u2557")}),D(Q,{color:"blue",children:ke.bold.blue("   \u255A\u2550\u2550\u2588\u2588\u2554\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2551")}),D(Q,{color:"cyan",children:ke.bold.cyan("      \u2588\u2588\u2551   \u2588\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2554\u2588\u2588\u2588\u2588\u2554\u2588\u2588\u2551")}),D(Q,{color:"cyan",children:ke.bold.cyan("      \u2588\u2588\u2551   \u2588\u2588\u2554\u2550\u2550\u255D  \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2551\u255A\u2588\u2588\u2554\u255D\u2588\u2588\u2551")}),D(Q,{color:"cyanBright",children:ke.bold.cyanBright("      \u2588\u2588\u2551   \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2551 \u255A\u2550\u255D \u2588\u2588\u2551")}),D(Q,{color:"cyanBright",children:ke.bold.cyanBright("      \u255A\u2550\u255D   \u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u255D  \u255A\u2550\u255D\u255A\u2550\u255D     \u255A\u2550\u255D")}),D(Q,{children:" "}),D(Q,{bold:!0,color:"blue",children:ke.bold.blue("\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2557     \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557")}),D(Q,{bold:!0,color:"cyan",children:ke.bold.cyan("\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2551     \u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D")}),D(Q,{bold:!0,color:"cyanBright",children:ke.bold.cyanBright("\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2551     \u2588\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2551   \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u2588\u2588\u2551     \u2588\u2588\u2588\u2588\u2588\u2557  ")}),D(Q,{bold:!0,color:"cyanBright",children:ke.bold.cyanBright("\u255A\u2550\u2550\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2551     \u2588\u2588\u2554\u2550\u2550\u255D  \u255A\u2550\u2550\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2551   \u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2551     \u2588\u2588\u2554\u2550\u2550\u255D  ")}),D(Q,{bold:!0,color:"blueBright",children:ke.bold.blueBright("\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u255A\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u2588\u2588\u2551  \u2588\u2588\u2551\u255A\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557")}),D(Q,{bold:!0,color:"blueBright",children:ke.bold.blueBright("\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u255D  \u255A\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D \u255A\u2550\u2550\u2550\u2550\u2550\u255D \u255A\u2550\u255D  \u255A\u2550\u255D \u255A\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D")}),D(Q,{children:" "}),D(Q,{color:"cyanBright",children:`${k} Loading Terminal User Interface...`})]})},h=()=>gt(Ft,{flexDirection:"column",marginBottom:1,borderStyle:"round",borderColor:"cyanBright",padding:1,children:[D(Q,{bold:!0,color:"cyan",children:ke.bold.cyanBright("\u2554\u2550\u2550\u2550\u2557\u2554\u2550\u2550\u2550\u2557     \u2554\u2550\u2550\u2550\u2550\u2557\u2554\u2557 \u2554\u2557\u2554\u2550\u2550\u2550\u2557")}),D(Q,{bold:!0,color:"cyan",children:ke.bold.cyanBright("\u2551\u2554\u2550\u2557\u2551\u2551\u2554\u2550\u2550\u255D     \u2551\u2554\u2557\u2554\u2557\u2551\u2551\u2551 \u2551\u2551\u2551\u2554\u2550\u2557\u2551")}),D(Q,{bold:!0,color:"cyan",children:ke.bold.cyanBright("\u2551\u255A\u2550\u2550\u2557\u2551\u255A\u2550\u2550\u2557     \u255A\u255D\u2551\u2551\u255A\u255D\u2551\u2551 \u2551\u2551\u2551\u2551 \u2551\u2551")}),D(Q,{bold:!0,color:"cyan",children:ke.bold.cyanBright("\u255A\u2550\u2550\u2557\u2551\u2551\u2554\u2550\u2550\u255D       \u2551\u2551  \u2551\u2551 \u2551\u2551\u2551\u2551 \u2551\u2551")}),D(Q,{bold:!0,color:"cyan",children:ke.bold.cyanBright("\u2551\u255A\u2550\u255D\u2551\u2551\u2551          \u2551\u2551  \u2551\u255A\u2550\u255D\u2551\u2551\u255A\u2550\u255D\u2551")}),D(Q,{bold:!0,color:"cyan",children:ke.bold.cyanBright("\u255A\u2550\u2550\u2550\u255D\u255A\u255D          \u255A\u255D  \u255A\u2550\u2550\u2550\u255D\u255A\u2550\u2550\u2550\u255D")}),D(Q,{children:" "}),D(Q,{color:"gray",italic:!0,children:"Salesforce Terminal User Interface - Interactive CLI"}),gt(Q,{color:"gray",italic:!0,children:["v",jr.version]}),D(Q,{children:" "})]}),y=()=>{if(!r)return gt(Ft,{flexDirection:"column",children:[D(Q,{bold:!0,children:"What would you like to do?"}),D(Sl,{items:hi,onSelect:v=>{if(v.value==="exit"){f();return}e(v.value)},itemComponent:({isSelected:v=!1,label:k=""})=>{let M=hi.find(j=>j.label===k);return gt(Ft,{children:[D(Q,{color:v?"cyan":"white",children:k}),D(Q,{children:"  "}),D(Q,{color:"gray",children:M?.description})]})}})]});switch(r){case"org":return D(Kn,{onBack:()=>e(null)});case"project":return D(Qn,{onBack:()=>e(null)});case"auth":return D(ei,{onBack:()=>e(null)});case"alias":return D(Xn,{onBack:()=>e(null)});case"metadata":return D(ri,{onBack:()=>e(null)});case"run":return D(oi,{onBack:()=>e(null)});case"plugins":return D(ii,{onBack:()=>e(null)});case"settings":return D(fi,{onBack:()=>e(null)});default:return null}},C=bl(()=>{g(v=>!v)},[]);Tl((v,k)=>{if(v==="?"){C();return}t&&k.return&&o(!1)});let P=()=>{let v=[{label:"Main Menu",active:!r}];return r&&v.push({label:Cl[r]||r,active:!0}),v},O=[{key:"\u2191\u2193",description:"Navigate menu items"},{key:"Enter",description:"Select menu item"},{key:"Esc",description:"Go back"},{key:"?",description:"Show/hide keyboard shortcuts"}];return D(pr,{position:"top",maxVisibleErrors:2,children:D(Dt,{componentName:"MainMenu",children:t?gt(Ft,{flexDirection:"column",padding:1,alignItems:"center",justifyContent:"center",children:[m(),D(Q,{color:"gray",italic:!0,children:"Press Enter to continue"})]}):gt(Ft,{flexDirection:"column",padding:1,children:[D(wt,{type:"fade",duration:400,visible:l,onComplete:()=>s(!0),children:h()}),D(wt,{type:"slide-up",duration:500,visible:l&&a,children:gt(Ft,{flexDirection:"column",children:[D(gi,{items:P()}),y(),D(mi,{shortcuts:O,visible:c,onClose:C}),!c&&gt(wl,{children:[D(Q,{children:" "}),gt(Q,{color:"gray",italic:!0,children:["Press ",D(Q,{bold:!0,children:"?"})," for keyboard shortcuts"]})]})]})})]})})})},xi=Bl;import{Fragment as Al,jsx as Ve,jsxs as bi}from"react/jsx-runtime";var Pl=()=>{let{state:r,setTheme:e,toggleStatusBar:t,toggleHelp:o}=Or(),[n,i]=El(!1),{exit:l}=Rl(),u=["base","dark","highContrast","salesforce"];return Ve(bn,{actionHandlers:{help:()=>i(!0),quit:()=>l(),toggleStatusBar:()=>t(),toggleTheme:()=>{let c=(u.indexOf(r.themeName)+1)%u.length;e(u[c])}},children:Ve(Mt,{theme:r.theme,children:Ve(Cn,{children:Ve(Fn,{children:Ve(pr,{position:"top",maxVisibleErrors:2,children:bi(yi,{flexDirection:"column",height:"100%",children:[Ve(yi,{flexGrow:1,children:Ve(Gn,{children:n?Ve(vo,{onClose:()=>i(!1)}):bi(Al,{children:[Ve(xi,{}),Ve(Bn,{}),Ve(jn,{})]})})}),r.showStatusBar&&Ve(To,{})]})})})})})})},kl=()=>Ve(mn,{children:Ve(Pl,{})}),Ti=kl;es().install();ln();ge.info("Starting SF TUI");mc([import.meta.url]).then(()=>{let{waitUntilExit:r}=xc(hc.createElement(Ti));return r()}).then(()=>{ge.info("SF TUI completed successfully"),process.exit(0)}).catch(r=>{ge.fatal("Error running SF TUI",{error:r}),process.exit(1)});
//# sourceMappingURL=index.js.map