#!/usr/bin/env node
var ro=Object.defineProperty;var us=Object.getOwnPropertyDescriptor;var ds=Object.getOwnPropertyNames;var fs=Object.prototype.hasOwnProperty;var ln=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var gs=(t,e)=>()=>(t&&(e=t(t=0)),e);var Ge=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ps=(t,e)=>{for(var r in e)ro(t,r,{get:e[r],enumerable:!0})},ms=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of ds(e))!fs.call(t,n)&&n!==r&&ro(t,n,{get:()=>e[n],enumerable:!(o=us(e,n))||o.enumerable});return t};var hs=t=>ms(ro({},"__esModule",{value:!0}),t);var xn={};ps(xn,{ThemeContext:()=>lo,ThemeProvider:()=>Lt,baseTheme:()=>ht,darkTheme:()=>pn,getTheme:()=>St,highContrastTheme:()=>mn,salesforceTheme:()=>hn,useTheme:()=>D});import*as qt from"react";var ht,pn,mn,hn,St,lo,Lt,D,J=gs(()=>{"use strict";ht={colors:{primary:"#36A9E1",secondary:"#2E844A",success:"#2E844A",warning:"#FE9339",error:"#EA001E",info:"#0176D3",text:"#181818",textInverse:"#FFFFFF",textMuted:"#706E6B",background:"#FFFFFF",backgroundHover:"#F3F3F3",border:"#DDDBDA",highlight:"#F3F2F2"},spacing:{xs:1,sm:2,md:4,lg:8,xl:16},borderRadius:{sm:2,md:4,lg:8},box:{borderStyle:"round",padding:1,margin:1},text:{bold:(t=!0)=>({bold:t}),italic:(t=!0)=>({italic:t}),underline:(t=!0)=>({underline:t}),dim:(t=!0)=>({dimColor:t}),color:t=>({color:t}),bgColor:t=>({backgroundColor:t})}},pn={...ht,colors:{...ht.colors,text:"#F3F3F3",textInverse:"#181818",textMuted:"#B0ADAB",background:"#1B1B1B",backgroundHover:"#2D2D2D",border:"#444444",highlight:"#333333"}},mn={...ht,colors:{primary:"#0067B8",secondary:"#0A7C36",success:"#0A7C36",warning:"#D83B01",error:"#A91B0A",info:"#0050B3",text:"#000000",textInverse:"#FFFFFF",textMuted:"#4D4D4D",background:"#FFFFFF",backgroundHover:"#E5E5E5",border:"#000000",highlight:"#F0F0F0"}},hn={...ht,colors:{primary:"#0176D3",secondary:"#2E844A",success:"#2E844A",warning:"#FE9339",error:"#EA001E",info:"#0176D3",text:"#181818",textInverse:"#FFFFFF",textMuted:"#706E6B",background:"#F3F3F3",backgroundHover:"#E5E5E5",border:"#C9C9C9",highlight:"#E5E5E5"}},St=(t="base")=>{switch(t.toLowerCase()){case"dark":return pn;case"highcontrast":case"high-contrast":case"highContrast":return mn;case"salesforce":case"lightning":return hn;case"base":default:return ht}},lo=qt.createContext(ht),Lt=({theme:t=ht,children:e})=>qt.createElement(lo.Provider,{value:t},e),D=()=>qt.useContext(lo)||ht});var Ai=Ge($o=>{"use strict";var Oi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");$o.encode=function(t){if(0<=t&&t<Oi.length)return Oi[t];throw new TypeError("Must be between 0 and 63: "+t)};$o.decode=function(t){var e=65,r=90,o=97,n=122,i=48,l=57,u=43,s=47,a=26,c=52;return e<=t&&t<=r?t-e:o<=t&&t<=n?t-o+a:i<=t&&t<=l?t-i+c:t==u?62:t==s?63:-1}});var Ho=Ge(Uo=>{"use strict";var Li=Ai(),jo=5,ki=1<<jo,Ii=ki-1,Di=ki;function ql(t){return t<0?(-t<<1)+1:(t<<1)+0}function Vl(t){var e=(t&1)===1,r=t>>1;return e?-r:r}Uo.encode=function(e){var r="",o,n=ql(e);do o=n&Ii,n>>>=jo,n>0&&(o|=Di),r+=Li.encode(o);while(n>0);return r};Uo.decode=function(e,r,o){var n=e.length,i=0,l=0,u,s;do{if(r>=n)throw new Error("Expected more digits in base 64 VLQ value.");if(s=Li.decode(e.charCodeAt(r++)),s===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));u=!!(s&Di),s&=Ii,i=i+(s<<l),l+=jo}while(u);o.value=Vl(i),o.rest=r}});var er=Ge(Ne=>{"use strict";function Gl(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}Ne.getArg=Gl;var Mi=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,zl=/^data:.+\,.+$/;function Cr(t){var e=t.match(Mi);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}Ne.urlParse=Cr;function Xt(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}Ne.urlGenerate=Xt;function qo(t){var e=t,r=Cr(t);if(r){if(!r.path)return t;e=r.path}for(var o=Ne.isAbsolute(e),n=e.split(/\/+/),i,l=0,u=n.length-1;u>=0;u--)i=n[u],i==="."?n.splice(u,1):i===".."?l++:l>0&&(i===""?(n.splice(u+1,l),l=0):(n.splice(u,2),l--));return e=n.join("/"),e===""&&(e=o?"/":"."),r?(r.path=e,Xt(r)):e}Ne.normalize=qo;function _i(t,e){t===""&&(t="."),e===""&&(e=".");var r=Cr(e),o=Cr(t);if(o&&(t=o.path||"/"),r&&!r.scheme)return o&&(r.scheme=o.scheme),Xt(r);if(r||e.match(zl))return e;if(o&&!o.host&&!o.path)return o.host=e,Xt(o);var n=e.charAt(0)==="/"?e:qo(t.replace(/\/+$/,"")+"/"+e);return o?(o.path=n,Xt(o)):n}Ne.join=_i;Ne.isAbsolute=function(t){return t.charAt(0)==="/"||Mi.test(t)};function Wl(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var o=t.lastIndexOf("/");if(o<0||(t=t.slice(0,o),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}Ne.relative=Wl;var Fi=function(){var t=Object.create(null);return!("__proto__"in t)}();function Ni(t){return t}function Kl(t){return $i(t)?"$"+t:t}Ne.toSetString=Fi?Ni:Kl;function Yl(t){return $i(t)?t.slice(1):t}Ne.fromSetString=Fi?Ni:Yl;function $i(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function Ql(t,e,r){var o=Zt(t.source,e.source);return o!==0||(o=t.originalLine-e.originalLine,o!==0)||(o=t.originalColumn-e.originalColumn,o!==0||r)||(o=t.generatedColumn-e.generatedColumn,o!==0)||(o=t.generatedLine-e.generatedLine,o!==0)?o:Zt(t.name,e.name)}Ne.compareByOriginalPositions=Ql;function Jl(t,e,r){var o=t.generatedLine-e.generatedLine;return o!==0||(o=t.generatedColumn-e.generatedColumn,o!==0||r)||(o=Zt(t.source,e.source),o!==0)||(o=t.originalLine-e.originalLine,o!==0)||(o=t.originalColumn-e.originalColumn,o!==0)?o:Zt(t.name,e.name)}Ne.compareByGeneratedPositionsDeflated=Jl;function Zt(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function Xl(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=Zt(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:Zt(t.name,e.name)}Ne.compareByGeneratedPositionsInflated=Xl;function Zl(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}Ne.parseSourceMapInput=Zl;function ec(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var o=Cr(r);if(!o)throw new Error("sourceMapURL could not be parsed");if(o.path){var n=o.path.lastIndexOf("/");n>=0&&(o.path=o.path.substring(0,n+1))}e=_i(Xt(o),e)}return qo(e)}Ne.computeSourceURL=ec});var zo=Ge(ji=>{"use strict";var Vo=er(),Go=Object.prototype.hasOwnProperty,$t=typeof Map<"u";function vt(){this._array=[],this._set=$t?new Map:Object.create(null)}vt.fromArray=function(e,r){for(var o=new vt,n=0,i=e.length;n<i;n++)o.add(e[n],r);return o};vt.prototype.size=function(){return $t?this._set.size:Object.getOwnPropertyNames(this._set).length};vt.prototype.add=function(e,r){var o=$t?e:Vo.toSetString(e),n=$t?this.has(e):Go.call(this._set,o),i=this._array.length;(!n||r)&&this._array.push(e),n||($t?this._set.set(e,i):this._set[o]=i)};vt.prototype.has=function(e){if($t)return this._set.has(e);var r=Vo.toSetString(e);return Go.call(this._set,r)};vt.prototype.indexOf=function(e){if($t){var r=this._set.get(e);if(r>=0)return r}else{var o=Vo.toSetString(e);if(Go.call(this._set,o))return this._set[o]}throw new Error('"'+e+'" is not in the set.')};vt.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};vt.prototype.toArray=function(){return this._array.slice()};ji.ArraySet=vt});var qi=Ge(Hi=>{"use strict";var Ui=er();function tc(t,e){var r=t.generatedLine,o=e.generatedLine,n=t.generatedColumn,i=e.generatedColumn;return o>r||o==r&&i>=n||Ui.compareByGeneratedPositionsInflated(t,e)<=0}function Qr(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}Qr.prototype.unsortedForEach=function(e,r){this._array.forEach(e,r)};Qr.prototype.add=function(e){tc(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};Qr.prototype.toArray=function(){return this._sorted||(this._array.sort(Ui.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};Hi.MappingList=Qr});var Wo=Ge(Vi=>{"use strict";var Br=Ho(),Se=er(),Jr=zo().ArraySet,rc=qi().MappingList;function Xe(t){t||(t={}),this._file=Se.getArg(t,"file",null),this._sourceRoot=Se.getArg(t,"sourceRoot",null),this._skipValidation=Se.getArg(t,"skipValidation",!1),this._sources=new Jr,this._names=new Jr,this._mappings=new rc,this._sourcesContents=null}Xe.prototype._version=3;Xe.fromSourceMap=function(e){var r=e.sourceRoot,o=new Xe({file:e.file,sourceRoot:r});return e.eachMapping(function(n){var i={generated:{line:n.generatedLine,column:n.generatedColumn}};n.source!=null&&(i.source=n.source,r!=null&&(i.source=Se.relative(r,i.source)),i.original={line:n.originalLine,column:n.originalColumn},n.name!=null&&(i.name=n.name)),o.addMapping(i)}),e.sources.forEach(function(n){var i=n;r!==null&&(i=Se.relative(r,n)),o._sources.has(i)||o._sources.add(i);var l=e.sourceContentFor(n);l!=null&&o.setSourceContent(n,l)}),o};Xe.prototype.addMapping=function(e){var r=Se.getArg(e,"generated"),o=Se.getArg(e,"original",null),n=Se.getArg(e,"source",null),i=Se.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,o,n,i),n!=null&&(n=String(n),this._sources.has(n)||this._sources.add(n)),i!=null&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:o!=null&&o.line,originalColumn:o!=null&&o.column,source:n,name:i})};Xe.prototype.setSourceContent=function(e,r){var o=e;this._sourceRoot!=null&&(o=Se.relative(this._sourceRoot,o)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Se.toSetString(o)]=r):this._sourcesContents&&(delete this._sourcesContents[Se.toSetString(o)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};Xe.prototype.applySourceMap=function(e,r,o){var n=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);n=e.file}var i=this._sourceRoot;i!=null&&(n=Se.relative(i,n));var l=new Jr,u=new Jr;this._mappings.unsortedForEach(function(s){if(s.source===n&&s.originalLine!=null){var a=e.originalPositionFor({line:s.originalLine,column:s.originalColumn});a.source!=null&&(s.source=a.source,o!=null&&(s.source=Se.join(o,s.source)),i!=null&&(s.source=Se.relative(i,s.source)),s.originalLine=a.line,s.originalColumn=a.column,a.name!=null&&(s.name=a.name))}var c=s.source;c!=null&&!l.has(c)&&l.add(c);var m=s.name;m!=null&&!u.has(m)&&u.add(m)},this),this._sources=l,this._names=u,e.sources.forEach(function(s){var a=e.sourceContentFor(s);a!=null&&(o!=null&&(s=Se.join(o,s)),i!=null&&(s=Se.relative(i,s)),this.setSourceContent(s,a))},this)};Xe.prototype._validateMapping=function(e,r,o,n){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!o&&!n)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&o)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:o,original:r,name:n}))}};Xe.prototype._serializeMappings=function(){for(var e=0,r=1,o=0,n=0,i=0,l=0,u="",s,a,c,m,d=this._mappings.toArray(),g=0,h=d.length;g<h;g++){if(a=d[g],s="",a.generatedLine!==r)for(e=0;a.generatedLine!==r;)s+=";",r++;else if(g>0){if(!Se.compareByGeneratedPositionsInflated(a,d[g-1]))continue;s+=","}s+=Br.encode(a.generatedColumn-e),e=a.generatedColumn,a.source!=null&&(m=this._sources.indexOf(a.source),s+=Br.encode(m-l),l=m,s+=Br.encode(a.originalLine-1-n),n=a.originalLine-1,s+=Br.encode(a.originalColumn-o),o=a.originalColumn,a.name!=null&&(c=this._names.indexOf(a.name),s+=Br.encode(c-i),i=c)),u+=s}return u};Xe.prototype._generateSourcesContent=function(e,r){return e.map(function(o){if(!this._sourcesContents)return null;r!=null&&(o=Se.relative(r,o));var n=Se.toSetString(o);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)};Xe.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};Xe.prototype.toString=function(){return JSON.stringify(this.toJSON())};Vi.SourceMapGenerator=Xe});var Gi=Ge(jt=>{"use strict";jt.GREATEST_LOWER_BOUND=1;jt.LEAST_UPPER_BOUND=2;function Ko(t,e,r,o,n,i){var l=Math.floor((e-t)/2)+t,u=n(r,o[l],!0);return u===0?l:u>0?e-l>1?Ko(l,e,r,o,n,i):i==jt.LEAST_UPPER_BOUND?e<o.length?e:-1:l:l-t>1?Ko(t,l,r,o,n,i):i==jt.LEAST_UPPER_BOUND?l:t<0?-1:t}jt.search=function(e,r,o,n){if(r.length===0)return-1;var i=Ko(-1,r.length,e,r,o,n||jt.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;i-1>=0&&o(r[i],r[i-1],!0)===0;)--i;return i}});var Wi=Ge(zi=>{"use strict";function Yo(t,e,r){var o=t[e];t[e]=t[r],t[r]=o}function oc(t,e){return Math.round(t+Math.random()*(e-t))}function Qo(t,e,r,o){if(r<o){var n=oc(r,o),i=r-1;Yo(t,n,o);for(var l=t[o],u=r;u<o;u++)e(t[u],l)<=0&&(i+=1,Yo(t,i,u));Yo(t,i+1,u);var s=i+1;Qo(t,e,r,s-1),Qo(t,e,s+1,o)}}zi.quickSort=function(t,e){Qo(t,e,0,t.length-1)}});var Yi=Ge(Xr=>{"use strict";var w=er(),Jo=Gi(),tr=zo().ArraySet,nc=Ho(),wr=Wi().quickSort;function ue(t,e){var r=t;return typeof t=="string"&&(r=w.parseSourceMapInput(t)),r.sections!=null?new rt(r,e):new ke(r,e)}ue.fromSourceMap=function(t,e){return ke.fromSourceMap(t,e)};ue.prototype._version=3;ue.prototype.__generatedMappings=null;Object.defineProperty(ue.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});ue.prototype.__originalMappings=null;Object.defineProperty(ue.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});ue.prototype._charIsMappingSeparator=function(e,r){var o=e.charAt(r);return o===";"||o===","};ue.prototype._parseMappings=function(e,r){throw new Error("Subclasses must implement _parseMappings")};ue.GENERATED_ORDER=1;ue.ORIGINAL_ORDER=2;ue.GREATEST_LOWER_BOUND=1;ue.LEAST_UPPER_BOUND=2;ue.prototype.eachMapping=function(e,r,o){var n=r||null,i=o||ue.GENERATED_ORDER,l;switch(i){case ue.GENERATED_ORDER:l=this._generatedMappings;break;case ue.ORIGINAL_ORDER:l=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var u=this.sourceRoot;l.map(function(s){var a=s.source===null?null:this._sources.at(s.source);return a=w.computeSourceURL(u,a,this._sourceMapURL),{source:a,generatedLine:s.generatedLine,generatedColumn:s.generatedColumn,originalLine:s.originalLine,originalColumn:s.originalColumn,name:s.name===null?null:this._names.at(s.name)}},this).forEach(e,n)};ue.prototype.allGeneratedPositionsFor=function(e){var r=w.getArg(e,"line"),o={source:w.getArg(e,"source"),originalLine:r,originalColumn:w.getArg(e,"column",0)};if(o.source=this._findSourceIndex(o.source),o.source<0)return[];var n=[],i=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",w.compareByOriginalPositions,Jo.LEAST_UPPER_BOUND);if(i>=0){var l=this._originalMappings[i];if(e.column===void 0)for(var u=l.originalLine;l&&l.originalLine===u;)n.push({line:w.getArg(l,"generatedLine",null),column:w.getArg(l,"generatedColumn",null),lastColumn:w.getArg(l,"lastGeneratedColumn",null)}),l=this._originalMappings[++i];else for(var s=l.originalColumn;l&&l.originalLine===r&&l.originalColumn==s;)n.push({line:w.getArg(l,"generatedLine",null),column:w.getArg(l,"generatedColumn",null),lastColumn:w.getArg(l,"lastGeneratedColumn",null)}),l=this._originalMappings[++i]}return n};Xr.SourceMapConsumer=ue;function ke(t,e){var r=t;typeof t=="string"&&(r=w.parseSourceMapInput(t));var o=w.getArg(r,"version"),n=w.getArg(r,"sources"),i=w.getArg(r,"names",[]),l=w.getArg(r,"sourceRoot",null),u=w.getArg(r,"sourcesContent",null),s=w.getArg(r,"mappings"),a=w.getArg(r,"file",null);if(o!=this._version)throw new Error("Unsupported version: "+o);l&&(l=w.normalize(l)),n=n.map(String).map(w.normalize).map(function(c){return l&&w.isAbsolute(l)&&w.isAbsolute(c)?w.relative(l,c):c}),this._names=tr.fromArray(i.map(String),!0),this._sources=tr.fromArray(n,!0),this._absoluteSources=this._sources.toArray().map(function(c){return w.computeSourceURL(l,c,e)}),this.sourceRoot=l,this.sourcesContent=u,this._mappings=s,this._sourceMapURL=e,this.file=a}ke.prototype=Object.create(ue.prototype);ke.prototype.consumer=ue;ke.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=w.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};ke.fromSourceMap=function(e,r){var o=Object.create(ke.prototype),n=o._names=tr.fromArray(e._names.toArray(),!0),i=o._sources=tr.fromArray(e._sources.toArray(),!0);o.sourceRoot=e._sourceRoot,o.sourcesContent=e._generateSourcesContent(o._sources.toArray(),o.sourceRoot),o.file=e._file,o._sourceMapURL=r,o._absoluteSources=o._sources.toArray().map(function(g){return w.computeSourceURL(o.sourceRoot,g,r)});for(var l=e._mappings.toArray().slice(),u=o.__generatedMappings=[],s=o.__originalMappings=[],a=0,c=l.length;a<c;a++){var m=l[a],d=new Ki;d.generatedLine=m.generatedLine,d.generatedColumn=m.generatedColumn,m.source&&(d.source=i.indexOf(m.source),d.originalLine=m.originalLine,d.originalColumn=m.originalColumn,m.name&&(d.name=n.indexOf(m.name)),s.push(d)),u.push(d)}return wr(o.__originalMappings,w.compareByOriginalPositions),o};ke.prototype._version=3;Object.defineProperty(ke.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function Ki(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}ke.prototype._parseMappings=function(e,r){for(var o=1,n=0,i=0,l=0,u=0,s=0,a=e.length,c=0,m={},d={},g=[],h=[],p,b,C,P,k;c<a;)if(e.charAt(c)===";")o++,c++,n=0;else if(e.charAt(c)===",")c++;else{for(p=new Ki,p.generatedLine=o,P=c;P<a&&!this._charIsMappingSeparator(e,P);P++);if(b=e.slice(c,P),C=m[b],C)c+=b.length;else{for(C=[];c<P;)nc.decode(e,c,d),k=d.value,c=d.rest,C.push(k);if(C.length===2)throw new Error("Found a source, but no line and column");if(C.length===3)throw new Error("Found a source and line, but no column");m[b]=C}p.generatedColumn=n+C[0],n=p.generatedColumn,C.length>1&&(p.source=u+C[1],u+=C[1],p.originalLine=i+C[2],i=p.originalLine,p.originalLine+=1,p.originalColumn=l+C[3],l=p.originalColumn,C.length>4&&(p.name=s+C[4],s+=C[4])),h.push(p),typeof p.originalLine=="number"&&g.push(p)}wr(h,w.compareByGeneratedPositionsDeflated),this.__generatedMappings=h,wr(g,w.compareByOriginalPositions),this.__originalMappings=g};ke.prototype._findMapping=function(e,r,o,n,i,l){if(e[o]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[o]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return Jo.search(e,r,i,l)};ke.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var o=this._generatedMappings[e+1];if(r.generatedLine===o.generatedLine){r.lastGeneratedColumn=o.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};ke.prototype.originalPositionFor=function(e){var r={generatedLine:w.getArg(e,"line"),generatedColumn:w.getArg(e,"column")},o=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",w.compareByGeneratedPositionsDeflated,w.getArg(e,"bias",ue.GREATEST_LOWER_BOUND));if(o>=0){var n=this._generatedMappings[o];if(n.generatedLine===r.generatedLine){var i=w.getArg(n,"source",null);i!==null&&(i=this._sources.at(i),i=w.computeSourceURL(this.sourceRoot,i,this._sourceMapURL));var l=w.getArg(n,"name",null);return l!==null&&(l=this._names.at(l)),{source:i,line:w.getArg(n,"originalLine",null),column:w.getArg(n,"originalColumn",null),name:l}}}return{source:null,line:null,column:null,name:null}};ke.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};ke.prototype.sourceContentFor=function(e,r){if(!this.sourcesContent)return null;var o=this._findSourceIndex(e);if(o>=0)return this.sourcesContent[o];var n=e;this.sourceRoot!=null&&(n=w.relative(this.sourceRoot,n));var i;if(this.sourceRoot!=null&&(i=w.urlParse(this.sourceRoot))){var l=n.replace(/^file:\/\//,"");if(i.scheme=="file"&&this._sources.has(l))return this.sourcesContent[this._sources.indexOf(l)];if((!i.path||i.path=="/")&&this._sources.has("/"+n))return this.sourcesContent[this._sources.indexOf("/"+n)]}if(r)return null;throw new Error('"'+n+'" is not in the SourceMap.')};ke.prototype.generatedPositionFor=function(e){var r=w.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var o={source:r,originalLine:w.getArg(e,"line"),originalColumn:w.getArg(e,"column")},n=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",w.compareByOriginalPositions,w.getArg(e,"bias",ue.GREATEST_LOWER_BOUND));if(n>=0){var i=this._originalMappings[n];if(i.source===o.source)return{line:w.getArg(i,"generatedLine",null),column:w.getArg(i,"generatedColumn",null),lastColumn:w.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};Xr.BasicSourceMapConsumer=ke;function rt(t,e){var r=t;typeof t=="string"&&(r=w.parseSourceMapInput(t));var o=w.getArg(r,"version"),n=w.getArg(r,"sections");if(o!=this._version)throw new Error("Unsupported version: "+o);this._sources=new tr,this._names=new tr;var i={line:-1,column:0};this._sections=n.map(function(l){if(l.url)throw new Error("Support for url field in sections not implemented.");var u=w.getArg(l,"offset"),s=w.getArg(u,"line"),a=w.getArg(u,"column");if(s<i.line||s===i.line&&a<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=u,{generatedOffset:{generatedLine:s+1,generatedColumn:a+1},consumer:new ue(w.getArg(l,"map"),e)}})}rt.prototype=Object.create(ue.prototype);rt.prototype.constructor=ue;rt.prototype._version=3;Object.defineProperty(rt.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t}});rt.prototype.originalPositionFor=function(e){var r={generatedLine:w.getArg(e,"line"),generatedColumn:w.getArg(e,"column")},o=Jo.search(r,this._sections,function(i,l){var u=i.generatedLine-l.generatedOffset.generatedLine;return u||i.generatedColumn-l.generatedOffset.generatedColumn}),n=this._sections[o];return n?n.consumer.originalPositionFor({line:r.generatedLine-(n.generatedOffset.generatedLine-1),column:r.generatedColumn-(n.generatedOffset.generatedLine===r.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};rt.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};rt.prototype.sourceContentFor=function(e,r){for(var o=0;o<this._sections.length;o++){var n=this._sections[o],i=n.consumer.sourceContentFor(e,!0);if(i)return i}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')};rt.prototype.generatedPositionFor=function(e){for(var r=0;r<this._sections.length;r++){var o=this._sections[r];if(o.consumer._findSourceIndex(w.getArg(e,"source"))!==-1){var n=o.consumer.generatedPositionFor(e);if(n){var i={line:n.line+(o.generatedOffset.generatedLine-1),column:n.column+(o.generatedOffset.generatedLine===n.line?o.generatedOffset.generatedColumn-1:0)};return i}}}return{line:null,column:null}};rt.prototype._parseMappings=function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var o=0;o<this._sections.length;o++)for(var n=this._sections[o],i=n.consumer._generatedMappings,l=0;l<i.length;l++){var u=i[l],s=n.consumer._sources.at(u.source);s=w.computeSourceURL(n.consumer.sourceRoot,s,this._sourceMapURL),this._sources.add(s),s=this._sources.indexOf(s);var a=null;u.name&&(a=n.consumer._names.at(u.name),this._names.add(a),a=this._names.indexOf(a));var c={source:s,generatedLine:u.generatedLine+(n.generatedOffset.generatedLine-1),generatedColumn:u.generatedColumn+(n.generatedOffset.generatedLine===u.generatedLine?n.generatedOffset.generatedColumn-1:0),originalLine:u.originalLine,originalColumn:u.originalColumn,name:a};this.__generatedMappings.push(c),typeof c.originalLine=="number"&&this.__originalMappings.push(c)}wr(this.__generatedMappings,w.compareByGeneratedPositionsDeflated),wr(this.__originalMappings,w.compareByOriginalPositions)};Xr.IndexedSourceMapConsumer=rt});var Ji=Ge(Qi=>{"use strict";var ic=Wo().SourceMapGenerator,Zr=er(),sc=/(\r?\n)/,ac=10,rr="$$$isSourceNode$$$";function We(t,e,r,o,n){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=n??null,this[rr]=!0,o!=null&&this.add(o)}We.fromStringWithSourceMap=function(e,r,o){var n=new We,i=e.split(sc),l=0,u=function(){var d=h(),g=h()||"";return d+g;function h(){return l<i.length?i[l++]:void 0}},s=1,a=0,c=null;return r.eachMapping(function(d){if(c!==null)if(s<d.generatedLine)m(c,u()),s++,a=0;else{var g=i[l]||"",h=g.substr(0,d.generatedColumn-a);i[l]=g.substr(d.generatedColumn-a),a=d.generatedColumn,m(c,h),c=d;return}for(;s<d.generatedLine;)n.add(u()),s++;if(a<d.generatedColumn){var g=i[l]||"";n.add(g.substr(0,d.generatedColumn)),i[l]=g.substr(d.generatedColumn),a=d.generatedColumn}c=d},this),l<i.length&&(c&&m(c,u()),n.add(i.splice(l).join(""))),r.sources.forEach(function(d){var g=r.sourceContentFor(d);g!=null&&(o!=null&&(d=Zr.join(o,d)),n.setSourceContent(d,g))}),n;function m(d,g){if(d===null||d.source===void 0)n.add(g);else{var h=o?Zr.join(o,d.source):d.source;n.add(new We(d.originalLine,d.originalColumn,h,g,d.name))}}};We.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[rr]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};We.prototype.prepend=function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[rr]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};We.prototype.walk=function(e){for(var r,o=0,n=this.children.length;o<n;o++)r=this.children[o],r[rr]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})};We.prototype.join=function(e){var r,o,n=this.children.length;if(n>0){for(r=[],o=0;o<n-1;o++)r.push(this.children[o]),r.push(e);r.push(this.children[o]),this.children=r}return this};We.prototype.replaceRight=function(e,r){var o=this.children[this.children.length-1];return o[rr]?o.replaceRight(e,r):typeof o=="string"?this.children[this.children.length-1]=o.replace(e,r):this.children.push("".replace(e,r)),this};We.prototype.setSourceContent=function(e,r){this.sourceContents[Zr.toSetString(e)]=r};We.prototype.walkSourceContents=function(e){for(var r=0,o=this.children.length;r<o;r++)this.children[r][rr]&&this.children[r].walkSourceContents(e);for(var n=Object.keys(this.sourceContents),r=0,o=n.length;r<o;r++)e(Zr.fromSetString(n[r]),this.sourceContents[n[r]])};We.prototype.toString=function(){var e="";return this.walk(function(r){e+=r}),e};We.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},o=new ic(e),n=!1,i=null,l=null,u=null,s=null;return this.walk(function(a,c){r.code+=a,c.source!==null&&c.line!==null&&c.column!==null?((i!==c.source||l!==c.line||u!==c.column||s!==c.name)&&o.addMapping({source:c.source,original:{line:c.line,column:c.column},generated:{line:r.line,column:r.column},name:c.name}),i=c.source,l=c.line,u=c.column,s=c.name,n=!0):n&&(o.addMapping({generated:{line:r.line,column:r.column}}),i=null,n=!1);for(var m=0,d=a.length;m<d;m++)a.charCodeAt(m)===ac?(r.line++,r.column=0,m+1===d?(i=null,n=!1):n&&o.addMapping({source:c.source,original:{line:c.line,column:c.column},generated:{line:r.line,column:r.column},name:c.name})):r.column++}),this.walkSourceContents(function(a,c){o.setSourceContent(a,c)}),{code:r.code,map:o}};Qi.SourceNode=We});var Xi=Ge(eo=>{"use strict";eo.SourceMapGenerator=Wo().SourceMapGenerator;eo.SourceMapConsumer=Yi().SourceMapConsumer;eo.SourceNode=Ji().SourceNode});var es=Ge((Ay,Zi)=>{"use strict";var lc=Object.prototype.toString,Xo=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function cc(t){return lc.call(t).slice(8,-1)==="ArrayBuffer"}function uc(t,e,r){e>>>=0;var o=t.byteLength-e;if(o<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=o;else if(r>>>=0,r>o)throw new RangeError("'length' is out of bounds");return Xo?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}function dc(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return Xo?Buffer.from(t,e):new Buffer(t,e)}function fc(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return cc(t)?uc(t,e,r):typeof t=="string"?dc(t,e):Xo?Buffer.from(t):new Buffer(t)}Zi.exports=fc});var ls=Ge((Ht,rn)=>{"use strict";var gc=Xi().SourceMapConsumer,Zo=ln("path"),pt;try{pt=ln("fs"),(!pt.existsSync||!pt.readFileSync)&&(pt=null)}catch{}var pc=es();function ts(t,e){return t.require(e)}var rs=!1,os=!1,en=!1,Er="auto",Ut={},Rr={},mc=/^data:application\/json[^,]+base64,/,Pt=[],Ot=[];function on(){return Er==="browser"?!0:Er==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}function hc(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}function xc(){return typeof process=="object"&&process!==null?process.version:""}function bc(){if(typeof process=="object"&&process!==null)return process.stderr}function yc(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}function to(t){return function(e){for(var r=0;r<t.length;r++){var o=t[r](e);if(o)return o}return null}}var nn=to(Pt);Pt.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(o,n){return n?"":"/"})),t in Ut)return Ut[t];var e="";try{if(pt)pt.existsSync(t)&&(e=pt.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return Ut[t]=e});function tn(t,e){if(!t)return e;var r=Zo.dirname(t),o=/^\w+:\/\/[^\/]*/.exec(r),n=o?o[0]:"",i=r.slice(n.length);return n&&/^\/\w\:/.test(i)?(n+="/",n+Zo.resolve(r.slice(n.length),e).replace(/\\/g,"/")):n+Zo.resolve(r.slice(n.length),e)}function Tc(t){var e;if(on())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var o=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(o)return o}catch{}e=nn(t);for(var n=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,i,l;l=n.exec(e);)i=l;return i?i[1]:null}var sn=to(Ot);Ot.push(function(t){var e=Tc(t);if(!e)return null;var r;if(mc.test(e)){var o=e.slice(e.indexOf(",")+1);r=pc(o,"base64").toString(),e=t}else e=tn(t,e),r=nn(e);return r?{url:e,map:r}:null});function an(t){var e=Rr[t.source];if(!e){var r=sn(t.source);r?(e=Rr[t.source]={url:r.url,map:new gc(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(n,i){var l=e.map.sourcesContent[i];if(l){var u=tn(e.url,n);Ut[u]=l}})):e=Rr[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var o=e.map.originalPositionFor(t);if(o.source!==null)return o.source=tn(e.url,o.source),o}return t}function is(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=an({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+is(e[2])+")":t}function vc(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var o=this.getColumnNumber();o&&(e+=":"+o)}}var n="",i=this.getFunctionName(),l=!0,u=this.isConstructor(),s=!(this.isToplevel()||u);if(s){var a=this.getTypeName();a==="[object Object]"&&(a="null");var c=this.getMethodName();i?(a&&i.indexOf(a)!=0&&(n+=a+"."),n+=i,c&&i.indexOf("."+c)!=i.length-c.length-1&&(n+=" [as "+c+"]")):n+=a+"."+(c||"<anonymous>")}else u?n+="new "+(i||"<anonymous>"):i?n+=i:(n+=e,l=!1);return l&&(n+=" ("+e+")"),n}function ns(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=vc,e}function ss(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var o=t.getLineNumber(),n=t.getColumnNumber()-1,i=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,l=i.test(xc())?0:62;o===1&&n>l&&!on()&&!t.isEval()&&(n-=l);var u=an({source:r,line:o,column:n});e.curPosition=u,t=ns(t);var s=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?s():e.nextPosition.name||s()},t.getFileName=function(){return u.source},t.getLineNumber=function(){return u.line},t.getColumnNumber=function(){return u.column+1},t.getScriptNameOrSourceURL=function(){return u.source},t}var a=t.isEval()&&t.getEvalOrigin();return a&&(a=is(a),t=ns(t),t.getEvalOrigin=function(){return a}),t}function Sc(t,e){en&&(Ut={},Rr={});for(var r=t.name||"Error",o=t.message||"",n=r+": "+o,i={nextPosition:null,curPosition:null},l=[],u=e.length-1;u>=0;u--)l.push(`
    at `+ss(e[u],i)),i.nextPosition=i.curPosition;return i.curPosition=i.nextPosition=null,n+l.reverse().join("")}function as(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],o=+e[2],n=+e[3],i=Ut[r];if(!i&&pt&&pt.existsSync(r))try{i=pt.readFileSync(r,"utf8")}catch{i=""}if(i){var l=i.split(/(?:\r\n|\r|\n)/)[o-1];if(l)return r+":"+o+`
`+l+`
`+new Array(n).join(" ")+"^"}}return null}function Cc(t){var e=as(t),r=bc();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),yc(1)}function Bc(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,o=this.listeners(e).length>0;if(r&&!o)return Cc(arguments[1])}return t.apply(this,arguments)}}var wc=Pt.slice(0),Ec=Ot.slice(0);Ht.wrapCallSite=ss;Ht.getErrorSource=as;Ht.mapSourcePosition=an;Ht.retrieveSourceMap=sn;Ht.install=function(t){if(t=t||{},t.environment&&(Er=t.environment,["node","browser","auto"].indexOf(Er)===-1))throw new Error("environment "+Er+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(Pt.length=0),Pt.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(Ot.length=0),Ot.unshift(t.retrieveSourceMap)),t.hookRequire&&!on()){var e=ts(rn,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(i,l){return Ut[l]=i,Rr[l]=void 0,r.call(this,i,l)},e.prototype._compile.__sourceMapSupport=!0)}if(en||(en="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),rs||(rs=!0,Error.prepareStackTrace=Sc),!os){var o="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var n=ts(rn,"worker_threads");n.isMainThread===!1&&(o=!1)}catch{}o&&hc()&&(os=!0,Bc())}};Ht.resetRetrieveHandlers=function(){Pt.length=0,Ot.length=0,Pt=wc.slice(0),Ot=Ec.slice(0),sn=to(Ot),nn=to(Pt)}});import{run as Rc}from"@oclif/core";import{execa as zc}from"execa";import Yc from"chalk";import or from"chalk";import Ar from"fs-extra";import bs from"path";var cn={logLevel:process.env.SF_TUI_LOG_LEVEL||"INFO",consoleOutput:process.env.SF_TUI_CONSOLE_OUTPUT?process.env.SF_TUI_CONSOLE_OUTPUT==="true":!0,fileOutput:process.env.SF_TUI_FILE_OUTPUT?process.env.SF_TUI_FILE_OUTPUT==="true":!0,logFilePath:process.env.SF_TUI_LOG_FILE||`${process.env.HOME}/.sf-tui/logs/sf-tui.log`,maxLogFileSize:process.env.SF_TUI_MAX_LOG_FILE_SIZE?parseInt(process.env.SF_TUI_MAX_LOG_FILE_SIZE,10):5242880,maxLogFiles:process.env.SF_TUI_MAX_LOG_FILES?parseInt(process.env.SF_TUI_MAX_LOG_FILES,10):5};function oo(t){if(!["DEBUG","INFO","WARN","ERROR","FATAL"].includes(t.logLevel))throw new Error(`Invalid log level: ${t.logLevel}`);if(typeof t.consoleOutput!="boolean")throw new Error("consoleOutput must be a boolean");if(typeof t.fileOutput!="boolean")throw new Error("fileOutput must be a boolean");if(typeof t.logFilePath!="string"||t.logFilePath.trim()==="")throw new Error("Invalid logFilePath");if(typeof t.maxLogFileSize!="number"||t.maxLogFileSize<=0)throw new Error("Invalid maxLogFileSize");if(typeof t.maxLogFiles!="number"||t.maxLogFiles<=0)throw new Error("Invalid maxLogFiles");return t}function un(t){return typeof t!="string"?t:t.replace(/[\r\n]+/g," ")}var Pr=class{format(e){let r=un(e.message),o="",n="";if(e.details){let i={};for(let l in e.details)if(Object.prototype.hasOwnProperty.call(e.details,l)){let u=e.details[l];i[l]=typeof u=="string"?un(u):u}o=`
Details: ${JSON.stringify(i,null,2)}`}return e.stackTrace&&(n=`
Stack Trace: ${e.stackTrace}`),`[${e.timestamp}] [${e.level}] ${r}${o}${n}`}};import At from"fs-extra";var xs=3,dn=1e3,Or=class{constructor(e){this.rotationRetries=0;this.internalLogger={error:(e,r)=>console.error(`[LogRotationService] ${e}`,r||""),info:(e,r)=>console.log(`[LogRotationService] ${e}`,r||"")};this.config=e}updateConfig(e){this.config={...this.config,...e}}async checkAndRotate(){if(!(!this.config.fileOutput||!this.config.logFilePath))try{await At.pathExists(this.config.logFilePath)&&(await At.stat(this.config.logFilePath)).size>=this.config.maxLogFileSize&&await this.rotate()}catch(e){this.internalLogger.error(`Failed to check log rotation for ${this.config.logFilePath}:`,e)}}async rotate(){if(!this.config.fileOutput||!this.config.logFilePath){this.internalLogger.error("Rotation skipped: File output disabled or log path not set.");return}this.internalLogger.info(`Attempting to rotate log file: ${this.config.logFilePath}`);try{let e=`${this.config.logFilePath}.${this.config.maxLogFiles-1}`;await At.pathExists(e)&&(await At.unlink(e),this.internalLogger.info(`Deleted oldest log: ${e}`));for(let r=this.config.maxLogFiles-2;r>=0;r--){let o=r===0?this.config.logFilePath:`${this.config.logFilePath}.${r}`,n=`${this.config.logFilePath}.${r+1}`;await At.pathExists(o)&&(await At.rename(o,n),this.internalLogger.info(`Renamed ${o} to ${n}`))}await At.writeFile(this.config.logFilePath,""),this.internalLogger.info(`Created new log file: ${this.config.logFilePath}`),this.rotationRetries=0}catch(e){this.rotationRetries++;let r=`Failed to rotate log files (attempt ${this.rotationRetries}) for ${this.config.logFilePath}: ${e instanceof Error?e.message:String(e)}`;this.internalLogger.error(r),this.rotationRetries<xs?(this.internalLogger.info(`Retrying rotation in ${dn}ms...`),await new Promise(o=>setTimeout(o,dn)),await this.rotate()):this.internalLogger.error(`Max rotation retries reached for ${this.config.logFilePath}. Rotation failed for this cycle.`)}}};var Lr=(i=>(i.DEBUG="DEBUG",i.INFO="INFO",i.WARN="WARN",i.ERROR="ERROR",i.FATAL="FATAL",i))(Lr||{}),ys=5e3,Ts=100,no=class t{constructor(){this.logQueue=[];this.flushTimeout=null;this.isFlushing=!1;try{this.config=oo(cn)}catch(e){console.error(`Invalid logger configuration: ${e instanceof Error?e.message:String(e)}. Using default values.`),this.config={logLevel:"INFO",consoleOutput:!0,fileOutput:!1,logFilePath:"",maxLogFileSize:1*1024*1024,maxLogFiles:1}}this.formatter=new Pr,this.rotationService=new Or(this.config),this.ensureLogDirectory(),this.setupFlushInterval(),process.on("exit",this.handleExit.bind(this)),process.on("SIGINT",this.handleSignal.bind(this)),process.on("SIGTERM",this.handleSignal.bind(this)),process.on("uncaughtException",this.handleUncaughtException.bind(this))}static getInstance(){return t.instance||(t.instance=new t),t.instance}configure(e){try{this.config=oo({...this.config,...e})}catch(r){console.error(`Invalid partial logger configuration: ${r instanceof Error?r.message:String(r)}. Configuration not applied.`);return}this.rotationService.updateConfig(this.config),this.ensureLogDirectory()}async ensureLogDirectory(){if(this.config.fileOutput&&this.config.logFilePath){let e=bs.dirname(this.config.logFilePath);try{await Ar.ensureDir(e,{mode:448})}catch(r){console.error(`Failed to create log directory '${e}': ${r instanceof Error?r.message:String(r)}. Disabling file output.`),this.config.fileOutput=!1,this.rotationService.updateConfig({fileOutput:!1})}}else this.config.fileOutput=!1,this.rotationService.updateConfig({fileOutput:!1})}writeToConsole(e){if(!this.config.consoleOutput)return;let r;switch(e.level){case"DEBUG":r=or.blue;break;case"INFO":r=or.white;break;case"WARN":r=or.yellow;break;case"ERROR":case"FATAL":r=or.red;break;default:r=or.white}console.log(r(this.formatter.format(e)))}setupFlushInterval(){this.flushTimeout&&clearInterval(this.flushTimeout),this.flushTimeout=setInterval(()=>this.flushQueue(),ys)}async writeToFile(e){!this.config.fileOutput||!this.config.logFilePath||(this.logQueue.push(e),(e.level==="FATAL"||e.level==="ERROR"||this.logQueue.length>=Ts)&&(this.flushTimeout&&clearTimeout(this.flushTimeout),await this.flushQueue(),this.setupFlushInterval()))}async flushQueue(){if(!this.config.fileOutput||!this.config.logFilePath||this.isFlushing||this.logQueue.length===0)return;if(this.isFlushing=!0,await this.rotationService.checkAndRotate(),!this.config.fileOutput){this.isFlushing=!1,e.length>0&&(console.warn(`[Logger] File output disabled during log rotation attempt. ${e.length} log entries in queue will not be written to file.`),this.logQueue=[]);return}let e=[...this.logQueue];this.logQueue=[];let r=e.map(o=>this.formatter.format(o)+`
`).join("");try{await Ar.appendFile(this.config.logFilePath,r)}catch(o){console.error(`Failed to write to log file '${this.config.logFilePath}': ${o instanceof Error?o.message:String(o)}. Entries lost: ${e.length}`)}finally{this.isFlushing=!1,this.logQueue.length>0&&setTimeout(()=>this.flushQueue(),100)}}async handleExit(){this.flushTimeout&&(clearInterval(this.flushTimeout),this.flushTimeout=null),await this.flushQueue()}async handleSignal(){await this.handleExit(),process.exit(0)}async handleUncaughtException(e){let r=this.createLogEntry("FATAL",`Uncaught Exception: ${e.message}`,void 0,e);if(this.writeToConsole(r),this.config.fileOutput&&this.config.logFilePath)try{let o=this.formatter.format(r)+`
`;Ar.appendFileSync(this.config.logFilePath,o)}catch(o){console.error("Failed to write fatal exception to log file:",o)}await this.handleExit(),process.exit(1)}createLogEntry(e,r,o,n){let i=new Date().toISOString(),l=n?.stack;return{timestamp:i,level:e,message:r,details:o,stackTrace:l}}log(e,r,o,n){let i=Object.values(Lr).indexOf(e),l=Object.values(Lr).indexOf(this.config.logLevel);if(i>=l){let u=this.createLogEntry(e,r,o,n);this.writeToConsole(u),this.writeToFile(u)}}debug(e,r){this.log("DEBUG",e,r)}info(e,r){this.log("INFO",e,r)}warn(e,r,o){this.log("WARN",e,r,o)}error(e,r,o){this.log("ERROR",e,r,o)}fatal(e,r,o){this.log("FATAL",e,r,o)}logError(e,r,o){let n=r||e.message;this.error(n,o,e)}getLogFilePath(){return this.config.fileOutput?this.config.logFilePath:""}async clearLogs(){if(this.config.fileOutput&&this.config.logFilePath)try{await this.flushQueue(),await Ar.writeFile(this.config.logFilePath,""),X.info("Log file cleared.")}catch(e){console.error(`Failed to clear log file '${this.config.logFilePath}': ${e instanceof Error?e.message:String(e)}`)}}async shutdown(){await this.handleExit(),process.removeListener("exit",this.handleExit),process.removeListener("SIGINT",this.handleSignal),process.removeListener("SIGTERM",this.handleSignal),process.removeListener("uncaughtException",this.handleUncaughtException),this.flushTimeout&&(clearInterval(this.flushTimeout),this.flushTimeout=null)}},X=no.getInstance();var fn=(t,e,r="\u2026")=>t.length<=e?t:t.slice(0,e-r.length)+r;var kr=(t,e)=>{let r={...t};return io(t)&&io(e)&&Object.keys(e).forEach(o=>{io(e[o])?o in t?r[o]=kr(t[o],e[o]):Object.assign(r,{[o]:e[o]}):Object.assign(r,{[o]:e[o]})}),r},io=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);var nr=(s=>(s.UI="UI",s.NETWORK="NETWORK",s.FILESYSTEM="FILESYSTEM",s.COMMAND="COMMAND",s.AUTH="AUTH",s.PLUGIN="PLUGIN",s.VALIDATION="VALIDATION",s.UNKNOWN="UNKNOWN",s))(nr||{});var vs=24*60*60*1e3,Ss=60*60*1e3,so=class t{constructor(){this.errors=new Map;this.errorOrder=[];this.subscribers=[];this.cleanupInterval=null;this.generateErrorId=()=>`error-${Date.now()}-${Math.floor(Math.random()*1e4)}`;this.cleanupInterval=setInterval(()=>this.cleanupOldErrors(),Ss)}static getInstance(){return t.instance||(t.instance=new t),t.instance}subscribe(e){return this.subscribers.push(e),()=>{this.subscribers=this.subscribers.filter(r=>r!==e)}}notifySubscribers(e){for(let r of this.subscribers)try{r(e)}catch(o){X.error("Error in error subscriber",{subscriberError:o})}}severityToLogLevel(e){switch(e){case"LOW":return"INFO";case"MEDIUM":return"WARN";case"HIGH":case"CRITICAL":return"ERROR";default:return"ERROR"}}reportError(e,r){this.cleanupOldErrors();let o=null,n="MEDIUM",i="UNKNOWN",l=null,u=null,s=null;if(r)if(r instanceof Error)o=r;else{let p=r;"error"in p&&(o=p.error||null),"severity"in p&&p.severity!==void 0&&(n=p.severity),"category"in p&&p.category!==void 0&&(i=p.category),"context"in p&&(l=p.context||null),"details"in p&&(u=p.details||null),"userAction"in p&&(s=p.userAction||null)}let a={id:this.generateErrorId(),timestamp:new Date,message:e,error:o,severity:n,category:i,context:l,details:u,userAction:s,handled:!1};this.errors.set(a.id,a),this.errorOrder.push(a.id);let c=this.severityToLogLevel(a.severity),m=a.error?.message??"",d=m?`${e}: ${m}`:e,g={};m&&(g.error=m),a.error?.stack&&(g.stack=a.error.stack),a.details&&Object.assign(g,a.details);let h=a.error??void 0;switch(c){case"ERROR":X.error(d,g,h);break;case"WARN":X.warn(d,g,h);break;case"FATAL":X.fatal(d,g,h);break;default:X.info(d,g);break}return this.notifySubscribers(a),a}cleanupOldErrors(){let e=Date.now(),r=[];for(let o of this.errorOrder){let n=this.errors.get(o);n&&e-n.timestamp.getTime()<vs?r.push(o):this.errors.delete(o)}this.errorOrder=r}markAsHandled(e){let r=this.errors.get(e);r&&(r.handled=!0,this.errors.set(e,r))}getAllErrors(){return Array.from(this.errors.values())}getError(e){return this.errors.get(e)}clearErrors(){this.errors.clear(),this.errorOrder=[],X.info("All error reports cleared.")}submitFeedback(e){X.info(`User feedback received for error ${e.errorId}`,{feedback:e})}reportCommandError(e,r,o=null){return this.reportError(e,{error:r||null,severity:"MEDIUM",category:"COMMAND",details:o||null,userAction:"Please check the command and try again."})}reportNetworkError(e,r,o=null){return this.reportError(e,{error:r||null,severity:"MEDIUM",category:"NETWORK",details:o||null,userAction:"Please check your network connection and try again."})}reportAuthError(e,r,o=null){return this.reportError(e,{error:r||null,severity:"HIGH",category:"AUTH",details:o||null,userAction:"Please check your credentials and try again."})}reportValidationError(e,r,o=null){return this.reportError(e,{error:r||null,severity:"LOW",category:"VALIDATION",details:o||null,userAction:"Please check your input and try again."})}shutdown(){this.cleanupInterval&&(clearInterval(this.cleanupInterval),this.cleanupInterval=null),X.info("ErrorReporter shutdown complete.")}},se=so.getInstance();function gn(){process.on("uncaughtException",t=>{se.reportError("Uncaught exception",{error:t,severity:"CRITICAL",category:"UNKNOWN",userAction:"Please report this issue to the developers."}),X.fatal("Uncaught exception",{originalError:t.message,stack:t.stack}),typeof X.shutdown=="function"?X.shutdown().then(()=>{se.shutdown(),process.exit(1)}).catch(()=>{se.shutdown(),process.exit(1)}):(se.shutdown(),process.exit(1))}),process.on("unhandledRejection",(t,e)=>{let r=t instanceof Error?t:new Error(String(t));se.reportError("Unhandled promise rejection",{error:r,severity:"HIGH",category:"UNKNOWN",userAction:"Please report this issue to the developers."}),X.error("Unhandled promise rejection",{originalError:r.message,stack:r.stack,promiseDetails:e})})}import Ie from"fs";import mt from"path";import Cs from"os";import Bs from"crypto";var ws={ttl:5*60*1e3,maxSize:10*1024*1024,enabled:!0,cacheDir:mt.join(Cs.homedir(),".sf-tui","cache")},ir=class{constructor(e={}){this.memoryCache=new Map;this.stats={hits:0,misses:0,size:0,entries:0};this.options={...ws,...e},this.ensureCacheDirectory()}generateKey(e,r){let o=JSON.stringify({command:e,args:r});return Bs.createHash("md5").update(o).digest("hex")}get(e){if(!this.options.enabled)return null;let r=this.memoryCache.get(e);if(r&&this.isValid(r))return this.stats.hits++,r.value;try{let o=mt.join(this.options.cacheDir,`${e}.json`);if(Ie.existsSync(o)){let n=Ie.readFileSync(o,"utf8"),i=JSON.parse(n);if(this.isValid(i))return this.memoryCache.set(e,i),this.stats.hits++,i.value;Ie.unlinkSync(o)}}catch(o){X.error("Cache read error:",o)}return this.stats.misses++,null}set(e,r){if(this.options.enabled)try{let o=JSON.stringify(r),n=Buffer.byteLength(o);if(n>this.options.maxSize*.1){X.debug(`Cache item too large: ${n} bytes`);return}let i={key:e,value:r,timestamp:Date.now(),size:n};this.memoryCache.set(e,i);let l=mt.join(this.options.cacheDir,`${e}.json`);Ie.writeFileSync(l,JSON.stringify(i),"utf8"),this.stats.size+=n,this.stats.entries++,this.maybePruneCache()}catch(o){X.error("Cache write error:",o)}}has(e){if(!this.options.enabled)return!1;if(this.memoryCache.has(e)){let o=this.memoryCache.get(e);return this.isValid(o)}let r=mt.join(this.options.cacheDir,`${e}.json`);return Ie.existsSync(r)}delete(e){if(this.options.enabled){if(this.memoryCache.has(e)){let r=this.memoryCache.get(e);this.stats.size-=r.size,this.stats.entries--,this.memoryCache.delete(e)}try{let r=mt.join(this.options.cacheDir,`${e}.json`);Ie.existsSync(r)&&Ie.unlinkSync(r)}catch(r){X.error("Cache delete error:",r)}}}clear(){if(this.options.enabled){this.memoryCache.clear();try{let e=Ie.readdirSync(this.options.cacheDir);for(let r of e)r.endsWith(".json")&&Ie.unlinkSync(mt.join(this.options.cacheDir,r));this.stats={hits:0,misses:0,size:0,entries:0}}catch(e){X.error("Cache clear error:",e)}}}invalidate(e){if(this.options.enabled){for(let[r,o]of this.memoryCache.entries())r.startsWith(e)&&(this.stats.size-=o.size,this.stats.entries--,this.memoryCache.delete(r));try{let r=Ie.readdirSync(this.options.cacheDir);for(let o of r)o.startsWith(e)&&o.endsWith(".json")&&Ie.unlinkSync(mt.join(this.options.cacheDir,o))}catch(r){X.error("Cache invalidation error:",r)}}}getStats(){return{...this.stats}}isValid(e){return Date.now()-e.timestamp<this.options.ttl}ensureCacheDirectory(){try{Ie.existsSync(this.options.cacheDir)||Ie.mkdirSync(this.options.cacheDir,{recursive:!0})}catch(e){X.error("Failed to create cache directory:",e)}}maybePruneCache(){if(!(this.stats.size<=this.options.maxSize))try{let e=Ie.readdirSync(this.options.cacheDir).filter(o=>o.endsWith(".json")).map(o=>{let n=mt.join(this.options.cacheDir,o),i=Ie.statSync(n);return{path:n,size:i.size,mtime:i.mtime.getTime()}}).sort((o,n)=>o.mtime-n.mtime),r=0;for(let o of e){Ie.unlinkSync(o.path),r+=o.size;let n=mt.basename(o.path,".json");if(this.memoryCache.has(n)&&this.memoryCache.delete(n),this.stats.size-r<=this.options.maxSize*.8)break}this.stats.size-=r}catch(e){X.error("Cache pruning error:",e)}}},ao=new ir;import Gt from"fs";import Ir from"path";import Es from"os";import{fileURLToPath as Rs}from"url";var Ps=Rs(import.meta.url),du=Ir.dirname(Ps),Vt={theme:"salesforce",editor:process.env.EDITOR||"code",defaultOrg:void 0,apiVersion:"58.0",plugins:[],telemetry:!0,keyboardShortcuts:{},cache:{enabled:!0,ttl:5*60*1e3,maxSize:10*1024*1024,commandCache:{enabled:!0,exclude:["org:create","org:delete","auth","deploy","retrieve","push","pull","data:import","data:export","apex:execute"]}},experimental:{features:[]}},sr=Ir.join(Es.homedir(),".sftui"),ar=Ir.join(sr,"config.json"),co=()=>{Gt.existsSync(sr)||Gt.mkdirSync(sr,{recursive:!0})},uo=()=>{try{if(co(),Gt.existsSync(ar)){let t=Gt.readFileSync(ar,"utf8");return kr({...Vt},JSON.parse(t))}return Dr(Vt),{...Vt}}catch(t){return console.error("Error loading configuration:",t),{...Vt}}},Dr=t=>{try{co();let e=uo(),r=kr(e,t);Gt.writeFileSync(ar,JSON.stringify(r,null,2),"utf8")}catch(e){console.error("Error saving configuration:",e)}},fo=t=>{let e=uo();return t?e[t]:e},Os=(t,e)=>{let o={...uo(),[t]:e};Dr(o)},As=()=>{Dr(Vt)},Ls=()=>{let t=fo("cache");return{enabled:t.enabled,ttl:t.ttl,maxSize:t.maxSize,cacheDir:Ir.join(sr,"cache")}},ks=t=>{let e=t||fo("theme");return(J(),hs(xn)).getTheme(e)},it={get:fo,set:Os,reset:As,getTheme:ks,getCacheOptions:Ls,get path(){return ar},get dir(){return sr}};co();Gt.existsSync(ar)||Dr(Vt);function Is(){let t=it.getCacheOptions();Object.assign(ao,new ir(t)),X.debug("Cache initialized with options:",t)}Is();import{execa as bu}from"execa";import Pc from"react";import{render as Oc}from"ink";import{useState as Nl}from"react";import{Box as Ei,useApp as $l}from"ink";J();import{createContext as Ds,useContext as Ms,useState as _s}from"react";import{jsx as Fs}from"react/jsx-runtime";var bn={themeName:"base",theme:St("base"),selectedOrg:void 0,devhubOrg:void 0,showStatusBar:!0,showHelp:!1},yn=Ds({state:bn,setTheme:()=>{},setSelectedOrg:()=>{},setDevhubOrg:()=>{},toggleStatusBar:()=>{},toggleHelp:()=>{}}),Tn=({children:t})=>{let[e,r]=_s(bn),s={state:e,setTheme:a=>{r(c=>({...c,themeName:a,theme:St(a)}))},setSelectedOrg:a=>{r(c=>({...c,selectedOrg:a}))},setDevhubOrg:a=>{r(c=>({...c,devhubOrg:a}))},toggleStatusBar:()=>{r(a=>({...a,showStatusBar:!a.showStatusBar}))},toggleHelp:()=>{r(a=>({...a,showHelp:!a.showHelp}))}};return Fs(yn.Provider,{value:s,children:t})},Mr=()=>{let t=Ms(yn);if(!t)throw new Error("useAppContext must be used within an AppProvider");return t};J();import{createContext as Ns,useContext as $s,useState as vn,useEffect as js}from"react";import{useInput as Us}from"ink";import{jsx as Hs}from"react/jsx-runtime";var Sn={help:{key:"?",description:"Show help",action:"help",global:!0},quit:{key:"q",ctrl:!0,description:"Quit application",action:"quit",global:!0},back:{key:"escape",description:"Go back",action:"back",global:!0},toggleStatusBar:{key:"s",ctrl:!0,description:"Toggle status bar",action:"toggleStatusBar",global:!0},toggleTheme:{key:"t",ctrl:!0,description:"Cycle themes",action:"toggleTheme",global:!0}},Cn=Ns({shortcuts:Sn,activeShortcuts:[],registerShortcut:()=>{},unregisterShortcut:()=>{},setContextShortcuts:()=>{},executeAction:()=>{}}),Bn=({children:t,actionHandlers:e})=>{let r=it.get("keyboardShortcuts")||{},o={...Sn};Object.entries(r).forEach(([g,h])=>{o[g]&&(o[g]={...o[g],...h,action:o[g].action,description:o[g].description})});let[n,i]=vn(o),[l,u]=vn([]),s=[...Object.values(n).filter(g=>g.global),...l];js(()=>{let g=it.get("keyboardShortcuts")||{},h={...n};Object.entries(g).forEach(([p,b])=>{h[p]&&(h[p]={...h[p],...b,action:h[p].action,description:h[p].description})}),i(h)},[]);let a=(g,h)=>{i(p=>({...p,[g]:h}))},c=g=>{i(h=>{let p={...h};return delete p[g],p})},m=g=>{u(g)},d=g=>{let h=e[g];h&&h()};return Us((g,h)=>{for(let p of s){let b=p.key===g||p.key===h.name||p.key==="escape"&&h.escape,C=(p.ctrl===void 0||p.ctrl===h.ctrl)&&(p.alt===void 0||p.alt===h.alt)&&(p.shift===void 0||p.shift===h.shift);if(b&&C){d(p.action);return}}}),Hs(Cn.Provider,{value:{shortcuts:n,activeShortcuts:s,registerShortcut:a,unregisterShortcut:c,setContextShortcuts:m,executeAction:d},children:t})},_r=()=>{let t=$s(Cn);if(!t)throw new Error("useKeyboardShortcuts must be used within a KeyboardProvider");return t};J();import{createContext as zs,useContext as Ws,useState as Nr}from"react";import{Box as Ae,Text as Y}from"ink";import{useInput as Ks}from"ink";J();import qs from"react";import{Box as wn,Text as st,useFocus as Vs,useInput as Gs}from"ink";import{jsx as Ct,jsxs as Fr}from"react/jsx-runtime";var En={single:["\u250C","\u2510","\u2514","\u2518","\u2500","\u2502","\u251C","\u2524"],double:["\u2554","\u2557","\u255A","\u255D","\u2550","\u2551","\u2560","\u2563"],round:["\u256D","\u256E","\u2570","\u256F","\u2500","\u2502","\u251C","\u2524"],"single-double":["\u2553","\u2556","\u2559","\u255C","\u2500","\u2551","\u255F","\u2562"],"double-single":["\u2552","\u2555","\u2558","\u255B","\u2550","\u2502","\u255E","\u2561"],classic:["+","+","+","+","-","|","+","+"],none:[" "," "," "," "," "," "," "," "]},at=({title:t,titleAlign:e="left",borderStyle:r="single",borderColor:o,padding:n=1,margin:i=0,width:l,height:u,flexDirection:s="column",flexGrow:a,flexShrink:c,flexBasis:m,alignItems:d="stretch",justifyContent:g="flex-start",children:h,focusable:p=!1,onFocus:b,onBlur:C,onClick:P,style:k={}})=>{let v=D(),{isFocused:O}=Vs({isActive:p,autoFocus:!1});Gs((me,ye)=>{p&&O&&(me===" "||ye.return)&&P&&P()},{isActive:p});let[L,$,re,T,R,K,q,G]=En[r]||En.single,ce=o||(O?v.colors.primary:v.colors.border),f=(()=>{if(typeof l=="number")return l-2;if(typeof l=="string")return l;let ot=qs.Children.toArray(h).map(nt=>typeof nt=="string"?nt:typeof nt=="number"?String(nt):"").join("").split(`
`).reduce((nt,cs)=>Math.max(nt,cs.length),0);return Math.max(30,ot+n*2)})(),x=()=>{if(!t)return null;let me=` ${t} `,ye=me.length,ot=2,nt=typeof f=="number"?f:30;return e==="center"?ot=Math.max(2,Math.floor((nt-ye)/2)):e==="right"&&(ot=Math.max(2,nt-ye-2)),Fr(st,{children:[R.repeat(ot),Ct(st,{bold:!0,color:O?v.colors.primary:v.colors.text,children:me}),R.repeat(Math.max(0,nt-ot-ye))]})},S=typeof n=="number"?{left:n,right:n,top:n,bottom:n}:{left:0,right:0,top:0,bottom:0,...n},B=typeof i=="number"?{marginLeft:i,marginRight:i,marginTop:i,marginBottom:i}:{marginLeft:0,marginRight:0,marginTop:0,marginBottom:0,...i},oe={borderStyle:"solid",borderColor:ce,borderLeft:O?`1 ${v.colors.primary}`:`1 ${v.colors.border}`,borderRight:O?`1 ${v.colors.primary}`:`1 ${v.colors.border}`,borderTop:O?`1 ${v.colors.primary}`:`1 ${v.colors.border}`,borderBottom:O?`1 ${v.colors.primary}`:`1 ${v.colors.border}`,...k};return Fr(wn,{flexDirection:"column",width:l,height:u,flexGrow:a,flexShrink:c,flexBasis:m,...B,children:[Fr(st,{children:[Ct(st,{color:ce,children:L}),t?x():Ct(st,{color:ce,children:R.repeat(typeof f=="number"?f:30)}),Ct(st,{color:ce,children:$})]}),Ct(wn,{flexDirection:s,alignItems:d,justifyContent:g,paddingLeft:S.left,paddingRight:S.right,paddingTop:S.top,paddingBottom:S.bottom,children:h}),Fr(st,{children:[Ct(st,{color:ce,children:re}),Ct(st,{color:ce,children:R.repeat(typeof f=="number"?f:30)}),Ct(st,{color:ce,children:T})]})]})};import{Fragment as Qs,jsx as M,jsxs as lt}from"react/jsx-runtime";var Rn=zs({showHelp:!1,toggleHelp:()=>{},currentTopic:null,setCurrentTopic:()=>{},topics:[],registerTopic:()=>{},unregisterTopic:()=>{},contextualHelp:[],setContextualHelp:()=>{}}),Ys=[{id:"navigation",title:"Navigation",content:lt(Ae,{flexDirection:"column",children:[M(Y,{children:"Navigate through the application using these keys:"}),M(Y,{children:"\u2022 Arrow keys: Move through menus and lists"}),M(Y,{children:"\u2022 Enter: Select an item or confirm an action"}),M(Y,{children:"\u2022 Esc: Go back to the previous screen"}),M(Y,{children:"\u2022 Ctrl+Q: Quit the application"})]}),keywords:["navigate","navigation","menu","arrow","keys","back"],relatedTopics:["shortcuts"]},{id:"shortcuts",title:"Keyboard Shortcuts",content:lt(Ae,{flexDirection:"column",children:[M(Y,{children:"Common keyboard shortcuts:"}),M(Y,{children:"\u2022 ?: Show help"}),M(Y,{children:"\u2022 Ctrl+Q: Quit application"}),M(Y,{children:"\u2022 Ctrl+S: Toggle status bar"}),M(Y,{children:"\u2022 Ctrl+T: Cycle through themes"}),M(Y,{children:"\u2022 Ctrl+R: Refresh current view"})]}),keywords:["keyboard","shortcuts","hotkeys","keys"],relatedTopics:["navigation"]},{id:"orgs",title:"Managing Salesforce Orgs",content:lt(Ae,{flexDirection:"column",children:[M(Y,{children:"Working with Salesforce orgs:"}),M(Y,{children:"\u2022 View a list of connected orgs in Org Manager"}),M(Y,{children:'\u2022 Set default org or DevHub with the "Set as Default" option'}),M(Y,{children:'\u2022 Open an org in browser with the "Open Org" option'}),M(Y,{children:'\u2022 Log out of an org with the "Delete Org" option'})]}),keywords:["org","orgs","salesforce","devhub","login","logout"]},{id:"metadata",title:"Working with Metadata",content:lt(Ae,{flexDirection:"column",children:[M(Y,{children:"Managing Salesforce metadata:"}),M(Y,{children:'\u2022 Deploy metadata to an org with the "Deploy" option'}),M(Y,{children:'\u2022 Retrieve metadata from an org with the "Retrieve" option'}),M(Y,{children:'\u2022 Compare metadata with the "Compare" option'})]}),keywords:["metadata","deploy","retrieve","compare"]},{id:"themes",title:"Themes",content:lt(Ae,{flexDirection:"column",children:[M(Y,{children:"Customizing the application appearance:"}),M(Y,{children:"\u2022 Select a theme in the Settings menu"}),M(Y,{children:"\u2022 Cycle through themes with Ctrl+T"}),M(Y,{children:"\u2022 Available themes: Base, Dark, High Contrast, Salesforce"})]}),keywords:["theme","themes","appearance","colors","dark","light"]}],Pn=({children:t})=>{let[e,r]=Nr(!1),[o,n]=Nr(null),[i,l]=Nr(Ys),[u,s]=Nr([]),a=()=>{r(h=>!h),e&&n(null)},c=h=>{l(p=>p.some(C=>C.id===h.id)?p.map(C=>C.id===h.id?h:C):[...p,h])},m=h=>{l(p=>p.filter(b=>b.id!==h))},d=h=>{let p=i.filter(b=>h.includes(b.id));s(p)};Ks((h,p)=>{h==="?"?a():p.escape&&e&&(o?n(null):r(!1))});let g={showHelp:e,toggleHelp:a,currentTopic:o,setCurrentTopic:n,topics:i,registerTopic:c,unregisterTopic:m,contextualHelp:u,setContextualHelp:d};return M(Rn.Provider,{value:g,children:t})},go=()=>{let t=Ws(Rn);if(!t)throw new Error("useHelp must be used within a HelpProvider");return t},On=()=>{let t=D(),{showHelp:e,toggleHelp:r,currentTopic:o,setCurrentTopic:n,topics:i,contextualHelp:l}=go();if(!e)return null;let u=[...l,...i.filter(s=>!l.some(a=>a.id===s.id))];if(o){let s=i.find(a=>a.id===o);return s?M(at,{title:s.title,borderStyle:"round",borderColor:t.colors.primary,padding:1,children:lt(Ae,{flexDirection:"column",children:[M(Ae,{marginBottom:1,children:s.content}),s.relatedTopics&&s.relatedTopics.length>0&&lt(Ae,{flexDirection:"column",marginTop:1,children:[M(Y,{bold:!0,children:"Related Topics:"}),M(Ae,{children:s.relatedTopics.map((a,c)=>{let m=i.find(d=>d.id===a);return m?lt(Ae,{marginRight:1,children:[M(Y,{color:t.colors.primary,underline:!0,onPress:()=>n(a),children:m.title}),c<s.relatedTopics.length-1&&M(Y,{children:", "})]},a):null})})]}),M(Ae,{marginTop:1,children:M(Y,{color:"gray",italic:!0,children:"Press ESC to go back"})})]})}):null}return M(at,{title:"Help Topics",borderStyle:"round",borderColor:t.colors.primary,padding:1,children:lt(Ae,{flexDirection:"column",children:[l.length>0&&lt(Qs,{children:[M(Y,{bold:!0,children:"Contextual Help"}),M(Ae,{flexDirection:"column",marginY:1,children:l.map(s=>M(Ae,{marginBottom:.5,children:M(Y,{color:t.colors.primary,underline:!0,onPress:()=>n(s.id),children:s.title})},s.id))})]}),M(Y,{bold:!0,children:"All Topics"}),M(Ae,{flexDirection:"column",marginY:1,children:u.map(s=>M(Ae,{marginBottom:.5,children:M(Y,{color:t.colors.primary,underline:!0,onPress:()=>n(s.id),children:s.title})},s.id))}),M(Ae,{marginTop:1,children:M(Y,{color:"gray",italic:!0,children:"Press ESC to close help"})})]})})};J();import{createContext as ka,useContext as Ia,useState as Oo,useEffect as Da}from"react";import{Box as ct,Text as _t}from"ink";import{v4 as Ma}from"uuid";import{useState as $r,useEffect as po,useCallback as Js}from"react";import{Text as lr,useInput as Xs,Box as An}from"ink";import{jsx as cr,jsxs as Ln}from"react/jsx-runtime";var ie=({value:t,onChange:e,placeholder:r="",onSubmit:o,focus:n=!0,mask:i,showCursor:l=!0,validate:u,width:s,multiline:a=!1})=>{let[c,m]=$r(t.length),[d,g]=$r(null),[h,p]=$r(n),[b,C]=$r(t);po(()=>{C(t),m(t.length)},[t]),po(()=>{if(u){let T=u(b);g(T===!1?"Invalid input":typeof T=="string"?T:null)}},[b,u]);let P=Js((T,R)=>{if(R.upArrow||R.downArrow||R.ctrl&&T==="c"||R.escape)return;let K=b,q=c;if(R.return){o&&(!u||!d)&&o(b);return}if(R.leftArrow)if(R.ctrl){let G=b.split(/\s+/),ce=0;for(let y=0;y<G.length;y++){if(ce+G[y].length>=c){y>0?q=b.indexOf(G[y-1]):q=0;break}ce+=G[y].length+1}}else q=Math.max(0,c-1);else if(R.rightArrow)if(R.ctrl){let G=b.split(/\s+/),ce=0;for(let y=0;y<G.length;y++){if(ce+=G[y].length,ce>c){q=Math.min(b.length,ce+1);break}ce+=1}}else q=Math.min(b.length,c+1);else R.delete?K=b.slice(0,c)+b.slice(c+1):R.backspace||R.delete?c>0&&(K=b.slice(0,c-1)+b.slice(c),q=c-1):R.home?q=0:R.end?q=b.length:T.length>0&&!R.ctrl&&!R.meta&&!R.alt&&(K=b.slice(0,c)+T+b.slice(c),q=c+T.length);K!==b&&(C(K),e(K)),q!==c&&m(q)},[b,c,e,o,u,d]);Xs(P,{isActive:h}),po(()=>{p(n)},[n]);let k=i?i.repeat(b.length):b,v="\u2588",O=k.slice(0,c),L=k.slice(c),$=O,re=L;if(s){let T=Math.max(0,s-1);if(O.length>T&&($="\u2026"+O.slice(-T+1)),L.length+$.length>T){let R=Math.max(0,T-$.length-1);re=L.slice(0,R)+(L.length>R?"\u2026":"")}}return Ln(An,{flexDirection:"column",children:[Ln(An,{children:[cr(lr,{children:$}),h&&l&&cr(lr,{inverse:!0,children:v||" "}),cr(lr,{children:re||(h&&l?" ":"")}),!$&&!re&&!h&&cr(lr,{dimColor:!0,children:r})]}),d&&cr(lr,{color:"red",children:d})]})};J();import{Text as jr,useFocus as Zs,useInput as ea,Box as ta}from"ink";var kn=(t,e)=>{let r={text:t.colors.text,background:t.colors.background,border:t.colors.border,hoverText:t.colors.text,hoverBackground:t.colors.backgroundHover,activeBackground:t.colors.highlight,disabledText:t.colors.textMuted,disabledBackground:t.colors.background,disabledBorder:t.colors.border};return{default:r,primary:n(t.colors.primary),secondary:n(t.colors.secondary),success:n(t.colors.success),warning:n(t.colors.warning),error:n(t.colors.error),info:n(t.colors.info)}[e]||r;function n(i){return{text:t.colors.textInverse,background:i,border:i,hoverText:t.colors.textInverse,hoverBackground:i,activeBackground:i,disabledText:t.colors.textInverse,disabledBackground:t.colors.textMuted,disabledBorder:t.colors.textMuted}}},In=(t,e,r,o,n={})=>{let i={paddingLeft:2,paddingRight:2,paddingTop:0,paddingBottom:0,height:3,minWidth:10,justifyContent:"center",alignItems:"center",borderStyle:"single",borderColor:t.border,backgroundColor:t.background,...n};return r||o?{...i,borderColor:t.disabledBorder,backgroundColor:t.disabledBackground,opacity:.7}:e?{...i,backgroundColor:t.hoverBackground,borderColor:t.border,borderStyle:"double"}:i},Dn=(t,e,r,o)=>{let n={color:t.text};return r||o?{...n,color:t.disabledText}:e?{...n,color:t.hoverText,bold:!0}:n};import{jsx as mo,jsxs as Mn}from"react/jsx-runtime";var ra=({children:t,variant:e="default",disabled:r=!1,fullWidth:o=!1,loading:n=!1,focusable:i=!0,onPress:l,style:u={},boxProps:s={}})=>{let a=D(),{isFocused:c}=Zs({isActive:i&&!r&&!n,autoFocus:!1});ea((h,p)=>{(h===" "||p.return)&&l&&!r&&!n&&l()},{isActive:i&&!r&&!n});let m=kn(a,e),d=In(m,c,r,n,u),g=Dn(m,c,r,n);return mo(ta,{...s,width:o?"100%":s.width,flexGrow:o?1:s.flexGrow,flexDirection:"row",alignItems:"center",justifyContent:"center",style:d,children:n?Mn(jr,{...g,children:[mo(jr,{children:"\u23F3 "}),mo(jr,{children:"Loading..."})]}):Mn(jr,{...g,children:[c&&"> ",t,c&&" <"]})})},Ze=ra;J();import{useEffect as hd,useState as xd}from"react";import{Text as yd}from"ink";import{jsx as Sd,jsxs as Cd}from"react/jsx-runtime";J();import{useMemo as Rd}from"react";import{Box as Od,Text as Ad,useFocus as Ld,useInput as kd}from"ink";import{jsx as _d,jsxs as Md}from"react/jsx-runtime";J();import{useEffect as jd,useState as Ud}from"react";import{Box as qd,Text as Vd}from"ink";import{jsx as Yd,jsxs as Kd}from"react/jsx-runtime";J();import{useEffect as ia,useState as _n}from"react";import{Box as Ue,Text as Be,useInput as sa}from"ink";J();import{Box as Ur,Text as Ke}from"ink";import{Fragment as ho,jsx as Ye,jsxs as kt}from"react/jsx-runtime";var na=({label:t,variant:e="horizontal",orientation:r="center",character:o,color:n,labelColor:i,style:l={},labelStyle:u={},lineStyle:s={}})=>{let a=D(),m=o||(e==="horizontal"?"\u2500":"\u2502"),d=n||a.colors.border,g=i||a.colors.text;return Ye(Ur,{style:l,flexDirection:e==="horizontal"?"row":"column",alignItems:"center",justifyContent:"center",width:e==="horizontal"?"100%":void 0,height:e==="vertical"?"100%":void 0,children:e==="horizontal"?(()=>{if(!t)return Ye(Ur,{children:Ye(Ke,{color:d,style:s,children:m.repeat(process.stdout.columns||40)})});let b=process.stdout.columns||80,P=(typeof t=="string"?t:"").length,k=Math.max(2,Math.floor((b-P-2)/2)),v=m.repeat(k),O=m.repeat(k),L;switch(r){case"left":L=kt(ho,{children:[Ye(Ke,{color:d,style:s,children:m.repeat(2)}),kt(Ke,{color:g,style:u,children:[" ",t," "]}),Ye(Ke,{color:d,style:s,children:m.repeat(b-P-6)})]});break;case"right":L=kt(ho,{children:[Ye(Ke,{color:d,style:s,children:m.repeat(b-P-6)}),kt(Ke,{color:g,style:u,children:[" ",t," "]}),Ye(Ke,{color:d,style:s,children:m.repeat(2)})]});break;case"center":default:L=kt(ho,{children:[Ye(Ke,{color:d,style:s,children:v}),kt(Ke,{color:g,style:u,children:[" ",t," "]}),Ye(Ke,{color:d,style:s,children:O})]})}return Ye(Ur,{children:L})})():kt(Ur,{flexDirection:"column",alignItems:"center",justifyContent:"center",children:[Ye(Ke,{color:d,style:s,children:m}),t&&Ye(Ke,{color:g,style:u,children:t})]})})},xo=na;import{jsx as Te,jsxs as Qe}from"react/jsx-runtime";var aa=({error:t,showDetails:e=!1,dismissible:r=!0,onDismiss:o,autoDismiss:n=0,markAsHandled:i=!0})=>{let l=D(),[u,s]=_n(!0),[a,c]=_n(e),m=p=>{switch(p){case"LOW":return l.colors.info;case"MEDIUM":return l.colors.warning;case"HIGH":case"CRITICAL":return l.colors.error;default:return l.colors.error}},d=p=>{switch(p){case"LOW":return"Minor";case"MEDIUM":return"Warning";case"HIGH":return"Error";case"CRITICAL":return"Critical";default:return"Error"}};ia(()=>{if(!u||!n)return;let p=setTimeout(()=>{g()},n);return()=>{clearTimeout(p)}},[u,n]);let g=()=>{!r&&!n||(s(!1),i&&se.markAsHandled(t.id),o&&o())};if(sa((p,b)=>{b.escape&&r&&g(),(p==="d"||p==="D")&&c(!a)}),!u)return null;let h=m(t.severity);return Qe(Ue,{flexDirection:"column",borderStyle:"round",borderColor:h,padding:1,children:[Qe(Ue,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[Te(Ue,{children:Qe(Be,{bold:!0,color:h,children:[d(t.severity),": ",t.category]})}),r&&Te(Ue,{children:Te(Be,{color:l.colors.textMuted,dimColor:!0,onClick:g,children:"[ESC to close]"})})]}),Te(Ue,{marginY:1,children:Te(Be,{wrap:"wrap",children:t.message})}),t.userAction&&Te(Ue,{marginY:1,children:Qe(Be,{italic:!0,color:l.colors.info,children:["Suggestion: ",t.userAction]})}),Te(Ue,{marginY:1,children:Qe(Be,{dimColor:!0,children:["Press 'D' to ",a?"hide":"show"," details"]})}),a&&Qe(Ue,{flexDirection:"column",marginTop:1,children:[Te(xo,{}),Qe(Ue,{marginY:1,children:[Te(Be,{bold:!0,children:"Error ID:"}),Te(Be,{children:" "}),Te(Be,{children:t.id})]}),t.context&&Qe(Ue,{marginY:1,children:[Te(Be,{bold:!0,children:"Context:"}),Te(Be,{children:" "}),Te(Be,{children:t.context})]}),Qe(Ue,{marginY:1,children:[Te(Be,{bold:!0,children:"Time:"}),Te(Be,{children:" "}),Te(Be,{children:t.timestamp.toLocaleString()})]}),t.details&&Object.keys(t.details).length>0&&Qe(Ue,{flexDirection:"column",marginY:1,children:[Te(Be,{bold:!0,children:"Details:"}),Object.entries(t.details).map(([p,b])=>Qe(Be,{children:[p,": ",typeof b=="object"?JSON.stringify(b):String(b)]},p))]}),t.error?.stack&&Qe(Ue,{flexDirection:"column",marginY:1,children:[Te(Be,{bold:!0,children:"Stack Trace:"}),Te(Ue,{flexDirection:"column",borderStyle:"single",borderColor:l.colors.textMuted,paddingX:1,height:5,overflow:"auto",marginTop:1,children:t.error.stack.split(`
`).map((p,b)=>Te(Be,{dimColor:!0,wrap:"wrap",children:fn(p,100)},b))})]})]})]})},zt=aa;import{Component as la}from"react";import{Box as Fn,Text as yo}from"ink";import{jsx as ur,jsxs as ca}from"react/jsx-runtime";var To=class extends la{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){let{id:o,componentName:n}=this.props,i=n||(o?`ErrorBoundary(${o})`:"ErrorBoundary"),l=se.reportError(`UI Error in ${i}`,{error:e,severity:"HIGH",category:"UI",context:i,details:{componentStack:r.componentStack},userAction:"Try refreshing the application or report this issue to the developers."});this.setState({errorInfo:r,errorId:l.id})}render(){let{children:e,showError:r=!0,fallback:o}=this.props,{hasError:n,error:i,errorId:l}=this.state;if(n){if(!r)return null;if(o)return o;if(i&&l){let u=se.getError(l);if(u)return ur(Fn,{flexDirection:"column",paddingY:1,children:ur(zt,{error:u})})}return ca(Fn,{flexDirection:"column",borderStyle:"round",borderColor:"red",padding:1,children:[ur(yo,{bold:!0,color:"red",children:"An error occurred in this component"}),i&&ur(yo,{wrap:"wrap",children:i.message}),ur(yo,{children:"Please try again or restart the application."})]})}return e}},It=To;import{createContext as ua,useContext as da,useState as fa,useEffect as ga}from"react";import{Box as xt}from"ink";import{jsx as Dt,jsxs as dr}from"react/jsx-runtime";var Nn=ua({errors:[],dismissError:()=>{},clearErrors:()=>{}}),fr=()=>da(Nn),pa=({children:t,maxVisibleErrors:e=3,position:r="top"})=>{let[o,n]=fa([]);ga(()=>{let s=se.subscribe(a=>{n(c=>c.some(m=>m.id===a.id)?c:[a,...c])});return()=>{s()}},[]);let i=s=>{se.markAsHandled(s),n(a=>a.filter(c=>c.id!==s))},l=()=>{o.forEach(s=>{se.markAsHandled(s.id)}),n([])},u=o.slice(0,e);return Dt(Nn.Provider,{value:{errors:o,dismissError:i,clearErrors:l},children:dr(xt,{flexDirection:"column",children:[r==="top"&&u.length>0&&dr(xt,{flexDirection:"column",marginBottom:1,children:[u.map(s=>Dt(zt,{error:s,onDismiss:()=>i(s.id)},s.id)),o.length>e&&Dt(xt,{justifyContent:"center",marginY:1,children:Dt(xt,{borderStyle:"single",paddingX:1,children:dr(xt,{children:[o.length-e," more ",o.length-e===1?"error":"errors"," not shown"]})})})]}),t,r==="bottom"&&u.length>0&&dr(xt,{flexDirection:"column",marginTop:1,children:[u.map(s=>Dt(zt,{error:s,onDismiss:()=>i(s.id)},s.id)),o.length>e&&Dt(xt,{justifyContent:"center",marginY:1,children:Dt(xt,{borderStyle:"single",paddingX:1,children:dr(xt,{children:[o.length-e," more ",o.length-e===1?"error":"errors"," not shown"]})})})]})]})})},gr=pa;J();import{useMemo as kf}from"react";import{Box as Df,Text as Mf}from"ink";import{jsx as $f,jsxs as Nf}from"react/jsx-runtime";J();import{useState as qf,useEffect as Vf}from"react";import{Box as zf,Text as Wf}from"ink";import{jsx as Qf,jsxs as Jf}from"react/jsx-runtime";import{useState as tg,useEffect as rg}from"react";import{Box as ng,Text as ig}from"ink";J();import{jsx as cg,jsxs as ug}from"react/jsx-runtime";J();import{useState as xa,useEffect as $n}from"react";import{Box as vo,Text as pr}from"ink";import{execa as jn}from"execa";var Hr={name:"sf-tui",version:"0.1.0",description:"A modern, interactive terminal UI for Salesforce CLI",main:"dist/index.js",bin:{sft:"./bin/run"},scripts:{build:"tsup",dev:"tsup --watch",test:"vitest run","test:watch":"vitest","test:ui":"vitest --ui","test:coverage":"vitest run --coverage","test:errors":"vitest run 'tests/(utils|components|integration)/*error*'","test:e2e":"vitest run 'tests/e2e/*.e2e.test.tsx'","test:all":"vitest run",lint:"eslint . --ext .ts",prepack:"rm -rf dist && npm run build",version:"git add -A src",postversion:"git push && git push --tags"},vitest:{environment:"jsdom",setupFiles:"./tests/setup.ts",globals:!0,coverage:{provider:"v8",reporter:["text","json","html"],exclude:["**/node_modules/**","**/dist/**","**/tests/**","**/*.test.ts","**/*.test.tsx"]}},dependencies:{"@oclif/core":"^3.0.0","@types/fs-extra":"^11.0.4",chalk:"^5.0.0",execa:"^8.0.0","fs-extra":"^11.3.0",ink:"^4.4.0","ink-box":"^2.0.0","ink-select-input":"^5.0.0","ink-spinner":"^4.0.0","ink-text-input":"^5.0.0",inquirer:"^9.0.0",open:"^9.0.0",ora:"^7.0.0",react:"^18.0.0","react-reconciler":"^0.29.0",uuid:"^11.1.0","yoga-layout-prebuilt":"^1.10.0"},devDependencies:{"@testing-library/jest-dom":"^6.6.3","@testing-library/react":"^14.2.1","@types/chai":"^4.3.0","@types/execa":"^0.9.0","@types/jest":"^29.5.12","@types/mocha":"^10.0.0","@types/node":"^20.17.48","@types/react":"^18.0.0","@types/react-dom":"^18.0.0","@types/react-reconciler":"^0.18.0","@types/resize-observer-browser":"^0.1.11","@types/testing-library__react":"^10.0.1","@types/uuid":"^10.0.0","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","@vitest/ui":"^1.6.0",eslint:"^8.0.0","eslint-config-prettier":"^9.0.0","eslint-plugin-react":"^7.30.0","ink-testing-library":"^4.0.0",jsdom:"^24.0.0",prettier:"^3.0.0",tsup:"^8.0.0",typescript:"^5.0.0",vitest:"^1.6.0"},engines:{node:">=18.0.0"},oclif:{commands:"./dist/commands",bin:"sft"},type:"module"};import{jsx as mr,jsxs as So}from"react/jsx-runtime";var ba=({width:t=process.stdout.columns||100})=>{let e=D(),[r,o]=xa({currentOrg:void 0,defaultOrg:void 0,devhubOrg:void 0,version:Hr.version,time:new Date().toLocaleTimeString()});return $n(()=>{let n=setInterval(()=>{o(i=>({...i,time:new Date().toLocaleTimeString()}))},1e3);return()=>clearInterval(n)},[]),$n(()=>{(async()=>{try{let{stdout:i}=await jn("sf",["config","get","target-org","--json"]),u=JSON.parse(i)?.result?.[0]?.value,{stdout:s}=await jn("sf",["config","get","target-dev-hub","--json"]),c=JSON.parse(s)?.result?.[0]?.value;o(m=>({...m,currentOrg:u,defaultOrg:u,devhubOrg:c}))}catch(i){console.error("Failed to get org info:",i)}})()},[]),So(vo,{flexDirection:"row",width:t,height:1,justifyContent:"space-between",backgroundColor:e.colors.primary,padding:0,children:[So(vo,{children:[mr(pr,{backgroundColor:e.colors.primary,color:e.colors.textInverse,children:` SF TUI v${r.version} `}),r.defaultOrg&&mr(pr,{backgroundColor:e.colors.secondary,color:e.colors.textInverse,children:` Org: ${r.defaultOrg} `}),r.devhubOrg&&mr(pr,{backgroundColor:e.colors.info,color:e.colors.textInverse,children:` DevHub: ${r.devhubOrg} `})]}),So(vo,{children:[mr(pr,{backgroundColor:e.colors.warning,color:e.colors.textInverse,children:" ?: Help "}),mr(pr,{backgroundColor:e.colors.primary,color:e.colors.textInverse,children:` ${r.time} `})]})]})},Co=ba;J();import{Box as Mt,Text as hr,useInput as ya}from"ink";import{Fragment as Un,jsx as et,jsxs as qr}from"react/jsx-runtime";var Ta=({onClose:t,title:e="Keyboard Shortcuts"})=>{let r=D(),{activeShortcuts:o}=_r(),n=o.filter(u=>u.global),i=o.filter(u=>!u.global);ya((u,s)=>{(s.escape||u==="q")&&t()});let l=u=>{let s=[u.ctrl?"Ctrl+":"",u.alt?"Alt+":"",u.shift?"Shift+":"",u.key.toUpperCase()].join("");return qr(Mt,{marginY:0,children:[et(Mt,{width:16,children:et(hr,{bold:!0,color:r.colors.primary,children:s})}),et(Mt,{children:et(hr,{children:u.description})})]},u.action)};return et(at,{title:e,borderStyle:"round",borderColor:r.colors.primary,padding:1,width:60,children:qr(Mt,{flexDirection:"column",children:[n.length>0&&qr(Un,{children:[et(hr,{bold:!0,children:"Global Shortcuts"}),et(Mt,{flexDirection:"column",marginY:1,children:n.map(l)})]}),i.length>0&&qr(Un,{children:[et(hr,{bold:!0,children:"Context Shortcuts"}),et(Mt,{flexDirection:"column",marginY:1,children:i.map(l)})]}),et(Mt,{marginTop:1,children:et(hr,{color:"gray",italic:!0,children:"Press ESC or q to close"})})]})})},Bo=Ta;J();import{useEffect as va}from"react";import{Box as xr,Text as Sa,useInput as Ca}from"ink";import{jsx as Wt,jsxs as Hn}from"react/jsx-runtime";var Ba=({isOpen:t=!1,title:e,children:r,width:o=60,height:n="auto",showCloseButton:i=!0,closeButtonLabel:l="Close",showBackdrop:u=!0,onClose:s,style:a={},contentProps:c={}})=>{let m=D();if(Ca((C,P)=>{P.escape&&s&&s()},{isActive:t}),va(()=>{if(t)return()=>{}},[t]),!t)return null;let d={position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:`${o}%`,maxWidth:"90%",minHeight:typeof n=="number"?`${n}%`:"auto",maxHeight:"90%",backgroundColor:m.colors.background,borderStyle:"single",borderColor:m.colors.border,flexDirection:"column",...a},g={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center",zIndex:1e3},h={borderBottomStyle:"single",borderBottomColor:m.colors.border,paddingX:1,paddingY:0,flexDirection:"row",justifyContent:"space-between",alignItems:"center",height:3},p={padding:1,flexGrow:1,overflow:"hidden"},b={borderTopStyle:"single",borderTopColor:m.colors.border,padding:1,flexDirection:"row",justifyContent:"flex-end",alignItems:"center",height:4};return Wt(xr,{...u?{style:g}:{},children:Hn(xr,{style:d,children:[Hn(xr,{style:h,children:[Wt(Sa,{bold:!0,children:e}),i&&s&&Wt(Ze,{variant:"text",onPress:s,style:{padding:0,height:1},children:"\u2715"})]}),Wt(xr,{...c,style:{...p,...c.style},children:r}),Wt(xr,{style:b,children:s&&Wt(Ze,{variant:"secondary",onPress:s,children:l})})]})})},br=Ba;J();import{useCallback as wo,useMemo as qn}from"react";import{Box as Eo,Text as wa}from"ink";import{jsx as yr,jsxs as Vn}from"react/jsx-runtime";var Ea=({isOpen:t=!1,title:e="Confirm",message:r,confirmLabel:o="Confirm",cancelLabel:n="Cancel",confirmVariant:i="primary",cancelVariant:l="default",showCancel:u=!0,closeOnBackdropClick:s=!0,onConfirm:a,onCancel:c,style:m={}})=>{let d=D(),g=wo(()=>{a()},[a]),h=wo(()=>{c()},[c]),p=wo(()=>{s&&c()},[s,c]),b=qn(()=>Vn(Eo,{justifyContent:"flex-end",gap:1,children:[u&&yr(Ze,{variant:l,onPress:h,children:n}),yr(Ze,{variant:i,onPress:g,children:o})]}),[u,l,n,i,o,h,g]),C=qn(()=>yr(Eo,{flexDirection:"column",gap:1,children:typeof r=="string"?yr(wa,{children:r}):r}),[r]);return yr(br,{isOpen:t,title:e,onClose:h,style:m,showBackdrop:!0,showCloseButton:!1,children:Vn(Eo,{flexDirection:"column",gap:2,children:[C,b]})})},Ro=Ea;J();import{useState as Wg,useRef as Kg,useEffect as Yg}from"react";import{Box as Jg,Text as Xg}from"ink";import{Fragment as op,jsx as np,jsxs as ip}from"react/jsx-runtime";J();import{Text as lp}from"ink";import{jsx as dp}from"react/jsx-runtime";J();import{Box as pp,Text as mp}from"ink";import{jsx as yp,jsxs as Tp}from"react/jsx-runtime";J();import{Box as Cp,Text as Bp}from"ink";import{jsx as Rp,jsxs as Pp}from"react/jsx-runtime";J();import{useState as Np,useRef as $p,useEffect as jp}from"react";import{Box as Hp,Text as qp}from"ink";import{useState as Lp,useRef as kp,useLayoutEffect as Ip}from"react";import{jsx as Wp,jsxs as Kp}from"react/jsx-runtime";J();import{useCallback as em}from"react";import{Box as rm,Text as nm}from"ink";import{jsx as cm,jsxs as lm}from"react/jsx-runtime";J();import{useState as Po,useEffect as Pa}from"react";import{Box as Oa}from"ink";import{jsx as La}from"react/jsx-runtime";var Aa=({children:t,type:e="fade",duration:r=300,visible:o=!0,onComplete:n})=>{let[i,l]=Po(!1),[u,s]=Po(!1),[a,c]=Po(0),m=D(),d=8,g=r/d;Pa(()=>{if(o!==i){s(!0),c(o?0:d);let b=setInterval(()=>{c(C=>{let P=o?C+1:C-1;return o&&P>=d||!o&&P<=0?(s(!1),l(o),clearInterval(b),n&&n(),o?d:0):P})},g);return()=>clearInterval(b)}},[o,i,r,n]);let h=()=>{let b=a/d,C=e==="fade"?o?b:1-b:1,P={},k=10;switch(e){case"slide-left":P={translateX:o?-k*(1-b):-k*b};break;case"slide-right":P={translateX:o?k*(1-b):k*b};break;case"slide-up":P={translateY:o?k*(1-b):k*b};break;case"slide-down":P={translateY:o?-k*(1-b):-k*b};break;case"zoom":P={scale:o?.5+.5*b:.5+.5*(1-b)};break}return{opacity:C,...P}};if(!u&&!i)return null;let p=h();return La(Oa,{style:{opacity:p.opacity,transform:p.transform,transition:`all ${r}ms`},children:t})},Bt=Aa;import{jsx as ze,jsxs as Kt}from"react/jsx-runtime";var Gn=ka({notifications:[],showNotification:()=>"",updateNotification:()=>{},dismissNotification:()=>{},dismissAll:()=>{}}),zn=({children:t})=>{let[e,r]=Oo([]),[o,n]=Oo([]),i=a=>{let c=Ma(),m={...a,id:c,createdAt:new Date};if(r(d=>[...d,m]),n(d=>[...d,c]),a.autoDismiss){let d=a.dismissAfter||5e3;setTimeout(()=>{u(c)},d)}return c},l=(a,c)=>{r(m=>m.map(d=>d.id===a?{...d,...c}:d))},u=a=>{let c=e.find(m=>m.id===a);c?.onDismiss&&c.onDismiss(),n(m=>m.filter(d=>d!==a)),setTimeout(()=>{r(m=>m.filter(d=>d.id!==a))},300)},s=()=>{e.forEach(a=>{a.onDismiss&&a.onDismiss()}),n([]),setTimeout(()=>{r([])},300)};return ze(Gn.Provider,{value:{notifications:e,showNotification:i,updateNotification:l,dismissNotification:u,dismissAll:s},children:t})},Ao=()=>{let t=Ia(Gn);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t},Wn=()=>{let{notifications:t,dismissNotification:e}=Ao(),[r,o]=Oo([]),n=D();Da(()=>{o(s=>{let a=t.map(c=>c.id);return[...s.filter(c=>a.includes(c)),...a.filter(c=>!s.includes(c))]})},[t]);let i=s=>{switch(s){case"success":return n.colors.success;case"error":return n.colors.error;case"warning":return n.colors.warning;case"info":return n.colors.info;case"progress":return n.colors.primary;default:return n.colors.text}},l=s=>{switch(s){case"success":return"\u2713";case"error":return"\u2717";case"warning":return"\u26A0";case"info":return"\u2139";case"progress":return"\u27F3";default:return"\u2022"}},u=s=>{let{id:a,type:c,title:m,message:d,progress:g,maxProgress:h,actions:p}=s,b=i(c),C=l(c),P=r.includes(a),k=c==="progress"&&typeof g=="number",v=k?Math.round(g/(h||100)*100):0;return ze(Bt,{type:"slide-left",duration:300,visible:P,children:Kt(ct,{flexDirection:"column",borderStyle:"round",borderColor:b,marginY:1,padding:1,width:60,children:[Kt(ct,{children:[Kt(_t,{color:b,children:[C," "]}),ze(_t,{bold:!0,children:m}),ze(ct,{flexGrow:1}),ze(_t,{color:n.colors.textMuted,onPress:()=>e(a),children:"\xD7"})]}),ze(ct,{marginY:1,children:ze(_t,{children:d})}),k&&Kt(ct,{marginY:1,children:[ze(ct,{width:50,children:Kt(_t,{color:b,children:[Array(Math.floor(v/2)).fill("\u2588").join(""),Array(50-Math.floor(v/2)).fill("\u2591").join("")]})}),ze(ct,{marginLeft:1,children:Kt(_t,{children:[v,"%"]})})]}),p&&p.length>0&&ze(ct,{marginTop:1,children:p.map((O,L)=>ze(ct,{marginRight:2,children:ze(_t,{color:n.colors.primary,underline:!0,onPress:O.action,children:O.label})},L))})]})},a)};return ze(ct,{flexDirection:"column",position:"absolute",right:1,top:1,width:60,children:t.map(u)})};import{useState as Jn,useEffect as Na}from"react";import{Box as bt,Text as A}from"ink";J();import{useState as Kn,useEffect as _a}from"react";import{Box as wt,Text as Yn}from"ink";import{jsx as Je,jsxs as Lo}from"react/jsx-runtime";var Fa=({steps:t,isActive:e,onComplete:r,onSkip:o,initialStep:n=0})=>{let[i,l]=Kn(n),[u,s]=Kn(!1),a=D();_a(()=>{s(!!e)},[e]);let c=t[i],m=()=>{i<t.length-1?l(p=>p+1):r()},d=()=>{i>0&&l(p=>p-1)},g=()=>{s(!1),setTimeout(()=>{o()},300)};if(!e||!c)return null;let h=(i+1)/t.length*100;return Je(Bt,{type:"fade",duration:300,visible:u,children:Je(wt,{position:"absolute",top:2,right:2,flexDirection:"column",width:60,children:Je(at,{title:`Tutorial: ${c.title}`,borderStyle:"round",borderColor:a.colors.primary,padding:1,children:Lo(wt,{flexDirection:"column",children:[Je(wt,{marginBottom:1,children:typeof c.content=="string"?Je(Yn,{children:c.content}):c.content}),Je(wt,{marginY:1,children:Lo(Yn,{children:[Array(Math.floor(h/5)).fill("\u2588").join(""),Array(20-Math.floor(h/5)).fill("\u2591").join(""),` ${Math.round(h)}%`]})}),Lo(wt,{justifyContent:"space-between",marginTop:1,children:[Je(wt,{children:i>0&&Je(Ze,{label:"\u2190 Back",onPress:d,variant:"secondary",size:"small"})}),Je(wt,{children:Je(Ze,{label:"Skip Tutorial",onPress:g,variant:"danger",size:"small"})}),Je(wt,{children:Je(Ze,{label:i<t.length-1?"Next \u2192":"Finish",onPress:m,variant:"primary",size:"small"})})]})]})})})})},Qn=Fa;J();import{jsx as V,jsxs as be}from"react/jsx-runtime";var Xn=[{id:"welcome",element:"main-menu",title:"Welcome to SF TUI",content:be(bt,{flexDirection:"column",children:[V(A,{children:"Welcome to Salesforce Terminal UI! This tutorial will guide you through the main features of the application."}),V(A,{children:" "}),be(A,{children:["Press ",V(A,{color:"cyan",bold:!0,children:"Next"})," to continue or ",V(A,{color:"red",children:"Skip Tutorial"})," to exit."]})]}),position:"right"},{id:"navigation",element:"main-menu",title:"Basic Navigation",content:be(bt,{flexDirection:"column",children:[V(A,{children:"You can navigate through the application using:"}),be(A,{children:["\u2022 ",V(A,{bold:!0,children:"Arrow keys"}),": Move through menus and lists"]}),be(A,{children:["\u2022 ",V(A,{bold:!0,children:"Enter"}),": Select an item or confirm an action"]}),be(A,{children:["\u2022 ",V(A,{bold:!0,children:"Esc"}),": Go back to the previous screen"]})]}),position:"right"},{id:"orgs",element:"org-manager",title:"Managing Orgs",content:be(bt,{flexDirection:"column",children:[be(A,{children:["The ",V(A,{bold:!0,children:"Org Manager"})," allows you to:"]}),V(A,{children:"\u2022 View all connected Salesforce orgs"}),V(A,{children:"\u2022 Set default orgs and DevHubs"}),V(A,{children:"\u2022 Open orgs directly in your browser"}),V(A,{children:"\u2022 Log out of orgs when needed"})]}),position:"bottom"},{id:"metadata",element:"metadata-tools",title:"Metadata Tools",content:be(bt,{flexDirection:"column",children:[be(A,{children:["The ",V(A,{bold:!0,children:"Metadata Tools"})," help you:"]}),V(A,{children:"\u2022 Deploy code and configurations to orgs"}),V(A,{children:"\u2022 Retrieve metadata from orgs"}),V(A,{children:"\u2022 Compare metadata between different environments"})]}),position:"left"},{id:"run",element:"run-tools",title:"Run Tools",content:be(bt,{flexDirection:"column",children:[be(A,{children:["The ",V(A,{bold:!0,children:"Run Tools"})," allow you to:"]}),V(A,{children:"\u2022 Execute Apex code directly"}),V(A,{children:"\u2022 Run SOQL queries"}),V(A,{children:"\u2022 Trigger flows and processes"}),V(A,{children:"\u2022 Analyze results in a structured format"})]}),position:"top"},{id:"shortcuts",element:"keyboard-shortcuts",title:"Keyboard Shortcuts",content:be(bt,{flexDirection:"column",children:[V(A,{children:"SF TUI supports keyboard shortcuts:"}),be(A,{children:["\u2022 ",V(A,{bold:!0,children:"?"}),": Show help"]}),be(A,{children:["\u2022 ",V(A,{bold:!0,children:"Ctrl+Q"}),": Quit application"]}),be(A,{children:["\u2022 ",V(A,{bold:!0,children:"Ctrl+S"}),": Toggle status bar"]}),be(A,{children:["\u2022 ",V(A,{bold:!0,children:"Ctrl+T"}),": Cycle through themes"]})]}),position:"left"},{id:"settings",element:"settings",title:"Settings",content:be(bt,{flexDirection:"column",children:[be(A,{children:["The ",V(A,{bold:!0,children:"Settings"})," menu lets you:"]}),V(A,{children:"\u2022 Change the application theme"}),V(A,{children:"\u2022 Configure keyboard shortcuts"}),V(A,{children:"\u2022 View and manage other preferences"})]}),position:"right"},{id:"completion",element:"main-menu",title:"Tutorial Complete!",content:be(bt,{flexDirection:"column",children:[V(A,{children:"Congratulations! You've completed the basic tutorial."}),V(A,{children:" "}),be(A,{children:["Remember, you can press ",V(A,{bold:!0,children:"?"})," at any time to get context-sensitive help."]}),V(A,{children:" "}),V(A,{children:"Happy Salesforce development!"})]}),position:"bottom"}];var $a=({children:t})=>{let[e,r]=Jn(!1),[o,n]=Jn(0),i=D();Na(()=>{{let c=setTimeout(()=>{r(!0)},1e3);return()=>clearTimeout(c)}},[]);let l=()=>{r(!1),console.log("Tutorial completed and marked as done")},u=()=>{r(!1),console.log("Tutorial skipped and marked as done")},s=a=>{let c=Xn.findIndex(m=>m.id===a);c!==-1&&(n(c),r(!0))};return be(bt,{position:"relative",children:[t,V(Qn,{steps:Xn,isActive:e,onComplete:l,onSkip:u,initialStep:o})]})},Zn=$a;import{useState as Jt,useEffect as No,useCallback as Ll}from"react";import{Box as Nt,Text as Q,useInput as kl,useApp as Il}from"ink";import Dl from"ink-select-input";import Oe from"chalk";import{useState as Et,useEffect as ja}from"react";import{Box as we,Text as de,useInput as Ua}from"ink";import ko from"ink-select-input";import{execa as ei}from"execa";import ti from"ink-spinner";import{jsx as Z,jsxs as Le}from"react/jsx-runtime";var ri=({onBack:t})=>{let{errors:e,dismissError:r}=fr(),{showNotification:o,updateNotification:n,dismissNotification:i}=Ao(),[l,u]=Et([]),[s,a]=Et(!0),[c,m]=Et(null),[d,g]=Et(null),[h,p]=Et(""),[b,C]=Et(!1),[P,k]=Et(!1),[v,O]=Et({});ja(()=>{L()},[]);let L=async()=>{let y="";try{a(!0),m(null),y=o({type:"info",title:"Loading Orgs",message:"Fetching org list from Salesforce CLI...",progress:0,maxProgress:100});let{stdout:f}=await ei("sf",["org","list","--json"]);n(y,{progress:50,message:"Processing org data..."});let x=JSON.parse(f);if(x.status===0&&x.result){let S=x.result.nonScratchOrgs.concat(x.result.scratchOrgs||[]);u(S),n(y,{type:"success",title:"Orgs Loaded",message:`Found ${S.length} Salesforce orgs`,progress:100,autoDismiss:!0,dismissAfter:3e3})}else u([]),(!x.result||(!x.result.nonScratchOrgs||x.result.nonScratchOrgs.length===0)&&(!x.result.scratchOrgs||x.result.scratchOrgs.length===0))&&(n(y,{type:"warning",title:"No Orgs Found",message:"Use the Auth Manager to log in to a Salesforce org.",progress:100,autoDismiss:!0,dismissAfter:5e3}),se.reportError("No Salesforce orgs found",{severity:"LOW",category:"AUTH",context:"OrgManager",userAction:"Use the Auth Manager to log in to a Salesforce org."}))}catch(f){let x=`Failed to load orgs: ${f instanceof Error?f.message:String(f)}`;m(x),u([]),y&&n(y,{type:"error",title:"Error Loading Orgs",message:x,autoDismiss:!0,dismissAfter:5e3,actions:[{label:"Retry",action:L}]}),se.reportError("Failed to load Salesforce orgs",{error:f instanceof Error?f:new Error(String(f)),severity:"HIGH",category:"COMMAND",context:"OrgManager.loadOrgs",userAction:"Check if Salesforce CLI is installed and properly configured."})}finally{a(!1)}},$=y=>{g(y)},re=async(y,f=[])=>{try{C(!0),p("");let x=T(y,f),S=o({type:"progress",title:x,message:`Running: sf ${y} ${f.join(" ")}`,progress:0,maxProgress:100,autoDismiss:!1});O(me=>({...me,[y]:S}));let B=ei("sf",[y,...f]),oe="";B.stdout?.on("data",me=>{let ye=me.toString();oe+=ye,p(ot=>ot+ye),n(S,{progress:Math.min(95,oe.length/500*100),message:`Running: sf ${y} ${f.join(" ")}
${ye.slice(-50)}`})}),B.stderr?.on("data",me=>{let ye=me.toString();oe+=ye,p(ot=>ot+ye),n(S,{type:"warning",message:`Warning: ${ye.slice(-50)}`})}),await B,n(S,{type:"success",title:`${x} - Completed`,message:"Command completed successfully",progress:100,autoDismiss:!0,dismissAfter:5e3}),O(me=>{let ye={...me};return delete ye[y],ye}),await L()}catch(x){let S=`Error: ${x instanceof Error?x.message:String(x)}`;p(S);let B=v[y];B&&(n(B,{type:"error",title:`Error: ${T(y,f)}`,message:S,autoDismiss:!0,dismissAfter:8e3,actions:[{label:"Retry",action:()=>re(y,f)}]}),O(oe=>{let me={...oe};return delete me[y],me})),se.reportCommandError(`Failed to execute Salesforce CLI command: sf ${y} ${f.join(" ")}`,x instanceof Error?x:new Error(String(x)),{command:y,args:f})}finally{C(!1)}},T=(y,f)=>{switch(y){case"org":return f.includes("open")?"Opening Org":f.includes("display")?"Refreshing Org":f.includes("delete")?"Deleting Org":"Org Operation";case"config":return f.includes("target-org")?"Setting Default Org":f.includes("target-dev-hub")?"Setting Default DevHub":"Config Operation";case"auth":return f.includes("logout")?"Logging Out":"Auth Operation";default:return"Salesforce CLI Operation"}},R=y=>{re("org",["open","-o",y.username])},K=y=>{re("config",["set","target-org",y.username,"--global"])},q=y=>{re("config",["set","target-dev-hub",y.username,"--global"])},G=y=>{re("org",["display","-o",y.username,"--verbose"])},ce=async y=>{y.status==="Active"&&y.username.includes("test.com")?await re("org",["delete","scratch","-o",y.username,"--no-prompt"]):await re("auth",["logout","-o",y.username,"--no-prompt"]),await L(),g(null)};return Ua((y,f)=>{f.escape&&(P?k(!1):d?g(null):t())}),s?Z(we,{children:Le(de,{children:[Z(ti,{type:"dots"})," Loading orgs..."]})}):c?Le(we,{flexDirection:"column",children:[Le(de,{color:"red",children:["Error: ",c]}),Z(de,{children:"Press ESC to go back"})]}):d?P?Le(we,{flexDirection:"column",children:[Z(we,{marginBottom:1,children:Z(de,{bold:!0,color:"red",children:"\u26A0\uFE0F  Delete Org Confirmation"})}),Le(we,{marginBottom:2,children:[Le(de,{children:["Are you sure you want to delete the org ",Z(de,{bold:!0,children:d.alias||d.username}),"?"]}),Le(de,{children:["This action ",d.username.includes("test.com")?"will PERMANENTLY delete the scratch org":"will revoke authentication for this org","."]})]}),Z(we,{flexDirection:"column",marginBottom:2,children:Z(ko,{items:[{label:"\u274C Cancel - Keep this org",value:"cancel"},{label:"\u26A0\uFE0F Yes, DELETE this org",value:"confirm"}],onSelect:y=>{y.value==="confirm"?ce(d):k(!1)}})}),Z(de,{color:"gray",italic:!0,children:"Press ESC to cancel"})]}):Le(we,{flexDirection:"column",children:[Le(we,{marginBottom:1,children:[Le(de,{bold:!0,children:["Org: ",d.alias||d.username]}),Z(de,{children:"  "}),d.isDefaultUsername&&Z(de,{color:"green",children:"[Default]"}),d.isDefaultDevHub&&Z(de,{color:"blue",children:" [DevHub]"})]}),Z(we,{marginBottom:1,children:Le(de,{children:["Status: ",d.status]})}),Z(we,{marginBottom:2,children:Le(de,{children:["Instance: ",d.instanceUrl]})}),Z(we,{flexDirection:"column",marginBottom:2,children:Z(ko,{items:[{label:"Open Org in Browser",value:"open"},{label:"Set as Default Org",value:"set-default"},{label:"Set as Default Dev Hub",value:"set-dev-hub"},{label:"Refresh Org Info",value:"refresh"},{label:"Delete Org",value:"delete"},{label:"Back to List",value:"back"}],onSelect:y=>{switch(y.value){case"open":R(d);break;case"set-default":K(d);break;case"set-dev-hub":q(d);break;case"refresh":G(d);break;case"delete":k(!0);break;case"back":g(null);break}}})}),b&&Z(we,{children:Le(de,{children:[Z(ti,{type:"dots"})," Processing..."]})}),h&&Le(we,{flexDirection:"column",borderStyle:"round",padding:1,children:[Z(de,{bold:!0,children:"Output:"}),Z(de,{children:h})]}),Z(de,{color:"gray",italic:!0,children:"Press ESC to go back"})]}):Le(we,{flexDirection:"column",children:[Z(we,{marginBottom:1,children:Z(de,{bold:!0,children:"Your Salesforce Orgs"})}),l.length===0?Z(de,{children:"No orgs found. Use 'sf org login web' to authenticate with an org."}):Z(we,{flexDirection:"column",children:Z(ko,{items:l.map(y=>({label:`${y.isDefaultUsername?"\u2605 ":"  "}${y.alias||y.username}`,value:y.username,org:y})),onSelect:y=>$(y.org),itemComponent:({isSelected:y,label:f,org:x})=>Le(we,{children:[Z(de,{color:y?"cyan":"white",children:f}),Z(de,{children:"  "}),Le(de,{color:"gray",children:[x.instanceUrl," ",x.isDefaultDevHub&&"(DevHub)"]})]})})}),Z(we,{marginTop:1,children:Z(de,{children:"Press ESC to go back"})})]})};import{useState as Ft}from"react";import{Box as De,Text as ee,useInput as Ha,Newline as Vr}from"ink";import oi from"ink-select-input";import{execa as qa}from"execa";import Va from"ink-spinner";import{Fragment as za,jsx as j,jsxs as Me}from"react/jsx-runtime";var Ga=[{label:"Standard Project",value:"standard",description:"A standard Salesforce project with the default settings"},{label:"Empty Project",value:"empty",description:"Create an empty Salesforce project"},{label:"Analytics Project",value:"analytics",description:"A project with Analytics (Wave) templates"},{label:"Functions Project",value:"functions",description:"A project with Salesforce Functions support"},{label:"LWC Project",value:"lwc",description:"A project optimized for Lightning Web Components"},{label:"Package Project",value:"pkg",description:"A project for developing unlocked or managed packages"}],ni=({onBack:t})=>{let[e,r]=Ft("type"),[o,n]=Ft("standard"),[i,l]=Ft("my-sfdx-project"),[u,s]=Ft(process.cwd()),[a,c]=Ft(""),[m,d]=Ft(!1),[g,h]=Ft("");Ha((v,O)=>{O.escape&&(e==="type"?t():r("type"))});let p=async()=>{d(!0),c("");try{let v=["project","generate","--name",i];switch(o){case"empty":v.push("--empty");break;case"analytics":v.push("--template","analytics");break;case"functions":v.push("--template","functions");break;case"lwc":v.push("--template","lwc");break;case"pkg":v.push("--template","package");break}let O=`${u}/${i}`.replace(/\/\//g,"/");v.push("--output-dir",u);let L=qa("sf",v);L.stdout?.on("data",$=>{c(re=>re+$.toString())}),L.stderr?.on("data",$=>{c(re=>re+$.toString())}),await L,h(O),r("creating")}catch(v){c(`Error: ${v instanceof Error?v.message:String(v)}`)}finally{d(!1)}},b=()=>Me(De,{flexDirection:"column",children:[j(ee,{bold:!0,children:"Select Project Type"}),j(ee,{children:"Choose the type of Salesforce project you'd like to create:"}),j(De,{marginTop:1,marginBottom:2,children:j(oi,{items:Ga.map(v=>({...v,key:v.value})),onSelect:v=>{n(v.value),r("name")},itemComponent:({isSelected:v,label:O,description:L})=>Me(De,{children:[j(ee,{color:v?"cyan":"white",children:O}),j(ee,{children:"  "}),j(ee,{color:"gray",children:L})]})})}),j(ee,{color:"gray",italic:!0,children:"Use arrow keys to navigate, Enter to select, ESC to go back"})]}),C=()=>Me(De,{flexDirection:"column",children:[j(ee,{bold:!0,children:"Project Name"}),j(ee,{children:"Enter a name for your project (alphanumeric and hyphens only):"}),Me(De,{marginTop:1,marginBottom:2,children:[j(ee,{children:"Project name: "}),j(ie,{value:i,onChange:l,onSubmit:()=>r("directory"),validate:v=>/^[a-zA-Z0-9-]+$/.test(v)||"Project name can only contain letters, numbers, and hyphens"})]}),j(ee,{color:"gray",italic:!0,children:"Press Enter to continue, ESC to go back"})]}),P=()=>Me(De,{flexDirection:"column",children:[j(ee,{bold:!0,children:"Project Directory"}),j(ee,{children:"Where would you like to create the project?"}),Me(De,{marginTop:1,marginBottom:1,children:[j(ee,{children:"Directory: "}),j(ie,{value:u,onChange:s,onSubmit:p})]}),j(De,{marginBottom:2,children:Me(ee,{children:["Full path: ",u,"/",i]})}),j(De,{flexDirection:"column",marginBottom:2,children:j(oi,{items:[{label:"Create Project",value:"create"},{label:"Change Project Type",value:"type"},{label:"Change Project Name",value:"name"},{label:"Cancel",value:"cancel"}],onSelect:v=>{switch(v.value){case"create":p();break;case"type":r("type");break;case"name":r("name");break;case"cancel":t();break}}})}),j(ee,{color:"gray",italic:!0,children:"ESC to go back"})]}),k=()=>j(De,{flexDirection:"column",children:m?Me(za,{children:[Me(ee,{children:[j(Va,{type:"dots"})," Creating project..."]}),j(De,{marginTop:1,borderStyle:"round",padding:1,height:10,overflow:"hidden",children:j(ee,{children:a||"Initializing project..."})})]}):g?Me(De,{flexDirection:"column",children:[j(ee,{color:"green",children:"\u2713 Project created successfully!"}),j(Vr,{}),Me(ee,{children:["Project location: ",g]}),j(Vr,{}),j(ee,{children:"Next steps:"}),Me(ee,{children:["  1. ",Me(ee,{color:"cyan",children:["cd ",g.split("/").pop()]})]}),Me(ee,{children:["  2. ",j(ee,{color:"cyan",children:"sft"})," to open the TUI in your new project"]}),j(Vr,{}),j(ee,{children:"Press any key to continue..."})]}):Me(De,{flexDirection:"column",children:[j(ee,{color:"red",children:"Error creating project"}),j(De,{marginTop:1,borderStyle:"round",padding:1,height:10,overflow:"hidden",children:j(ee,{children:a||"Unknown error occurred"})}),j(Vr,{}),j(ee,{children:"Press any key to continue..."})]})});return Me(De,{flexDirection:"column",padding:1,children:[j(De,{marginBottom:1,children:j(ee,{bold:!0,children:"New Salesforce Project"})}),e==="type"&&b(),e==="name"&&C(),e==="directory"&&P(),e==="creating"&&k(),e!=="creating"&&j(ee,{color:"gray",italic:!0,children:"ESC to go back"})]})};import{useState as Rt,useEffect as Wa}from"react";import{Box as fe,Text as ve,useInput as Ka}from"ink";import Gr from"ink-select-input";import{execa as ii}from"execa";import Ya from"ink-spinner";import{jsx as z,jsxs as $e}from"react/jsx-runtime";var si=({onBack:t})=>{let[e,r]=Rt([]),[o,n]=Rt(!0),[i,l]=Rt(""),[u,s]=Rt(""),[a,c]=Rt(null),[m,d]=Rt("list"),[g,h]=Rt(""),[p,b]=Rt("");Wa(()=>{C()},[]);let C=async()=>{try{n(!0),l("");let{stdout:T}=await ii("sf",["alias","list","--json"]),R=JSON.parse(T);if(R.status===0&&R.result){let K=Object.entries(R.result).map(([q,G])=>({alias:q,value:String(G)}));r(K)}else r([])}catch(T){l(`Failed to load aliases: ${T instanceof Error?T.message:String(T)}`),r([])}finally{n(!1)}},P=async(T,R=[])=>{try{s("");let K=ii("sf",[T,...R]);return K.stdout?.on("data",q=>{s(G=>G+q.toString())}),K.stderr?.on("data",q=>{s(G=>G+q.toString())}),await K,await C(),!0}catch(K){return s(`Error: ${K instanceof Error?K.message:String(K)}`),!1}},k=async()=>{if(!g||!p){l("Both alias name and value are required");return}await P("alias",["set",g,p])&&(h(""),b(""),d("list"))},v=async T=>{await P("alias",["unset",T])&&(c(null),d("list"))};Ka((T,R)=>{R.escape&&(m!=="list"?(d("list"),c(null)):t())});let O=()=>$e(fe,{flexDirection:"column",children:[z(fe,{marginBottom:1,children:z(ve,{bold:!0,children:"Your Salesforce CLI Aliases"})}),o?z(fe,{children:$e(ve,{children:[z(Ya,{type:"dots"})," Loading aliases..."]})}):i?$e(ve,{color:"red",children:["Error: ",i]}):e.length===0?z(ve,{children:"No aliases found. Create one to get started."}):z(fe,{flexDirection:"column",children:z(fe,{marginBottom:1,children:z(Gr,{items:[...e.map(T=>({label:`${T.alias} = ${T.value}`,value:T.alias,alias:T})),{label:"\u2795 Add New Alias",value:"add"}],onSelect:T=>{T.value==="add"?d("add"):(c(T.alias),d("info"))},itemComponent:({isSelected:T,label:R})=>z(ve,{color:T?"cyan":"white",children:R})})})}),z(fe,{marginTop:1,children:z(ve,{children:"Press ESC to go back"})})]}),L=()=>$e(fe,{flexDirection:"column",children:[z(fe,{marginBottom:1,children:z(ve,{bold:!0,children:"Add New Alias"})}),$e(fe,{marginBottom:1,flexDirection:"column",children:[$e(fe,{marginBottom:1,children:[z(ve,{children:"Alias Name: "}),z(ie,{value:g,onChange:h,placeholder:"my-alias"})]}),$e(fe,{marginBottom:2,children:[z(ve,{children:"Alias Value: "}),z(ie,{value:p,onChange:b,placeholder:"user@example.com or 00D..."})]}),z(fe,{flexDirection:"column",marginBottom:2,children:z(Gr,{items:[{label:"Create Alias",value:"create"},{label:"Cancel",value:"cancel"}],onSelect:T=>{T.value==="create"?k():d("list")}})})]}),z(ve,{color:"gray",italic:!0,children:"ESC to go back"})]}),$=()=>a?$e(fe,{flexDirection:"column",children:[z(fe,{marginBottom:1,children:$e(ve,{bold:!0,children:["Alias: ",a.alias]})}),z(fe,{marginBottom:2,children:$e(ve,{children:["Value: ",a.value]})}),z(fe,{flexDirection:"column",marginBottom:2,children:z(Gr,{items:[{label:"Edit Alias",value:"edit"},{label:"Delete Alias",value:"delete"},{label:"Back to List",value:"back"}],onSelect:T=>{switch(T.value){case"edit":h(a.alias),b(a.value),d("edit");break;case"delete":d("delete");break;case"back":d("list"),c(null);break}}})}),z(ve,{color:"gray",italic:!0,children:"ESC to go back"})]}):null,re=()=>a?$e(fe,{flexDirection:"column",children:[z(fe,{marginBottom:1,children:z(ve,{bold:!0,children:"Delete Alias"})}),$e(fe,{marginBottom:2,children:[$e(ve,{children:["Are you sure you want to delete the alias '",a.alias,"'?"]}),$e(ve,{children:["Value: ",a.value]})]}),z(fe,{flexDirection:"column",marginBottom:2,children:z(Gr,{items:[{label:"\u2705 Yes, delete it",value:"confirm"},{label:"\u274C No, keep it",value:"cancel"}],onSelect:T=>{T.value==="confirm"?v(a.alias):d("info")}})}),z(ve,{color:"gray",italic:!0,children:"ESC to go back"})]}):null;return $e(fe,{flexDirection:"column",padding:1,children:[z(fe,{marginBottom:1,children:z(ve,{bold:!0,children:"Salesforce CLI Alias Manager"})}),m==="list"&&O(),m==="add"&&L(),m==="info"&&$(),m==="delete"&&re(),u&&z(fe,{marginTop:1,borderStyle:"round",padding:1,children:z(ve,{children:u})}),i&&z(fe,{marginTop:1,children:z(ve,{color:"red",children:i})})]})};import{useState as yt}from"react";import{Box as Ee,Text as te,useInput as Qa,Newline as Tr}from"ink";import ai from"ink-select-input";import{execa as Ja}from"execa";import Xa from"ink-spinner";import Za from"open";import{Fragment as tl,jsx as F,jsxs as _e}from"react/jsx-runtime";var el=[{label:"Web Login (Recommended)",value:"web",description:"Opens a browser window to log in to your org",requiresInput:!1},{label:"JWT Bearer Flow",value:"jwt",description:"Authenticate using a JWT bearer token",requiresInput:!0},{label:"Device Code Flow",value:"device",description:"Authenticate using a device code",requiresInput:!1},{label:"Access Token",value:"token",description:"Authenticate with an existing access token",requiresInput:!0},{label:"SOAP Username-Password",value:"soap",description:"Authenticate with username and password (not recommended)",requiresInput:!0}],li=({onBack:t})=>{let[e,r]=yt("method"),[o,n]=yt("web"),[i,l]=yt(""),[u,s]=yt(""),[a,c]=yt(""),[m,d]=yt(""),[g,h]=yt(!1),[p,b]=yt(""),[C,P]=yt("");Qa((T,R)=>{R.escape&&(e==="method"?t():r("method"))});let k=async()=>{h(!0),c(""),d("");try{let T=["org","login"],R;switch(o){case"web":T.push("web","--browser","chrome"),i&&T.push("--alias",i),u&&T.push("--username",u);break;case"jwt":T.push("jwt","--username",u,"--jwt-key-file","path/to/server.key"),i&&T.push("--alias",i);break;case"device":T.push("device","--browser","chrome"),i&&T.push("--alias",i);break;case"token":T.push("access-token","--instance-url","https://login.salesforce.com","--access-token","YOUR_TOKEN"),i&&T.push("--alias",i);break;case"soap":T.push("soap","--username",u,"--password","YOUR_PASSWORD"),i&&T.push("--alias",i);break}R=Ja("sf",T),R.stdout?.on("data",K=>{let q=K.toString();if(c(G=>G+q),o==="web"&&q.includes("https://")){let G=q.match(/https?:\/\/[^\s]+/);G&&(b(G[0]),Za(G[0]))}if(o==="device"){if(q.includes("https://")){let G=q.match(/https?:\/\/[^\s]+/);G&&b(G[0])}if(q.includes("code:")){let G=q.match(/code:\s*([^\s]+)/);G&&P(G[1])}}}),R.stderr?.on("data",K=>{c(q=>q+K.toString())}),await R,r("success")}catch(T){d(T instanceof Error?T.message:"Unknown error occurred"),r("error")}finally{h(!1)}},v=()=>_e(Ee,{flexDirection:"column",children:[F(te,{bold:!0,children:"Authentication Method"}),F(te,{children:"Choose how you'd like to authenticate with Salesforce:"}),F(Ee,{marginTop:1,marginBottom:2,children:F(ai,{items:el.map(T=>({...T,key:T.value})),onSelect:T=>{n(T.value),T.requiresInput?r("input"):(r("authenticating"),k())},itemComponent:({isSelected:T,label:R,item:K})=>_e(Ee,{children:[F(te,{color:T?"cyan":"white",children:R}),F(te,{children:"  "}),F(te,{color:"gray",children:K.description})]})})}),F(te,{color:"gray",italic:!0,children:"Use arrow keys to navigate, Enter to select, ESC to go back"})]}),O=()=>_e(Ee,{flexDirection:"column",children:[F(te,{bold:!0,children:"Authentication Details"}),_e(te,{children:["Please provide the required information for ",o," authentication:"]}),_e(Ee,{marginTop:1,marginBottom:2,flexDirection:"column",children:[_e(Ee,{marginBottom:1,children:[F(te,{children:"Alias (optional): "}),F(ie,{value:i,onChange:l,placeholder:"my-org-alias"})]}),_e(Ee,{marginBottom:2,children:[F(te,{children:"Username: "}),F(ie,{value:u,onChange:s,placeholder:"user@example.com"})]}),F(Ee,{flexDirection:"column",marginTop:1,children:F(ai,{items:[{label:"Authenticate",value:"auth"},{label:"Back",value:"back"}],onSelect:T=>{T.value==="auth"?(r("authenticating"),k()):r("method")}})})]}),F(te,{color:"gray",italic:!0,children:"ESC to go back"})]}),L=()=>F(Ee,{flexDirection:"column",children:g?_e(tl,{children:[_e(te,{children:[F(Xa,{type:"dots"})," Authenticating..."]}),p&&_e(Ee,{marginTop:1,marginBottom:1,children:[F(te,{children:"Please complete authentication in your browser:"}),F(te,{color:"cyan",underline:!0,children:p})]}),C&&F(Ee,{marginTop:1,marginBottom:1,children:_e(te,{children:["Your device code: ",F(te,{bold:!0,children:C})]})}),F(Ee,{marginTop:1,borderStyle:"round",padding:1,height:10,overflow:"hidden",children:F(te,{children:a||"Starting authentication..."})})]}):F(te,{children:"Authentication complete!"})}),$=()=>_e(Ee,{flexDirection:"column",children:[F(te,{color:"green",children:"\u2713 Authentication successful!"}),F(Tr,{}),F(te,{children:"You are now authenticated with Salesforce."}),i&&_e(te,{children:["Alias: ",F(te,{bold:!0,children:i})]}),F(Tr,{}),F(te,{children:"Press any key to continue..."})]}),re=()=>_e(Ee,{flexDirection:"column",children:[F(te,{color:"red",children:"\u2717 Authentication failed"}),F(Tr,{}),_e(te,{children:["Error: ",m||"Unknown error occurred"]}),F(Tr,{}),F(Ee,{borderStyle:"round",padding:1,height:10,overflow:"hidden",children:F(te,{children:a||"No additional details available"})}),F(Tr,{}),F(te,{children:"Press any key to continue..."})]});return _e(Ee,{flexDirection:"column",padding:1,children:[F(Ee,{marginBottom:1,children:F(te,{bold:!0,children:"Salesforce Authentication"})}),e==="method"&&v(),e==="input"&&O(),e==="authenticating"&&L(),e==="success"&&$(),e==="error"&&re(),(e==="success"||e==="error")&&F(Ee,{marginTop:1,children:F(te,{children:"Press any key to continue..."})}),e!=="success"&&e!=="error"&&e!=="authenticating"&&F(te,{color:"gray",italic:!0,children:"ESC to go back"})]})};import{useState as tt,useEffect as rl}from"react";import{Box as ge,Text as Re,useInput as ol}from"ink";import zr from"ink-select-input";import{execa as ci}from"execa";import Io from"ink-spinner";import{Fragment as il,jsx as U,jsxs as je}from"react/jsx-runtime";var nl=[{id:"deploy",label:"Deploy Metadata",description:"Deploy metadata to an org",requiresTargetOrg:!0,requiresManifest:!0},{id:"retrieve",label:"Retrieve Metadata",description:"Retrieve metadata from an org",requiresSourceOrg:!0,requiresManifest:!0},{id:"deploy-dir",label:"Deploy Directory",description:"Deploy all metadata from a directory",requiresTargetOrg:!0},{id:"retrieve-dir",label:"Retrieve to Directory",description:"Retrieve metadata to a directory",requiresSourceOrg:!0},{id:"validate",label:"Validate Deployment",description:"Validate a deployment without making changes",requiresTargetOrg:!0,requiresManifest:!0},{id:"list",label:"List Metadata",description:"List metadata in an org",requiresSourceOrg:!0},{id:"describe",label:"Describe Metadata",description:"Describe metadata types in an org",requiresSourceOrg:!0}],ui=({onBack:t})=>{let{errors:e,dismissError:r}=fr(),[o,n]=tt(null),[i,l]=tt(!1),[u,s]=tt(""),[a,c]=tt(""),[m,d]=tt(""),[g,h]=tt(""),[p,b]=tt("manifest/package.xml"),[C,P]=tt(""),[k,v]=tt("force-app/main/default"),[O,L]=tt(!1),[$,re]=tt([]),T=async()=>{try{l(!0);let{stdout:f}=await ci("sf",["org","list","--json"]),x=JSON.parse(f);return x.status===0&&x.result&&Array.isArray(x.result.nonScratchOrgs)?[...(x.result.nonScratchOrgs||[]).map(B=>({username:B.username,isDefault:B.isDefaultUsername||!1,alias:B.alias||"",connectedStatus:B.connectedStatus||""})),...(x.result.scratchOrgs||[]).map(B=>({username:B.username,isDefault:B.isDefaultUsername||!1,alias:B.alias||"",connectedStatus:B.connectedStatus||"",isScratch:!0}))]:(se.reportError("Failed to load orgs",{severity:"MEDIUM",category:nr.SYSTEM,context:"MetadataTools.loadOrgs",details:{result:x}}),[])}catch(f){return se.reportCommandError("Failed to load orgs from Salesforce CLI",f instanceof Error?f:new Error(String(f)),{command:"sf org list --json"}),[]}finally{l(!1)}},R=async(f,x=[])=>{try{L(!0),s(""),c("");let S=ci("sf",[f,...x]);return S.stdout?.on("data",B=>{s(oe=>oe+B.toString())}),S.stderr?.on("data",B=>{s(oe=>oe+B.toString())}),await S,!0}catch(S){let B=`Error: ${S instanceof Error?S.message:String(S)}`;return c(B),se.reportCommandError(`Failed to execute Salesforce CLI command: sf ${f} ${x.join(" ")}`,S instanceof Error?S:new Error(String(S)),{command:f,args:x}),!1}finally{L(!1)}},K=f=>{n(f)},q=async()=>{if(o)try{L(!0),s(""),c("");let f="project",x=[];if(o.requiresTargetOrg&&!m){c("Target org is required for this operation"),se.reportValidationError(`Target org is required for the ${o.label} operation`,void 0,{tool:o.id}),L(!1);return}if(o.requiresSourceOrg&&!g){c("Source org is required for this operation"),se.reportValidationError(`Source org is required for the ${o.label} operation`,void 0,{tool:o.id}),L(!1);return}if(o.requiresManifest&&!p){c("Manifest file is required for this operation"),se.reportValidationError(`Manifest file is required for the ${o.label} operation`,void 0,{tool:o.id}),L(!1);return}switch(o.id){case"deploy":f="project",x.push("deploy","start","--manifest",p),m&&x.push("--target-org",m);break;case"retrieve":f="project",x.push("retrieve","start","--manifest",p),g&&x.push("--source-org",g);break;case"deploy-dir":f="project",x.push("deploy","start","--source-dir",k),m&&x.push("--target-org",m);break;case"retrieve-dir":f="project",x.push("retrieve","start","--output-dir",k),g&&x.push("--source-org",g);break;case"validate":f="project",x.push("deploy","validate","--manifest",p),m&&x.push("--target-org",m);break;case"list":f="org",x.push("list","metadata"),g&&x.push("--target-org",g),C&&x.push("--metadata",C);break;case"describe":f="org",x.push("describe","metadata"),g&&x.push("--target-org",g);break}await R(f,x)}catch(f){let x=`Failed to execute ${o.label}: ${f instanceof Error?f.message:String(f)}`;c(x),se.reportError(`Failed to execute ${o.label}`,{error:f instanceof Error?f:new Error(String(f)),severity:"MEDIUM",category:"COMMAND",context:"MetadataTools.executeTool",details:{tool:o},userAction:"Check the command parameters and try again."})}finally{L(!1)}};rl(()=>{(async()=>{let x=await T();re(x)})()},[]),ol((f,x)=>{x.escape&&(o?n(null):t())});let G=()=>je(ge,{flexDirection:"column",children:[U(ge,{marginBottom:1,children:U(Re,{bold:!0,children:"Metadata Tools"})}),U(ge,{marginBottom:2,children:U(zr,{items:nl.map(f=>({...f,label:`${f.label} - ${f.description}`,value:f.id})),onSelect:f=>K(f),itemComponent:({isSelected:f,label:x})=>U(Re,{color:f?"cyan":"white",children:x})})}),U(Re,{color:"gray",italic:!0,children:"Use arrow keys to navigate, Enter to select, ESC to go back"})]}),ce=()=>o?je(ge,{flexDirection:"column",children:[U(ge,{marginBottom:1,children:U(Re,{bold:!0,children:o.label})}),U(ge,{marginBottom:1,children:U(Re,{children:o.description})}),je(ge,{flexDirection:"column",marginTop:1,children:[o.requiresTargetOrg&&je(ge,{marginBottom:1,flexDirection:"column",children:[U(Re,{children:"Target Org:"}),$.length>0?U(ge,{marginTop:1,children:U(zr,{items:$.map(f=>({label:`${f.username}${f.alias?` (${f.alias})`:""}${f.isDefault?" [default]":""}`,value:f.username})),onSelect:f=>d(f.value)})}):i?U(ge,{marginTop:1,children:je(Re,{children:[U(Io,{type:"dots"})," Loading orgs..."]})}):je(ge,{marginTop:1,children:[U(ie,{value:m,onChange:d,placeholder:"username or alias"}),U(Re,{color:"gray",marginLeft:1,children:"(No orgs found. Manual entry required)"})]})]}),o.requiresSourceOrg&&je(ge,{marginBottom:1,flexDirection:"column",children:[U(Re,{children:"Source Org:"}),$.length>0?U(ge,{marginTop:1,children:U(zr,{items:$.map(f=>({label:`${f.username}${f.alias?` (${f.alias})`:""}${f.isDefault?" [default]":""}`,value:f.username})),onSelect:f=>h(f.value)})}):i?U(ge,{marginTop:1,children:je(Re,{children:[U(Io,{type:"dots"})," Loading orgs..."]})}):je(ge,{marginTop:1,children:[U(ie,{value:g,onChange:h,placeholder:"username or alias"}),U(Re,{color:"gray",marginLeft:1,children:"(No orgs found. Manual entry required)"})]})]}),o.requiresManifest&&je(ge,{marginBottom:1,children:[U(Re,{children:"Manifest File: "}),U(ie,{value:p,onChange:b,placeholder:"path/to/package.xml"})]}),(o.id==="deploy-dir"||o.id==="retrieve-dir")&&je(ge,{marginBottom:1,children:[U(Re,{children:"Directory: "}),U(ie,{value:k,onChange:v,placeholder:"path/to/directory"})]}),o.id==="list"&&je(ge,{marginBottom:1,children:[U(Re,{children:"Metadata Type (optional): "}),U(ie,{value:C,onChange:P,placeholder:"ApexClass,CustomObject,..."})]}),U(ge,{marginTop:2,marginBottom:2,children:U(zr,{items:[{label:"Run Command",value:"run"},{label:"Back to Tools",value:"back"}],onSelect:f=>{f.value==="run"?q():n(null)}})})]}),U(Re,{color:"gray",italic:!0,children:"ESC to go back"})]}):null,y=()=>!u&&!a?null:je(ge,{marginTop:2,flexDirection:"column",children:[U(ge,{marginBottom:1,children:U(Re,{bold:!0,children:"Output:"})}),U(ge,{borderStyle:"round",padding:1,height:10,overflow:"hidden",children:U(Re,{children:a||u})})]});return U(ge,{flexDirection:"column",padding:1,children:O?U(ge,{children:je(Re,{children:[U(Io,{type:"dots"})," Processing..."]})}):o?je(il,{children:[ce(),y()]}):G()})};import{useState as ut}from"react";import{Box as W,Text as ae,useInput as sl}from"ink";import Yt from"ink-select-input";import{execa as al}from"execa";import ll from"ink-spinner";import{Fragment as ul,jsx as E,jsxs as Fe}from"react/jsx-runtime";var cl=[{id:"apex",label:"Execute Anonymous Apex",description:"Execute anonymous Apex code",requiresTargetOrg:!0},{id:"flow",label:"Run Flow",description:"Run a Flow or Process Builder flow",requiresTargetOrg:!0},{id:"test",label:"Run Tests",description:"Run Apex tests",requiresTargetOrg:!0},{id:"soql",label:"Execute SOQL Query",description:"Run a SOQL query",requiresTargetOrg:!0},{id:"data-tree",label:"View Data Tree",description:"Explore sObject data relationships",requiresTargetOrg:!0}],di=({onBack:t})=>{let[e,r]=ut(null),[o,n]=ut(!1),[i,l]=ut(""),[u,s]=ut(""),[a,c]=ut(""),[m,d]=ut("System.debug('Hello from SF TUI!');"),[g,h]=ut(""),[p,b]=ut("SELECT Id, Name FROM Account LIMIT 10"),[C,P]=ut(""),[k,v]=ut(!1),O=async(f,x=[])=>{try{v(!0),l(""),s("");let S=al("sf",[f,...x]);return S.stdout?.on("data",B=>{l(oe=>oe+B.toString())}),S.stderr?.on("data",B=>{l(oe=>oe+B.toString())}),await S,!0}catch(S){return s(`Error: ${S instanceof Error?S.message:String(S)}`),!1}finally{v(!1)}},L=f=>{r(f)},$=async()=>{if(e)try{v(!0),l(""),s("");let f="data",x=[];switch(e.id){case"apex":f="apex",x.push("run","--code",`"${m}"`),a&&x.push("--target-org",a);break;case"flow":f="flow",x.push("run","--flow",g),a&&x.push("--target-org",a);break;case"test":f="apex",x.push("run","test"),C&&x.push("--class-names",C),a&&x.push("--target-org",a);break;case"soql":f="data",x.push("query","--query",`"${p}"`),a&&x.push("--target-org",a);break;case"data-tree":f="data",x.push("tree","view"),a&&x.push("--target-org",a);break}await O(f,x)}catch(f){s(`Failed to execute ${e.label}: ${f instanceof Error?f.message:String(f)}`)}finally{v(!1)}};sl((f,x)=>{x.escape&&(e?r(null):t())});let re=()=>Fe(W,{flexDirection:"column",children:[E(W,{marginBottom:1,children:E(ae,{bold:!0,children:"Run Tools"})}),E(W,{marginBottom:2,children:E(Yt,{items:cl.map(f=>({...f,label:`${f.label} - ${f.description}`,value:f.id})),onSelect:f=>L(f),itemComponent:({isSelected:f,label:x})=>E(ae,{color:f?"cyan":"white",children:x})})}),E(ae,{color:"gray",italic:!0,children:"Use arrow keys to navigate, Enter to select, ESC to go back"})]}),T=()=>Fe(W,{flexDirection:"column",children:[E(W,{marginBottom:1,children:E(ae,{bold:!0,children:"Execute Anonymous Apex"})}),E(W,{marginBottom:1,children:E(ae,{children:"Enter your Apex code:"})}),E(W,{marginBottom:2,borderStyle:"round",padding:1,height:10,overflow:"hidden",children:E(ie,{value:m,onChange:d,multiline:!0,onSubmit:$})}),Fe(W,{marginBottom:2,children:[E(ae,{children:"Target Org: "}),E(ie,{value:a,onChange:c,placeholder:"username or alias"})]}),E(W,{marginTop:1,marginBottom:2,children:E(Yt,{items:[{label:"Execute",value:"run"},{label:"Back to Tools",value:"back"}],onSelect:f=>{f.value==="run"?$():r(null)}})}),E(ae,{color:"gray",italic:!0,children:"ESC to go back"})]}),R=()=>Fe(W,{flexDirection:"column",children:[E(W,{marginBottom:1,children:E(ae,{bold:!0,children:"Run Flow"})}),Fe(W,{marginBottom:2,children:[E(ae,{children:"Flow API Name: "}),E(ie,{value:g,onChange:h,placeholder:"My_Flow_API_Name"})]}),Fe(W,{marginBottom:2,children:[E(ae,{children:"Target Org: "}),E(ie,{value:a,onChange:c,placeholder:"username or alias"})]}),E(W,{marginTop:1,marginBottom:2,children:E(Yt,{items:[{label:"Run Flow",value:"run"},{label:"Back to Tools",value:"back"}],onSelect:f=>{f.value==="run"?$():r(null)}})}),E(ae,{color:"gray",italic:!0,children:"ESC to go back"})]}),K=()=>Fe(W,{flexDirection:"column",children:[E(W,{marginBottom:1,children:E(ae,{bold:!0,children:"Run Apex Tests"})}),Fe(W,{marginBottom:2,children:[E(ae,{children:"Test Classes (comma-separated, leave empty for all tests):"}),E(ie,{value:C,onChange:P,placeholder:"MyTestClass,AnotherTestClass"})]}),Fe(W,{marginBottom:2,children:[E(ae,{children:"Target Org: "}),E(ie,{value:a,onChange:c,placeholder:"username or alias"})]}),E(W,{marginTop:1,marginBottom:2,children:E(Yt,{items:[{label:"Run Tests",value:"run"},{label:"Back to Tools",value:"back"}],onSelect:f=>{f.value==="run"?$():r(null)}})}),E(ae,{color:"gray",italic:!0,children:"ESC to go back"})]}),q=()=>Fe(W,{flexDirection:"column",children:[E(W,{marginBottom:1,children:E(ae,{bold:!0,children:"Execute SOQL Query"})}),E(W,{marginBottom:1,children:E(ae,{children:"Enter your SOQL query:"})}),E(W,{marginBottom:2,borderStyle:"round",padding:1,height:5,overflow:"hidden",children:E(ie,{value:p,onChange:b,onSubmit:$})}),Fe(W,{marginBottom:2,children:[E(ae,{children:"Target Org: "}),E(ie,{value:a,onChange:c,placeholder:"username or alias"})]}),E(W,{marginTop:1,marginBottom:2,children:E(Yt,{items:[{label:"Run Query",value:"run"},{label:"Back to Tools",value:"back"}],onSelect:f=>{f.value==="run"?$():r(null)}})}),E(ae,{color:"gray",italic:!0,children:"ESC to go back"})]}),G=()=>Fe(W,{flexDirection:"column",children:[E(W,{marginBottom:1,children:E(ae,{bold:!0,children:"View Data Tree"})}),E(W,{marginBottom:2,children:E(ae,{children:"Explore sObject data relationships in your org."})}),Fe(W,{marginBottom:2,children:[E(ae,{children:"Target Org: "}),E(ie,{value:a,onChange:c,placeholder:"username or alias"})]}),E(W,{marginTop:1,marginBottom:2,children:E(Yt,{items:[{label:"View Data Tree",value:"run"},{label:"Back to Tools",value:"back"}],onSelect:f=>{f.value==="run"?$():r(null)}})}),E(ae,{color:"gray",italic:!0,children:"ESC to go back"})]}),ce=()=>{if(!e)return null;switch(e.id){case"apex":return T();case"flow":return R();case"test":return K();case"soql":return q();case"data-tree":return G();default:return null}},y=()=>!i&&!u?null:Fe(W,{marginTop:2,flexDirection:"column",children:[E(W,{marginBottom:1,children:E(ae,{bold:!0,children:"Output:"})}),E(W,{borderStyle:"round",padding:1,height:10,overflow:"hidden",children:E(ae,{children:u||i})})]});return E(W,{flexDirection:"column",padding:1,children:k?E(W,{children:Fe(ae,{children:[E(ll,{type:"dots"})," Processing..."]})}):e?Fe(ul,{children:[ce(),y()]}):re()})};import{useState as dt,useEffect as dl}from"react";import{Box as ne,Text as le,useInput as fl}from"ink";import Wr from"ink-select-input";import{execa as Do}from"execa";import fi from"ink-spinner";import{Fragment as gl,jsx as N,jsxs as he}from"react/jsx-runtime";var gi=({onBack:t})=>{let[e,r]=dt([]),[o,n]=dt(!0),[i,l]=dt(""),[u,s]=dt(""),[a,c]=dt(null),[m,d]=dt(!1),[g,h]=dt("list"),[p,b]=dt(""),[C,P]=dt(""),[k,v]=dt(!1);dl(()=>{O()},[]);let O=async()=>{try{n(!0),l("");let{stdout:S}=await Do("sf",["plugins","--json"]),B=JSON.parse(S);Array.isArray(B)?r(B):r([])}catch(S){l(`Failed to load plugins: ${S instanceof Error?S.message:String(S)}`),r([])}finally{n(!1)}},L=async()=>{try{v(!0),s("");let S=Do("sf",["plugins","update","--json"]);S.stdout?.on("data",B=>{s(oe=>oe+B.toString())}),S.stderr?.on("data",B=>{s(oe=>oe+B.toString())}),await S,await O()}catch(S){l(`Error checking for updates: ${S instanceof Error?S.message:String(S)}`)}finally{v(!1)}},$=async(S,B=[])=>{try{d(!0),s("");let oe=Do("sf",[S,...B]);return oe.stdout?.on("data",me=>{s(ye=>ye+me.toString())}),oe.stderr?.on("data",me=>{s(ye=>ye+me.toString())}),await oe,await O(),!0}catch(oe){return s(`Error: ${oe instanceof Error?oe.message:String(oe)}`),!1}finally{d(!1)}},re=async S=>{await $("plugins",["install",S])&&(P(""),h("list"))},T=async S=>{await $("plugins",["update",S])},R=async S=>{await $("plugins",["uninstall",S]),c(null),h("list")},K=async()=>{await $("plugins",["update"])},q=S=>{c(S),h("details")};fl((S,B)=>{B.escape&&(g!=="list"?(h("list"),c(null)):t())});let G=()=>{let S=e.filter(B=>B.name.toLowerCase().includes(p.toLowerCase()));return he(ne,{flexDirection:"column",children:[N(ne,{marginBottom:1,children:N(le,{bold:!0,children:"Installed Plugins"})}),he(ne,{marginBottom:1,children:[N(le,{children:"Search: "}),N(ie,{value:p,onChange:b,placeholder:"Filter plugins..."})]}),o?N(ne,{children:he(le,{children:[N(fi,{type:"dots"})," Loading plugins..."]})}):i?he(le,{color:"red",children:["Error: ",i]}):S.length===0?N(le,{children:"No plugins found. Install some plugins to get started."}):N(ne,{flexDirection:"column",children:N(ne,{marginBottom:1,children:N(Wr,{items:[...S.map(B=>({label:`${B.name}@${B.version} ${B.updateAvailable?"\u{1F504}":""}`,value:B.name,plugin:B})),{label:"\u2795 Install New Plugin",value:"install"},{label:"\u{1F504} Update All Plugins",value:"update-all"},{label:"\u{1F50D} Check for Updates",value:"check-updates"}],onSelect:B=>{B.value==="install"?h("install"):B.value==="update-all"?K():B.value==="check-updates"?L():q(B.plugin)},itemComponent:({isSelected:B,label:oe,plugin:me})=>he(ne,{children:[N(le,{color:B?"cyan":"white",children:oe}),me?.updateAvailable&&he(le,{color:"yellow",children:[" (update to ",me.latestVersion," available)"]})]})})})}),N(ne,{marginTop:1,children:N(le,{children:"Press ESC to go back"})})]})},ce=()=>a?he(ne,{flexDirection:"column",children:[N(ne,{marginBottom:1,children:he(le,{bold:!0,children:["Plugin: ",a.name]})}),he(ne,{marginBottom:1,children:[he(le,{children:["Version: ",a.version]}),a.updateAvailable&&he(le,{color:"yellow",children:["Update available: ",a.latestVersion]})]}),N(ne,{marginBottom:1,children:he(le,{children:["Type: ",a.type]})}),a.location&&N(ne,{marginBottom:1,children:he(le,{children:["Location: ",a.location]})}),a.homepage&&N(ne,{marginBottom:2,children:he(le,{children:["Homepage: ",a.homepage]})}),N(ne,{flexDirection:"column",marginBottom:2,children:N(Wr,{items:[...a.updateAvailable?[{label:`\u{1F504} Update to v${a.latestVersion}`,value:"update"}]:[],{label:"Uninstall Plugin",value:"uninstall"},{label:"Back to List",value:"back"}],onSelect:S=>{switch(S.value){case"update":h("update"),T(a.name);break;case"uninstall":h("uninstall");break;case"back":h("list"),c(null);break}}})}),N(le,{color:"gray",italic:!0,children:"ESC to go back"})]}):null,y=()=>he(ne,{flexDirection:"column",children:[N(ne,{marginBottom:1,children:N(le,{bold:!0,children:"Install New Plugin"})}),he(ne,{marginBottom:2,children:[N(le,{children:"Plugin name or npm package:"}),N(ie,{value:C,onChange:P,placeholder:"@salesforce/plugin-name or plugin-name"})]}),N(ne,{marginBottom:2,children:N(le,{children:"Example: @salesforce/plugin-org, @salesforce/plugin-apex, etc."})}),N(ne,{flexDirection:"column",marginBottom:2,children:N(Wr,{items:[{label:"Install",value:"install"},{label:"Cancel",value:"cancel"}],onSelect:S=>{S.value==="install"&&C?re(C):h("list")}})}),N(le,{color:"gray",italic:!0,children:"ESC to go back"})]}),f=()=>a?he(ne,{flexDirection:"column",children:[N(ne,{marginBottom:1,children:N(le,{bold:!0,children:"Uninstall Plugin"})}),he(ne,{marginBottom:2,children:[he(le,{children:["Are you sure you want to uninstall ",a.name,"?"]}),he(le,{children:["Version: ",a.version]})]}),N(ne,{flexDirection:"column",marginBottom:2,children:N(Wr,{items:[{label:"\u2705 Yes, uninstall it",value:"confirm"},{label:"\u274C No, keep it",value:"cancel"}],onSelect:S=>{S.value==="confirm"?R(a.name):h("details")}})}),N(le,{color:"gray",italic:!0,children:"ESC to go back"})]}):null,x=()=>!u&&!i?null:he(ne,{marginTop:2,flexDirection:"column",children:[N(ne,{marginBottom:1,children:N(le,{bold:!0,children:"Output:"})}),N(ne,{borderStyle:"round",padding:1,height:10,overflow:"hidden",children:N(le,{children:i||u})})]});return N(ne,{flexDirection:"column",padding:1,children:m||k?N(ne,{children:he(le,{children:[N(fi,{type:"dots"})," ",k?"Checking for updates...":"Processing..."]})}):he(gl,{children:[g==="list"&&G(),g==="details"&&ce(),g==="install"&&y(),g==="uninstall"&&f(),x()]})})};import{useState as bi}from"react";import{Box as vr,Text as Qt,useInput as Bl}from"ink";import wl from"ink-select-input";J();import{useState as pi,useEffect as pl}from"react";import{Box as Tt,Text as pe,useInput as ml}from"ink";import hl from"ink-select-input";import{jsx as xe,jsxs as He}from"react/jsx-runtime";var xl=[{label:"\u{1F31E} Base Theme",value:"base",description:"Default light theme with Salesforce colors"},{label:"\u{1F319} Dark Theme",value:"dark",description:"Dark theme for low-light environments"},{label:"\u{1F50D} High Contrast",value:"highContrast",description:"Enhanced contrast for better accessibility"},{label:"\u26A1 Salesforce Lightning",value:"salesforce",description:"Official Salesforce Lightning color scheme"}],bl=({onBack:t,onThemeChange:e})=>{let{state:r,setTheme:o}=Mr(),[n,i]=pi(r.themeName),[l,u]=pi(r.themeName),s=D();return ml((d,g)=>{g.escape&&t()}),pl(()=>{e&&e(n),o(n)},[n,e,o]),He(Tt,{flexDirection:"column",children:[xe(Tt,{marginBottom:1,children:xe(pe,{bold:!0,children:"Theme Settings"})}),He(Tt,{flexDirection:"row",gap:2,children:[He(Tt,{flexDirection:"column",width:"50%",children:[xe(pe,{bold:!0,children:"Select a Theme"}),xe(hl,{items:xl,onSelect:d=>{i(d.value)},onHighlight:d=>{u(d.value)},itemComponent:({isSelected:d,label:g,item:h})=>He(Tt,{children:[xe(pe,{color:d?s.colors.primary:s.colors.text,children:g}),xe(pe,{children:" "}),xe(pe,{color:"gray",children:h.description})]})})]}),xe(Tt,{width:"50%",children:xe(({themeName:d})=>{let g=St(d);return xe(Lt,{theme:g,children:xe(at,{title:"Theme Preview",borderStyle:"round",padding:1,width:40,children:He(Tt,{flexDirection:"column",children:[He(pe,{children:["Primary: ",xe(pe,{color:g.colors.primary,children:"\u25A0\u25A0\u25A0"})]}),He(pe,{children:["Secondary: ",xe(pe,{color:g.colors.secondary,children:"\u25A0\u25A0\u25A0"})]}),He(pe,{children:["Success: ",xe(pe,{color:g.colors.success,children:"\u25A0\u25A0\u25A0"})]}),He(pe,{children:["Warning: ",xe(pe,{color:g.colors.warning,children:"\u25A0\u25A0\u25A0"})]}),He(pe,{children:["Error: ",xe(pe,{color:g.colors.error,children:"\u25A0\u25A0\u25A0"})]}),He(pe,{children:["Info: ",xe(pe,{color:g.colors.info,children:"\u25A0\u25A0\u25A0"})]}),He(pe,{children:["Text: ",xe(pe,{color:g.colors.text,children:"\u25A0\u25A0\u25A0"})]}),He(pe,{children:["Border: ",xe(pe,{color:g.colors.border,children:"\u25A0\u25A0\u25A0"})]})]})})})},{themeName:l})})]}),xe(Tt,{marginTop:1,children:He(pe,{children:["Current theme: ",xe(pe,{bold:!0,children:n})]})}),xe(Tt,{marginTop:1,children:xe(pe,{color:"gray",italic:!0,children:"Press Esc to go back"})})]})},mi=bl;J();import{useState as ft,useEffect as yl}from"react";import{Box as Ce,Text as H,useInput as Tl}from"ink";import vl from"ink-select-input";import{Fragment as Cl,jsx as _,jsxs as Pe}from"react/jsx-runtime";var hi=t=>{let e=[];t.ctrl&&e.push("Ctrl"),t.alt&&e.push("Alt"),t.shift&&e.push("Shift");let r=t.key;return r==="escape"?r="Esc":r==="return"?r="Enter":r==="space"&&(r="Space"),e.push(r.length===1?r.toUpperCase():r),e.join("+")},Mo={help:"Show help screen",back:"Go back/cancel",quit:"Quit the application",toggleStatusBar:"Show/hide status bar",toggleTheme:"Switch between themes",refresh:"Refresh current view",save:"Save changes",create:"Create new item",delete:"Delete selected item",search:"Search",navigate:"Navigate"},Sl=({onBack:t})=>{let{shortcuts:e}=_r(),r=D(),[o,n]=ft([]),[i,l]=ft(null),[u,s]=ft(!1),[a,c]=ft(""),[m,d]=ft(!1),[g,h]=ft(!1),[p,b]=ft(!1),[C,P]=ft(!1),[k,v]=ft(""),[O,L]=ft(!1);yl(()=>{$()},[e]);let $=()=>{let y=it.get("keyboardShortcuts")||{},f={...e,...y},x=Object.entries(f).map(([S,B])=>({label:`${Mo[B.action]||B.action}`,value:S,shortcut:B}));n(x)};Tl((y,f)=>{if(O){if(f.escape){L(!1);return}let x="";f.return?x="return":f.escape?x="escape":f.tab?x="tab":f.backspace?x="backspace":f.delete?x="delete":f.upArrow?x="up":f.downArrow?x="down":f.leftArrow?x="left":f.rightArrow?x="right":f.meta?x="meta":f.space?x="space":y&&(x=y),x&&(c(x),d(f.ctrl),h(f.alt),b(f.shift),L(!1),s(!0));return}if(u){if(f.escape){s(!1);return}if(f.return){re();return}if(y==="c"){d(!m);return}if(y==="a"){h(!g);return}if(y==="s"){b(!p);return}return}if(!C){if(i&&!u&&y==="k"){K();return}if(y==="r"&&!i){q();return}f.escape&&(i?l(null):t())}});let re=()=>{if(!i)return;let y=o.find(f=>f.shortcut.key===a&&f.shortcut.ctrl===m&&f.shortcut.alt===g&&f.shortcut.shift===p&&f.shortcut.action!==i.action);if(y){v(`This key combination is already used for "${Mo[y.shortcut.action]}". Override?`),P(!0);return}T()},T=()=>{if(!i)return;let y={...i,key:a,ctrl:m,alt:g,shift:p},x={...it.get("keyboardShortcuts")||{},[i.action]:y};it.set("keyboardShortcuts",x);let S=o.map(B=>B.shortcut.action===i.action?{...B,shortcut:y}:B);n(S),s(!1),P(!1)},R=y=>{l(y.shortcut),c(y.shortcut.key),d(!!y.shortcut.ctrl),h(!!y.shortcut.alt),b(!!y.shortcut.shift)},K=()=>{L(!0)},q=()=>{it.set("keyboardShortcuts",{}),$(),v("All keyboard shortcuts have been reset to default values."),P(!0)},G=()=>Pe(Ce,{flexDirection:"column",children:[_(H,{bold:!0,children:"Keyboard Shortcuts"}),_(Ce,{marginY:1,children:_(H,{children:"Select a shortcut to customize"})}),_(vl,{items:o,onSelect:R,itemComponent:({isSelected:y,label:f,item:x})=>Pe(Ce,{children:[_(H,{color:y?r.colors.primary:r.colors.text,children:f}),_(H,{children:" "}),_(H,{color:r.colors.secondary,children:hi(x.shortcut)})]})}),Pe(Ce,{marginY:1,flexDirection:"column",children:[_(H,{children:"Press "}),_(H,{color:r.colors.secondary,children:"r"}),_(H,{children:" to reset all shortcuts to defaults"})]}),_(Ce,{marginTop:1,children:_(H,{color:"gray",italic:!0,children:"Press Esc to go back"})})]}),ce=()=>i?Pe(Ce,{flexDirection:"column",children:[Pe(H,{bold:!0,children:["Edit Shortcut: ",Mo[i.action]]}),Pe(Ce,{marginY:1,flexDirection:"column",children:[Pe(Ce,{marginBottom:1,children:[_(H,{children:"Current: "}),_(H,{color:r.colors.secondary,children:hi(i)})]}),u?Pe(Cl,{children:[Pe(Ce,{marginBottom:1,children:[_(H,{children:"New: "}),Pe(H,{color:r.colors.primary,children:[m?"Ctrl+":"",g?"Alt+":"",p?"Shift+":"",a.length===1?a.toUpperCase():a]})]}),Pe(Ce,{marginY:1,flexDirection:"column",children:[_(Ce,{marginBottom:1,children:_(H,{bold:!0,children:"Modifier keys:"})}),Pe(Ce,{marginLeft:2,flexDirection:"column",children:[Pe(Ce,{children:[_(H,{color:m?r.colors.primary:r.colors.text,children:"[x] Ctrl"}),_(H,{children:" - Press "}),_(H,{color:r.colors.secondary,children:"c"}),_(H,{children:" to toggle"})]}),Pe(Ce,{children:[_(H,{color:g?r.colors.primary:r.colors.text,children:"[x] Alt"}),_(H,{children:" - Press "}),_(H,{color:r.colors.secondary,children:"a"}),_(H,{children:" to toggle"})]}),Pe(Ce,{children:[_(H,{color:p?r.colors.primary:r.colors.text,children:"[x] Shift"}),_(H,{children:" - Press "}),_(H,{color:r.colors.secondary,children:"s"}),_(H,{children:" to toggle"})]})]})]}),Pe(Ce,{marginTop:2,flexDirection:"column",children:[_(H,{children:"Press "}),_(H,{color:r.colors.secondary,children:"Enter"}),_(H,{children:" to save or "}),_(H,{color:r.colors.secondary,children:"Esc"}),_(H,{children:" to cancel"})]})]}):Pe(Ce,{marginTop:1,flexDirection:"column",children:[_(H,{children:"Press "}),_(H,{color:r.colors.secondary,children:"k"}),_(H,{children:" to assign a new key, or "}),_(H,{color:r.colors.secondary,children:"Esc"}),_(H,{children:" to go back"})]})]})]}):null;return C?_(Ro,{message:k,onConfirm:()=>{T()},onCancel:()=>{P(!1)}}):O?_(br,{title:"Capturing Keyboard Input",children:Pe(Ce,{flexDirection:"column",alignItems:"center",padding:1,children:[_(H,{children:"Press any key or key combination"}),_(H,{color:"gray",children:"(Esc to cancel)"})]})}):_(Ce,{flexDirection:"column",padding:1,children:i?ce():G()})},xi=Sl;J();import{jsx as qe,jsxs as yi}from"react/jsx-runtime";var El=[{label:"\u{1F3A8} Theme Settings",value:"theme",description:"Customize the application theme"},{label:"\u2328\uFE0F  Keyboard Shortcuts",value:"shortcuts",description:"View and customize keyboard shortcuts"},{label:"\u{1F504} Back to Main Menu",value:"back",description:"Return to the main menu"}],Ti=({onBack:t})=>{let[e,r]=bi(null),[o,n]=bi("base"),i=D();Bl((s,a)=>{a.escape&&(e?r(null):t())});let l=s=>{n(s)};return qe(It,{componentName:"SettingsMenu",children:qe(vr,{flexDirection:"column",padding:1,children:e?e==="theme"?qe(Lt,{theme:St(o),children:qe(mi,{onBack:()=>r(null),onThemeChange:l})}):e==="shortcuts"?qe(xi,{onBack:()=>r(null)}):null:yi(vr,{flexDirection:"column",children:[qe(Qt,{bold:!0,children:"Settings"}),qe(vr,{marginY:1,children:qe(Qt,{children:"Configure application preferences and appearance"})}),qe(wl,{items:El,onSelect:s=>{s.value==="back"?t():r(s.value)},itemComponent:({isSelected:s,label:a,item:c})=>yi(vr,{children:[qe(Qt,{color:s?i.colors.primary:i.colors.text,children:a}),qe(Qt,{children:" "}),qe(Qt,{color:"gray",children:c.description})]})}),qe(vr,{marginTop:1,children:qe(Qt,{color:"gray",italic:!0,children:"Press Esc to go back"})})]})})})};import Rl from"react";import{Box as Pl,Text as vi}from"ink";import{jsx as _o,jsxs as Ol}from"react/jsx-runtime";var Si=({items:t})=>_o(Pl,{flexDirection:"row",marginBottom:1,children:t.map((e,r)=>Ol(Rl.Fragment,{children:[_o(vi,{color:e.active?"cyan":"gray",bold:e.active,children:e.label}),r<t.length-1&&_o(vi,{color:"gray",children:" \u203A "})]},r))});import{Box as Kr,Text as Yr,useInput as Al}from"ink";import{jsx as Sr,jsxs as Fo}from"react/jsx-runtime";var Ci=({shortcuts:t,visible:e=!1,onClose:r})=>(Al((o,n)=>{e&&(o==="?"||n.escape)&&r&&r()}),e?Sr(Kr,{flexDirection:"column",marginTop:1,children:Fo(Kr,{flexDirection:"column",borderStyle:"round",borderColor:"cyan",padding:1,children:[Sr(Yr,{bold:!0,children:"Keyboard Shortcuts"}),Sr(Kr,{flexDirection:"column",marginTop:1,children:t.map((o,n)=>Fo(Kr,{children:[Sr(Yr,{color:"cyan",bold:!0,children:o.key.padEnd(10)}),Fo(Yr,{children:[" ",o.description]})]},n))}),Sr(Yr,{color:"gray",italic:!0,children:"Press ESC or ? to close"})]})}):null);import{Fragment as Fl,jsx as I,jsxs as gt}from"react/jsx-runtime";var Bi=[{label:"\u{1F504}  Org Manager",value:"org",description:"Manage your Salesforce orgs (scratch, sandbox, production)"},{label:"\u{1F680}  Project Generator",value:"project",description:"Create new Salesforce projects and packages"},{label:"\u{1F511}  Auth Manager",value:"auth",description:"Authenticate with Salesforce orgs"},{label:"\u{1F3F7}\uFE0F  Alias Manager",value:"alias",description:"Manage your Salesforce CLI aliases"},{label:"\u{1F4E6}  Metadata Tools",value:"metadata",description:"Deploy, retrieve, and manage metadata"},{label:"\u26A1  Run Tools",value:"run",description:"Run Apex, Flows, and more"},{label:"\u{1F9E9}  Plugins",value:"plugins",description:"Manage CLI plugins"},{label:"\u2699\uFE0F  Settings",value:"settings",description:"Configure application preferences and appearance"},{label:"\u274C  Exit",value:"exit",description:"Exit SF TUI"}],Ml={org:"Org Manager",project:"Project Generator",auth:"Auth Manager",alias:"Alias Manager",metadata:"Metadata Tools",run:"Run Tools",plugins:"Plugins",settings:"Settings"},_l=()=>{let[t,e]=Jt(null),[r,o]=Jt(!0),[n,i]=Jt(0),[l,u]=Jt(!1),[s,a]=Jt(!1),[c,m]=Jt(!1),{exit:d}=Il(),{setContextualHelp:g}=go();No(()=>{if(!t)g(["navigation","shortcuts","themes"]);else switch(t){case"org":g(["orgs","navigation"]);break;case"metadata":g(["metadata","orgs"]);break;case"settings":g(["themes","shortcuts"]);break;default:g(["navigation","shortcuts"])}},[t,g]),No(()=>{if(r){let v=setTimeout(()=>{o(!1)},2e3),O=setInterval(()=>{i(L=>(L+1)%10)},100);return()=>{clearTimeout(v),clearInterval(O)}}},[r]),No(()=>{if(!r&&!l){let v=setTimeout(()=>{u(!0)},100);return()=>clearTimeout(v)}},[r,l]);let h=()=>{let O=["\u280B","\u2819","\u2839","\u2838","\u283C","\u2834","\u2826","\u2827","\u2807","\u280F"][n];return gt(Nt,{flexDirection:"column",alignItems:"center",justifyContent:"center",marginY:2,children:[I(Q,{color:"blue",children:Oe.bold.blue("   \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2557   \u2588\u2588\u2588\u2557")}),I(Q,{color:"blue",children:Oe.bold.blue("   \u255A\u2550\u2550\u2588\u2588\u2554\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2551")}),I(Q,{color:"cyan",children:Oe.bold.cyan("      \u2588\u2588\u2551   \u2588\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2554\u2588\u2588\u2588\u2588\u2554\u2588\u2588\u2551")}),I(Q,{color:"cyan",children:Oe.bold.cyan("      \u2588\u2588\u2551   \u2588\u2588\u2554\u2550\u2550\u255D  \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2551\u255A\u2588\u2588\u2554\u255D\u2588\u2588\u2551")}),I(Q,{color:"cyanBright",children:Oe.bold.cyanBright("      \u2588\u2588\u2551   \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2551 \u255A\u2550\u255D \u2588\u2588\u2551")}),I(Q,{color:"cyanBright",children:Oe.bold.cyanBright("      \u255A\u2550\u255D   \u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u255D  \u255A\u2550\u255D\u255A\u2550\u255D     \u255A\u2550\u255D")}),I(Q,{children:" "}),I(Q,{bold:!0,color:"blue",children:Oe.bold.blue("\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2557     \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557")}),I(Q,{bold:!0,color:"cyan",children:Oe.bold.cyan("\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2551     \u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D")}),I(Q,{bold:!0,color:"cyanBright",children:Oe.bold.cyanBright("\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2551     \u2588\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2551   \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u2588\u2588\u2551     \u2588\u2588\u2588\u2588\u2588\u2557  ")}),I(Q,{bold:!0,color:"cyanBright",children:Oe.bold.cyanBright("\u255A\u2550\u2550\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2551     \u2588\u2588\u2554\u2550\u2550\u255D  \u255A\u2550\u2550\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2551   \u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2551     \u2588\u2588\u2554\u2550\u2550\u255D  ")}),I(Q,{bold:!0,color:"blueBright",children:Oe.bold.blueBright("\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u255A\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u2588\u2588\u2551  \u2588\u2588\u2551\u255A\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557")}),I(Q,{bold:!0,color:"blueBright",children:Oe.bold.blueBright("\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u255D  \u255A\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D \u255A\u2550\u2550\u2550\u2550\u2550\u255D \u255A\u2550\u255D  \u255A\u2550\u255D \u255A\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D")}),I(Q,{children:" "}),I(Q,{color:"cyanBright",children:`${O} Loading Terminal User Interface...`})]})},p=()=>gt(Nt,{flexDirection:"column",marginBottom:1,borderStyle:"round",borderColor:"cyanBright",padding:1,children:[I(Q,{bold:!0,color:"cyan",children:Oe.bold.cyanBright("\u2554\u2550\u2550\u2550\u2557\u2554\u2550\u2550\u2550\u2557     \u2554\u2550\u2550\u2550\u2550\u2557\u2554\u2557 \u2554\u2557\u2554\u2550\u2550\u2550\u2557")}),I(Q,{bold:!0,color:"cyan",children:Oe.bold.cyanBright("\u2551\u2554\u2550\u2557\u2551\u2551\u2554\u2550\u2550\u255D     \u2551\u2554\u2557\u2554\u2557\u2551\u2551\u2551 \u2551\u2551\u2551\u2554\u2550\u2557\u2551")}),I(Q,{bold:!0,color:"cyan",children:Oe.bold.cyanBright("\u2551\u255A\u2550\u2550\u2557\u2551\u255A\u2550\u2550\u2557     \u255A\u255D\u2551\u2551\u255A\u255D\u2551\u2551 \u2551\u2551\u2551\u2551 \u2551\u2551")}),I(Q,{bold:!0,color:"cyan",children:Oe.bold.cyanBright("\u255A\u2550\u2550\u2557\u2551\u2551\u2554\u2550\u2550\u255D       \u2551\u2551  \u2551\u2551 \u2551\u2551\u2551\u2551 \u2551\u2551")}),I(Q,{bold:!0,color:"cyan",children:Oe.bold.cyanBright("\u2551\u255A\u2550\u255D\u2551\u2551\u2551          \u2551\u2551  \u2551\u255A\u2550\u255D\u2551\u2551\u255A\u2550\u255D\u2551")}),I(Q,{bold:!0,color:"cyan",children:Oe.bold.cyanBright("\u255A\u2550\u2550\u2550\u255D\u255A\u255D          \u255A\u255D  \u255A\u2550\u2550\u2550\u255D\u255A\u2550\u2550\u2550\u255D")}),I(Q,{children:" "}),I(Q,{color:"gray",italic:!0,children:"Salesforce Terminal User Interface - Interactive CLI"}),gt(Q,{color:"gray",italic:!0,children:["v",Hr.version]}),I(Q,{children:" "})]}),b=()=>{if(!t)return gt(Nt,{flexDirection:"column",children:[I(Q,{bold:!0,children:"What would you like to do?"}),I(Dl,{items:Bi,onSelect:v=>{if(v.value==="exit"){d();return}e(v.value)},itemComponent:({isSelected:v=!1,label:O=""})=>{let L=Bi.find($=>$.label===O);return gt(Nt,{children:[I(Q,{color:v?"cyan":"white",children:O}),I(Q,{children:"  "}),I(Q,{color:"gray",children:L?.description})]})}})]});switch(t){case"org":return I(ri,{onBack:()=>e(null)});case"project":return I(ni,{onBack:()=>e(null)});case"auth":return I(li,{onBack:()=>e(null)});case"alias":return I(si,{onBack:()=>e(null)});case"metadata":return I(ui,{onBack:()=>e(null)});case"run":return I(di,{onBack:()=>e(null)});case"plugins":return I(gi,{onBack:()=>e(null)});case"settings":return I(Ti,{onBack:()=>e(null)});default:return null}},C=Ll(()=>{m(v=>!v)},[]);kl((v,O)=>{if(v==="?"){C();return}r&&O.return&&o(!1)});let P=()=>{let v=[{label:"Main Menu",active:!t}];return t&&v.push({label:Ml[t]||t,active:!0}),v},k=[{key:"\u2191\u2193",description:"Navigate menu items"},{key:"Enter",description:"Select menu item"},{key:"Esc",description:"Go back"},{key:"?",description:"Show/hide keyboard shortcuts"}];return I(gr,{position:"top",maxVisibleErrors:2,children:I(It,{componentName:"MainMenu",children:r?gt(Nt,{flexDirection:"column",padding:1,alignItems:"center",justifyContent:"center",children:[h(),I(Q,{color:"gray",italic:!0,children:"Press Enter to continue"})]}):gt(Nt,{flexDirection:"column",padding:1,children:[I(Bt,{type:"fade",duration:400,visible:l,onComplete:()=>a(!0),children:p()}),I(Bt,{type:"slide-up",duration:500,visible:l&&s,children:gt(Nt,{flexDirection:"column",children:[I(Si,{items:P()}),b(),I(Ci,{shortcuts:k,visible:c,onClose:C}),!c&&gt(Fl,{children:[I(Q,{children:" "}),gt(Q,{color:"gray",italic:!0,children:["Press ",I(Q,{bold:!0,children:"?"})," for keyboard shortcuts"]})]})]})})]})})})},wi=_l;import{Fragment as Hl,jsx as Ve,jsxs as Ri}from"react/jsx-runtime";var jl=()=>{let{state:t,setTheme:e,toggleStatusBar:r,toggleHelp:o}=Mr(),[n,i]=Nl(!1),{exit:l}=$l(),u=["base","dark","highContrast","salesforce"];return Ve(Bn,{actionHandlers:{help:()=>i(!0),quit:()=>l(),toggleStatusBar:()=>r(),toggleTheme:()=>{let c=(u.indexOf(t.themeName)+1)%u.length;e(u[c])}},children:Ve(Lt,{theme:t.theme,children:Ve(Pn,{children:Ve(zn,{children:Ve(gr,{position:"top",maxVisibleErrors:2,children:Ri(Ei,{flexDirection:"column",height:"100%",children:[Ve(Ei,{flexGrow:1,children:Ve(Zn,{children:n?Ve(Bo,{onClose:()=>i(!1)}):Ri(Hl,{children:[Ve(wi,{}),Ve(On,{}),Ve(Wn,{})]})})}),t.showStatusBar&&Ve(Co,{})]})})})})})})},Ul=()=>Ve(Tn,{children:Ve(jl,{})}),Pi=Ul;ls().install();gn();X.info("Starting SF TUI");Rc([import.meta.url]).then(()=>{let{waitUntilExit:t}=Oc(Pc.createElement(Pi));return t()}).then(()=>{X.info("SF TUI completed successfully"),process.exit(0)}).catch(t=>{X.fatal("Error running SF TUI",{error:t}),process.exit(1)});
//# sourceMappingURL=index.js.map